import{o as Q}from"./index-ssOd8bmB.js";import{h as se,o as m,c as y,a as e,n as z,d as f,i as O,w as te,v as he,F as j,r as E,e as R,t as I,u as F,j as D,k as Ie,b as X,f as W,l as ve,_ as ce,m as Se,p as ye,q as G,s as pe,x as _e,y as be}from"./index-3CCdx_ke.js";const Re=se("planner",{state:()=>({selectedArcanists:[]}),persist:!0}),Ce=se("wilderness",{state:()=>({settings:{dust1:6,dust2:6,dust3:6,gold1:6,gold2:6,gold3:6,vigor:0,lazyModo:!1,wildernessOutput:{dust:19440,gold:8640}}}),persist:!0}),Oe=se("plannerSettings",{state:()=>({settings:{showUnreleased:!1}}),persist:!0});se("warehouse",{state:()=>({}),persist:!0});const Ne=["data-tip"],Le={class:"rounded-md overflow-hidden"},Me={class:"avatar"},Ve=["src","alt"],xe={__name:"ArcanistIcon",props:{arcanist:{type:Object,required:!0}},setup(t){const l=s=>`/images/arcanists/icon/${s}.png`;return(s,a)=>(m(),y("div",{class:"tooltip","data-tip":t.arcanist.Name},[e("div",Le,[e("div",Me,[e("div",{class:z(["w-10 rounded",{"bg-orange-300":t.arcanist.Rarity===6,"bg-yellow-100":t.arcanist.Rarity===5,"bg-purple-400":t.arcanist.Rarity===4,"bg-sky-200":t.arcanist.Rarity===3,"bg-green-200":t.arcanist.Rarity===2}])},[e("img",{src:l(t.arcanist.Id),alt:t.arcanist.Name},null,8,Ve)],2)])])],8,Ne))}},De={class:"list-overlay"},je={class:"custom-modal-small h-1/2"},Ue={class:"relative mb-4"},qe=e("i",{class:"fas fa-times"},null,-1),Pe=[qe],Ge={class:"p-2 overflow-y-auto h-5/6"},We=["onClick"],Fe={class:"text-white ml-8"},Te={__name:"ArcanistList",props:{arcanists:{type:Array,required:!0}},emits:{closeOverlay:{type:Function,required:!0},selectArcanist:{type:Function,required:!0}},setup(t,{emit:l}){const s=t,a=l,n=r=>{a("selectArcanist",r),i()},i=()=>{a("closeOverlay")},v=f(""),c=O(()=>s.arcanists.filter(r=>r.Name.toLowerCase().includes(v.value.toLowerCase())));return(r,h)=>(m(),y("div",De,[e("div",je,[e("div",Ue,[te(e("input",{"onUpdate:modelValue":h[0]||(h[0]=o=>v.value=o),type:"text",placeholder:"Search Arcanists",class:"bg-gray-800 text-white p-2 rounded-md w-11/12 focus:outline-none"},null,512),[[he,v.value]]),e("button",{onClick:i,class:"absolute top-2 right-0 text-white"},Pe)]),e("div",Ge,[(m(!0),y(j,null,E(c.value,o=>(m(),y("div",{key:o.Id,onClick:d=>n(o),class:"p-4 flex items-center cursor-pointer hover:bg-gray-700 transition-colors"},[R(xe,{arcanist:o},null,8,["arcanist"]),e("span",Fe,I(o.Name),1)],8,We))),128))])])]))}},me=F().items.data;function re(t){return t>1e6?`${(t/1e6).toFixed(1)}m`:t>1e4?`${(t/1e3).toFixed(0)}k`:t.toString()}function Ee(t){const l=v=>{const c=me.find(r=>r.Name==v);return c?c.Id:null},s=v=>{const c=me.find(r=>r.Name==v);return c?c.Rarity:null},a=v=>{const c=l(v);return c?`/images/items/icon/${c}.png`:null},n=v=>{const c=s(v);return c?`/images/items/border/${c}.png`:null};return{material:t.Material,quantity:re(t.Quantity),itemImagePath:a(t.Material),borderImagePath:n(t.Material)}}const Be=["data-tip"],Qe={class:"relative inline-block"},ze=["src"],Ke=["src"],He={class:"absolute text-white bottom-4 right-3 bg-gray-700 rounded-tl px-1 py-px text-xs"},$e={__name:"ItemIcon",props:{material:{type:Object,required:!0}},setup(t){const l=t,s=O(()=>Ee(l.material));return(a,n)=>(m(),y("div",{class:"tooltip","data-tip":s.value.material},[e("div",Qe,[e("img",{src:s.value.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute object-contain"},null,8,ze),e("img",{src:s.value.itemImagePath,alt:"Material Image",class:"w-20 h-20 object-contain"},null,8,Ke),e("div",He,I(s.value.quantity),1)])],8,Be))}},Je={class:"custom-scrollbar max-h-48 pt-10 flex flex-wrap justify-center overflow-y-scroll overflow-x-hidden"},Xe={__name:"ItemList",props:{materialList:{type:Array,required:!0}},setup(t){const l=t;return(s,a)=>(m(),y("div",Je,[(m(!0),y(j,null,E(l.materialList,n=>(m(),D($e,{key:n,material:n},null,8,["material"]))),128))]))}},Ye=F().calculations.data,ge=F().items.data;function Ze(t){t.sort((l,s)=>{const a=ge.find(r=>r.Name===l.Material),n=ge.find(r=>r.Name===s.Material),i=["Base Item","Resonate Material","Insight Material","Build Material"],v=i.indexOf(a.Category),c=i.indexOf(n.Category);return v!==c?v-c:n.Rarity!==a.Rarity?n.Rarity-a.Rarity:a.Name.localeCompare(n.Name)})}function Ae(t){const l={};return t.forEach(a=>{a&&(Array.isArray(a)?a.flat().forEach(({Material:i,Quantity:v})=>{l[i]?l[i]+=v:l[i]=v}):typeof a=="object"&&Object.entries(a).forEach(([n,i])=>{l[n]?l[n]+=i:l[n]=i}))}),Object.keys(l).map(a=>({Material:a,Quantity:l[a]}))}function et(t){var a,n;Ze(t);const l=((a=t.find(i=>i.Material==="Dust"))==null?void 0:a.Quantity)||0,s=((n=t.find(i=>i.Material==="Sharpodonty"))==null?void 0:n.Quantity)||0;return l===0&&s===0?t.filter(v=>v.Material!=="Dust"&&v.Material!=="Sharpodonty"):t}function we(t){const l=o=>{let d={Dust:0,Sharpodonty:0};if(o.currentInsight==o.goalInsight){const{Dust:u,Sharpodonty:b}=n(o.currentLevel,o.goalLevel,o,o.currentInsight);return d.Dust+=u,d.Sharpodonty+=b,d}for(let u=o.currentInsight;u<=o.goalInsight;u++)if(u<o.goalInsight){const b=a(o,u);if(d.Dust+=b.Total.Dust,d.Sharpodonty+=b.Total.Sharpodonty,u==o.currentInsight){const{Dust:x,Sharpodonty:$}=n(1,o.currentLevel,o,u);d.Dust-=x,d.Sharpodonty-=$}}else{const{Dust:b,Sharpodonty:x}=n(1,o.goalLevel,o,u);d.Dust+=b,d.Sharpodonty+=x}return[{Material:"Dust",Quantity:d.Dust},{Material:"Sharpodonty",Quantity:d.Sharpodonty}]},s=(o,d,p)=>{const u={};if(o===d)return null;for(let x=o;x<=d;x++){const $=p.find(S=>S.Id===x);$&&$.Material.forEach((S,C)=>{const M=$.Quantity[C];u[S]?u[S]+=M:u[S]=M})}return Object.keys(u).map(x=>({Material:x,Quantity:u[x]}))},a=(o,d)=>Ye.find(u=>u.Rarity.includes(o.info.Rarity)&&u.Insight==d),n=(o,d,p,u)=>{let b={Dust:0,Sharpodonty:0};for(let x=Number(++o);x<=Number(d);x++){const $=a(p,u),S=x.toString(),C=$.Levels[S];C&&(b.Dust+=C.Dust,b.Sharpodonty+=C.Sharpodonty)}return b},i=s(t.currentInsight,t.goalInsight,t.info.Insight),v=s(t.currentResonance,t.goalResonance,t.info.Resonance),c=l(t),r=Ae([i,v,c]);return et(r)}const tt={__name:"ArcanistCalculate",props:{arcanist:{type:Object,required:!0}},setup(t){const l=t,s=O(()=>{const a=l.arcanist;return we(a)});return(a,n)=>(m(),y("div",null,[R(Xe,{materialList:s.value},null,8,["materialList"])]))}},st={class:"relative w-2/3 md:w-1/3 flex justify-center"},at=e("div",{class:"flex items-center justify-center"},[e("i",{class:"fa-solid fa-caret-up text-blue-300"})],-1),lt={class:"grid grid-cols-4 gap-1 p-3 border border-blue-300 rounded-md shadow-lg options-box custom-gradient-gray-blue"},nt=["onClick"],it={class:"flex items-center justify-center font-semibold rounded-full w-8 h-8 leading-none flex-col bg-blue-300"},L={__name:"SelectList",props:{label:{type:String,required:!0},options:{type:Array,required:!0},selected:{type:Number}},emits:["update:selected"],setup(t,{emit:l}){const s=t,a=l,n=f(!1),i=f(s.selected),v=f(null),c=()=>{n.value=!0},r=()=>{n.value=!1},h=o=>{i.value=o,a("update:selected",o,s.label),n.value=!1};return Q(v,r),Ie(()=>{s.selected===void 0?(i.value=s.options[0],a("update:selected",s.options[0],s.label)):(i.value=s.selected,a("update:selected",s.selected,s.label))}),(o,d)=>(m(),y("div",st,[e("button",{onClick:c,class:"btn btn-sm btn-ghost gradient-blue w-1/2 m-2"},[i.value!==null?(m(),y(j,{key:0},[X(I(i.value),1)],64)):(m(),y(j,{key:1},[X(I(s.options[0]),1)],64))]),n.value?(m(),y("div",{key:0,ref_key:"containerRef",ref:v,class:"absolute mt-14 w-48 lg:w-64 z-50"},[at,e("div",lt,[(m(!0),y(j,null,E(t.options,p=>(m(),y("button",{key:p,class:"m-1",onClick:u=>h(p)},[e("div",it,[e("div",null,I(p),1)])],8,nt))),128))])],512)):W("",!0)]))}},rt={class:"edit-overlay"},ot={class:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-gray-800 to-blue-950 p-4 border-2 border-black rounded-md w-11/12 sm:max-w-2xl lg:h-auto"},ct={class:"flex items-center p-2 mb-3 shadow-border-b"},ut={class:"flex items-center justify-center mr-2 space-x-3"},dt={class:"text-1xl md:text-2xl text-white font-bold"},vt={class:"text-sm text-white",for:"raritySelect"},mt={class:"ml-auto flex items-center space-x-3"},gt={class:"tooltip","data-tip":"Hidden / Show"},ft=e("i",{class:"fas fa-times"},null,-1),ht=[ft],yt=e("div",{class:"custom-line"},null,-1),pt=e("div",{class:"custom-label text-blue-100"},"Current Level",-1),_t={class:"mt-2 flex justify-center items-center leading-none"},bt=e("i",{class:"text-white text-center flex items-center justify-center font-extrabold text-2xl -translate-y-2"},"_",-1),xt=e("div",{class:"custom-label text-blue-100"},"Goal Level",-1),$t={class:"mt-2 flex justify-center items-center leading-none"},At=e("i",{class:"text-white text-center flex items-center justify-center font-extrabold text-2xl -translate-y-2"},"_",-1),wt=e("div",{class:"custom-label text-blue-100"},"Resonance",-1),kt={class:"mt-2 flex justify-center items-center leading-none"},It=e("i",{class:"text-white fa-solid fa-angles-right text-center"},null,-1),St={class:"flex justify-center space-x-4"},Rt={key:0,class:"toast toast-middle toast-center"},Ct=e("div",{class:"-translate-x-3 alert alert-info bg-red-300"},[e("span",null,"Current and Goal are the same!")],-1),Ot=[Ct],Nt={__name:"PlannerEdit",props:{selectedArcanist:{type:Object,required:!0},selectedArcanists:{type:Array,required:!0},listArcanists:{type:Array,required:!0}},emits:{closeOverlay:{type:Function,required:!0},updateSelectedArcanists:{type:Function,required:!0},updateListArcanists:{type:Function,required:!0}},setup(t,{emit:l}){const s=t,a=l,n=f(!1),i=f(0),v=F().calculations.data,c=f(s.selectedArcanist.info),r=f(s.selectedArcanists),h=f(s.listArcanists),o=f(s.selectedArcanist.currentInsight),d=f(s.selectedArcanist.currentLevel),p=f(s.selectedArcanist.currentResonance),u=f(s.selectedArcanist.goalInsight),b=f(s.selectedArcanist.goalLevel),x=f(s.selectedArcanist.goalResonance),$=f(s.selectedArcanist.isVisible),S=O(()=>({info:c.value,isVisible:$.value,currentInsight:o.value,currentLevel:d.value,goalInsight:u.value,goalLevel:b.value,currentResonance:p.value,goalResonance:x.value})),C=O(()=>c.value.Rarity),M=O(()=>[0,...c.value.Insight.map(_=>_.Id)]),w=O(()=>M.value.filter(_=>_>=o.value)),N=O(()=>{const _=v.find(g=>g.Rarity.includes(c.value.Rarity)&&g.Insight==o.value);return _?[1,...Object.keys(_.Levels).map(Number).filter(g=>g%5===0)]:[]}),V=O(()=>{if(u.value===null)return[];const _=v.find(g=>g.Rarity.includes(c.value.Rarity)&&g.Insight==u.value);return _?u.value===o.value?[1,...Object.keys(_.Levels).map(Number).filter(g=>g%5===0)].filter(g=>g>=d.value):[1,...Object.keys(_.Levels).map(Number).filter(g=>g%5===0)]:[]}),U=O(()=>{if(o.value===null)return[];if(o.value===0)return p.value=0,[0];const _=Number(o.value);if(_===0)return p.value=null,null;const g=_*5;return Array.from({length:g},(k,T)=>Number(T+1))}),H=O(()=>{if(u.value===null)return[];if(u.value===0)return x.value=0,[0];const _=Number(u.value),g=Number(p.value);if(_===0)return x.value=null,null;const k=g||1,T=_*5;return Array.from({length:T-k+1},(ue,A)=>Number(k+A))}),B=(_,g,k,T)=>Number(_)>Number(k)?!0:Number(_)<Number(k)?!1:Number(g)>Number(T),le=()=>{if(o.value===u.value&&d.value===b.value&&p.value===x.value)return n.value=!0,setTimeout(()=>{n.value=!1},1e3),!0;n.value=!1},Z=()=>{if(le())return;const _=r.value.findIndex(g=>Number(g.info.Id)===Number(S.value.info.Id));_!==-1?r.value[_]={...r.value[_],...S.value}:r.value.push(S.value),h.value=h.value.filter(g=>g.Id!==S.value.info.Id),a("updateSelectedArcanists",r.value),a("updateListArcanists",h.value),a("closeOverlay")},ne=()=>{const _=r.value.findIndex(g=>Number(g.info.Id)===Number(S.value.info.Id));_!==-1&&r.value.splice(_,1),J()},J=()=>{a("closeOverlay")},q=(_,g)=>{switch(g){case"Current Insight":o.value=_;break;case"Current Level":d.value=_;break;case"Current Resonance":p.value=_;break;case"Goal Insight":u.value=_;break;case"Goal Level":b.value=_;break;case"Goal Resonance":x.value=_;break;case"Visible":$.value=_;break}};return ve([o,d,p,u,b,x],()=>{i.value+=1}),ve([o,d,p],()=>{B(o.value,d.value,u.value,b.value)&&(u.value=o.value,b.value=d.value),Number(p.value)>Number(x.value)&&(x.value=p.value)}),(_,g)=>(m(),y("div",rt,[e("div",ot,[e("div",ct,[e("div",ut,[R(xe,{class:"ml-2",arcanist:c.value},null,8,["arcanist"]),e("h2",dt,I(c.value.Name),1),e("label",vt,[X(I(C.value)+" ",1),e("i",{class:z(["fa-solid fa-star",{"text-orange-300":C.value===6,"text-yellow-100":C.value===5,"text-purple-400":C.value===4,"text-sky-200":C.value===3,"text-green-200":C.value===2}])},null,2)]),e("div",{class:"tooltip","data-tip":"Remove Arcanist"},[e("i",{onClick:ne,class:"fas fa-trash-alt text-gray-500"})])]),e("div",mt,[e("div",gt,[e("div",{onClick:g[0]||(g[0]=k=>$.value=!$.value),class:z(["badge badge-ghost",$.value?"green-badge":"red-badge"])},[e("i",{class:z($.value?"fa-regular fa-eye":"fa-regular fa-eye-slash")},null,2)],2)]),e("button",{onClick:J,class:"text-white"},ht)])]),yt,pt,e("div",_t,[(m(),D(L,{key:i.value,modelValue:o.value,"onUpdate:modelValue":g[1]||(g[1]=k=>o.value=k),selected:o.value,label:"Current Insight",options:M.value,"onUpdate:selected":q},null,8,["modelValue","selected","options"])),bt,(m(),D(L,{key:i.value,modelValue:d.value,"onUpdate:modelValue":g[2]||(g[2]=k=>d.value=k),selected:d.value,label:"Current Level",options:N.value,"onUpdate:selected":q},null,8,["modelValue","selected","options"]))]),xt,e("div",$t,[(m(),D(L,{key:i.value,modelValue:u.value,"onUpdate:modelValue":g[3]||(g[3]=k=>u.value=k),selected:u.value,label:"Goal Insight",options:w.value,"onUpdate:selected":q},null,8,["modelValue","selected","options"])),At,(m(),D(L,{key:i.value,modelValue:b.value,"onUpdate:modelValue":g[4]||(g[4]=k=>b.value=k),selected:b.value,label:"Goal Level",options:V.value,"onUpdate:selected":q},null,8,["modelValue","selected","options"]))]),wt,e("div",kt,[(m(),D(L,{key:i.value,modelValue:p.value,"onUpdate:modelValue":g[5]||(g[5]=k=>p.value=k),selected:p.value,label:"Current Resonance",options:U.value,"onUpdate:selected":q},null,8,["modelValue","selected","options"])),It,(m(),D(L,{key:i.value,modelValue:x.value,"onUpdate:modelValue":g[6]||(g[6]=k=>x.value=k),selected:x.value,label:"Goal Resonance",options:H.value,"onUpdate:selected":q},null,8,["modelValue","selected","options"]))]),e("div",St,[e("button",{onClick:Z,class:"btn btn-success"},"Save"),n.value?(m(),y("div",Rt,Ot)):W("",!0)]),R(tt,{arcanist:S.value},null,8,["arcanist"])])]))}},Lt=["data-tip"],Mt={class:"rounded-md overflow-hidden"},Vt={class:"avatar"},Dt=["src","alt"],jt={__name:"ArcanistIconToggle",props:{arcanist:{type:Object,required:!0},visible:{type:Boolean,required:!0}},setup(t){const l=s=>`/images/arcanists/icon/${s}.png`;return(s,a)=>(m(),y("div",{class:"tooltip","data-tip":t.arcanist.Name},[e("div",Mt,[e("div",Vt,[e("div",{class:z(["w-12 rounded",{"filter-grayscale opacity-50":!t.visible,"bg-orange-300":t.arcanist.Rarity===6,"bg-yellow-100":t.arcanist.Rarity===5,"bg-purple-400":t.arcanist.Rarity===4,"bg-sky-200":t.arcanist.Rarity===3,"bg-green-200":t.arcanist.Rarity===2}])},[e("img",{src:l(t.arcanist.Id),alt:t.arcanist.Name},null,8,Dt)],2)])])],8,Lt))}},Ut=ce(jt,[["__scopeId","data-v-3503c834"]]),qt={class:"flex flex-row flex-wrap justify-center space-x-2"},Pt={__name:"PlannerSelector",props:{selectedArcanists:{type:Array,required:!0}},emits:["open-edit-overlay"],setup(t,{emit:l}){const s=t,a=l,n=f(s.selectedArcanists),i=c=>{a("open-edit-overlay",c)},v=c=>{c.isVisible=!c.isVisible};return(c,r)=>(m(),y("div",null,[e("div",qt,[(m(!0),y(j,null,E(n.value,h=>(m(),D(Ut,{key:h.Name,arcanist:h.info,visible:h.isVisible,onClick:o=>i(h),onContextmenu:Se(o=>v(h),["prevent"])},null,8,["arcanist","visible","onClick","onContextmenu"]))),128))])]))}},Y=F().items.data,oe=F().stages.data,Gt=F().crafts.data;function Wt(t){let l=t.map(a=>({...a}));const s=[];return l.forEach(a=>{const n=Gt.find(i=>i.Name===a.Material);if(n){s.push(n);for(let i=0;i<n.Material.length;i++){const v=n.Material[i],c=n.Quantity[i]*a.Quantity;c>0&&(l.find(r=>r.Material===v)?l.find(r=>r.Material===v).Quantity+=c:l.push({Material:v,Quantity:c}))}}}),l=l.filter(a=>!s.some(n=>n.Name===a.Material)),l.sort((a,n)=>{const i=Y.find(c=>c.Name===a.Material);return Y.find(c=>c.Name===n.Material).Id-i.Id}),l}function Ft(t){const s=Y.find(n=>n.Name===t.Material).Rarity,a=t.Quantity;return s===3?a*40:s===4?a*100:s===5?a*250:s===6?a*1500:0}function Tt(t){return t==="Oneiric Shop"?"/images/items/common/1.png":"/images/items/common/0.png"}function ke(t,l,s,a,n){return{stage:t,runs:isNaN(l)?0:l,activity:isNaN(s)?0:s,days:isNaN(a)?0:a,materials:n,activityImagePath:Tt(t)}}function ee(t,l){let s=l.find(a=>a.stage===t);return s||(s=ke(t,null,t==="Oneiric Shop"?0:null,null,[]),l.push(s)),s}function P(t){return t.sort((l,s)=>{const a=oe.find(i=>i.Name===l.stage),n=oe.find(i=>i.Name===s.stage);return a&&n?a.Id-n.Id:a?-1:n?1:0})}function fe(t){const l=[];Wt(t).forEach(r=>{const h=oe.find(o=>o.Material.includes(r.Material));if(h){const o=Math.ceil(parseFloat(r.Quantity)/parseFloat(h.Quantity)),d=Math.ceil(o*h.Activity),p=(d/240).toFixed(1),u=r,b=l.findIndex(x=>x.stage===h.Name);b!==-1?l[b].materials.push(u):l.push(ke(h.Name,o,d,p,[u]))}else{const o=ee("Tier 3",l),d=ee("Tier 2",l),p=ee("Oneiric Shop",l),u=ee("Unreleased",l);if(Y.find(b=>b.Name===r.Material).Category==="Resonate Material")p.activity+=Ft(r),p.materials.push(r);else{const b=Y.find($=>$.Name===r.Material).Rarity;(b===3?o:b===2?d:u).materials.push(r)}}});const a=l.filter(r=>["The Poussiere VI","Mintage Aesthetics VI","Oneiric Shop"].includes(r.stage)&&r.materials.length>0),n=l.filter(r=>(r.stage.endsWith("II")||r.stage.endsWith("IV")||r.stage.endsWith("VI"))&&!a.some(h=>h.stage===r.stage)&&r.materials.length>0),i=l.filter(r=>!["Tier 2","Tier 3","Unreleased",...a.map(h=>h.stage),...n.map(h=>h.stage)].includes(r.stage)&&r.materials.length>0),v=l.filter(r=>["Tier 2","Tier 3","Unreleased"].includes(r.stage)&&r.materials.length>0);return P(a),P(n),P(i),P(v),[{id:0,cards:P(a)},{id:1,cards:P(n)},{id:2,cards:P(i)},{id:3,cards:P(v)}]}function Et(t){let l=0,s=0;return t.forEach(a=>{a.cards.forEach(n=>{n.days!==null&&(l+=n.activity,s+=parseFloat(n.days))})}),[l,s.toFixed(0)]}const Bt={class:"bg-gray-700/40 shadow rounded flex flex-col items-center justify-between relative"},Qt={class:"stage text-white p-2"},zt={class:"calculations w-full flex justify-center items-center bg-gradient-to-r from-blue-800/70 to-blue-900/90 text-white p-2 rounded-md"},Kt={class:"border-blue-700/90 border-r pr-3"},Ht={key:0},Jt=e("i",{class:"fa-solid fa-xmark text-xs mr-0.5"},null,-1),Xt={key:1},Yt={class:"pl-2"},Zt=["src"],es={class:"border-blue-700/90 border-l pl-3"},ts={class:"items-center flex"},ss={__name:"Card",props:{card:{type:Object,required:!0}},setup(t){return(l,s)=>(m(),y("div",Bt,[e("div",Qt,[e("p",null,I(t.card.stage),1)]),e("div",zt,[e("p",Kt,[t.card.runs>0?(m(),y("span",Ht,[Jt,X(I(t.card.runs),1)])):(m(),y("span",Xt,I(t.card.runs),1))]),e("p",Yt,I(t.card.activity==null?"?":t.card.activity),1),e("img",{src:t.card.activityImagePath,alt:"Activity Image",class:"inline-block w-8 h-8"},null,8,Zt),e("p",es,I(t.card.days)+" "+I(t.card.days===null?"":t.card.days>1?"days":"day"),1)]),e("div",ts,[(m(!0),y(j,null,E(t.card.materials,(a,n)=>(m(),y("div",{key:n},[R($e,{material:a},null,8,["material"])]))),128))])]))}},as={class:"w-full mb-4 flex flex-col"},ls={class:"mb-4 gap-3 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4"},ns={__name:"PlannerLayer",props:{layer:{type:Object,required:!0}},setup(t){const l=t,s=O(()=>l.layer.cards&&l.layer.cards.length>0),a=O(()=>{switch(l.layer.id){case 0:return"yellow-badge";case 1:return"indigo-badge";case 2:return"purple-badge";case 3:return"green-badge";default:return"red-badge"}}),n=O(()=>{switch(l.layer.id){case 0:return"Resources";case 1:return"Insight";case 2:return"Hard Stages";case 3:return"Miscs";default:return"Undefined"}});return(i,v)=>(m(),y("div",as,[s.value?(m(),y("div",{key:0,class:z(["badge badge-lg badge-ghost mt-2 mb-2 w-32",a.value])},I(n.value),3)):W("",!0),e("div",ls,[(m(!0),y(j,null,E(t.layer.cards,(c,r)=>(m(),D(ss,{key:r,card:c},null,8,["card"]))),128))])]))}},is={class:"flex flex-wrap"},rs={__name:"PlannerResult",props:{selectedArcanists:{type:Array,required:!0}},emits:["update:totalActivityAndDays"],setup(t,{emit:l}){const s=t,a=l,n=f([]),i=f([]);return ye(()=>{const v=s.selectedArcanists.map(r=>r.isVisible?we(r):[]),c=Ae(v);n.value=c,a("update:totalActivityAndDays",Et(fe(c))),i.value=fe(c)}),(v,c)=>(m(),y("div",is,[(m(!0),y(j,null,E(i.value,(r,h)=>(m(),D(ns,{key:h,layer:r},null,8,["layer"]))),128))]))}},os="/Kornblume/images/items/common/0.png",cs="/Kornblume/images/items/icon/55.png",us="/Kornblume/images/items/icon/54.png",ae=t=>(pe("data-v-b116625d"),t=t(),_e(),t),ds={class:"flex custom-gradient-gray-blue-light px-2 py-2 md:px-4 lg:px-6 rounded-md items-center justify-center"},vs=ae(()=>e("i",{class:"fa-solid fa-calculator text-white mr-3"},null,-1)),ms={class:"tooltip flex items-center","data-tip":"Calculations hasn't been optimized"},gs={class:"text"},fs=ae(()=>e("div",{class:"avatar"},[e("div",{class:"w-8 rounded"},[e("img",{src:os,alt:"avatar"})])],-1)),hs={class:"text pr-3"},ys={class:"tooltip","data-tip":"Wilderness Production"},ps={class:"text"},_s=ae(()=>e("div",{class:"avatar"},[e("div",{class:"w-8 rounded"},[e("img",{src:cs,alt:"avatar"})])],-1)),bs={class:"tooltip","data-tip":"Wilderness Production"},xs={class:"text"},$s=ae(()=>e("div",{class:"avatar"},[e("div",{class:"w-8 rounded"},[e("img",{src:us,alt:"avatar"})])],-1)),As={__name:"PlannerTotal",props:{totalActivityAndDays:{type:Array,required:!0},wildernessSettings:{type:Object,required:!0}},setup(t){return(l,s)=>(m(),y("div",ds,[vs,e("div",ms,[e("div",gs,I(t.totalActivityAndDays[0]),1),fs,e("div",hs,I(t.totalActivityAndDays[1])+" "+I(t.totalActivityAndDays[1]>1?"days":"day"),1)]),e("div",ys,[e("div",ps,I(G(re)(t.wildernessSettings.wildernessOutput.dust*t.totalActivityAndDays[1])),1)]),_s,e("div",bs,[e("div",xs,I(G(re)(t.wildernessSettings.wildernessOutput.gold*t.totalActivityAndDays[1])),1)]),$s]))}},ws=ce(As,[["__scopeId","data-v-b116625d"]]),K=t=>(pe("data-v-ffb65882"),t=t(),_e(),t),ks={class:"list-overlay"},Is={class:"custom-modal-small h-auto"},Ss=K(()=>e("i",{class:"fas fa-times"},null,-1)),Rs=[Ss],Cs=K(()=>e("div",{class:"custom-label text-yellow-100"},"Dust Bell Towers",-1)),Os={class:"grid grid-cols-3"},Ns=K(()=>e("div",{class:"custom-label text-yellow-100"},"Gold Bell Towers",-1)),Ls={class:"grid grid-cols-3"},Ms=K(()=>e("div",{class:"custom-label text-yellow-100"},"Vigor",-1)),Vs={class:"grid grid-cols-2 p-2 items-center"},Ds={class:"tooltip","data-tip":"Collect once a day"},js={class:"form-control"},Us={class:"cursor-pointer label justify-center"},qs=K(()=>e("span",{class:"label-text text-yellow-100 mr-3"},"Lazy Modo",-1)),Ps=["checked"],Gs=K(()=>e("div",{class:"custom-label text-yellow-100"},"Output",-1)),Ws={class:"grid grid-cols-2 p-2"},Fs={class:"tooltip","data-tip":"Dust"},Ts={class:"flex items-center justify-center gradient-blue text-center rounded-xl mx-5 lg:mx-2 h-8"},Es={class:"tooltip","data-tip":"Sharpodonty"},Bs={class:"flex items-center justify-center gradient-blue text-center rounded-xl mx-5 lg:mx-2 h-8"},Qs={__name:"PlannerWilderness",props:{settings:{type:Object,required:!0}},emits:{closeOverlay:{type:Function,required:!0},saveWildernessSettings:{type:Function,required:!0}},setup(t,{emit:l}){const s=t,a=l,n=()=>{a("closeOverlay")},i=f(s.settings.dust1),v=f(s.settings.dust2),c=f(s.settings.dust3),r=f(s.settings.gold1),h=f(s.settings.gold2),o=f(s.settings.gold3),d=f(s.settings.vigor),p=f(s.settings.lazyModo),u=[0,1,2,3,4,5,6],b=[0,120,150,175,210,240,270],x=[0,60,75,80,96,108,120],$=(w,N)=>{switch(N){case"Dust 1":i.value=w;break;case"Dust 2":v.value=w;break;case"Dust 3":c.value=w;break;case"Gold 1":r.value=w;break;case"Gold 2":h.value=w;break;case"Gold 3":o.value=w;break}},S=()=>{const w=parseInt(d.value,10);if(isNaN(w)){d.value=null;return}if(w<0){d.value=0;return}if(w>50){d.value=50;return}d.value=w},C=()=>{const w={dust1:i.value,dust2:v.value,dust3:c.value,gold1:r.value,gold2:h.value,gold3:o.value,vigor:d.value,lazyModo:p.value,wildernessOutput:M.value};a("saveWildernessSettings",w),n()},M=O(()=>{const w=b[i.value]+b[v.value]+b[c.value],N=x[r.value]+x[h.value]+x[o.value],V=d.value?parseFloat(d.value/100):0,U=p.value?20:24,H=Math.ceil(w*(1+V)*U),B=Math.ceil(N*(1+V)*U);return{dust:H,gold:B}});return(w,N)=>(m(),y("div",ks,[e("div",Is,[e("button",{onClick:n,class:"absolute top-2 right-4 text-white"},Rs),Cs,e("div",Os,[R(L,{class:"select-list",options:u,selected:i.value,label:"Dust 1","onUpdate:selected":$},null,8,["selected"]),R(L,{class:"select-list",options:u,selected:v.value,label:"Dust 2","onUpdate:selected":$},null,8,["selected"]),R(L,{class:"select-list",options:u,selected:c.value,label:"Dust 3","onUpdate:selected":$},null,8,["selected"])]),Ns,e("div",Ls,[R(L,{class:"select-list",options:u,selected:r.value,label:"Gold 1","onUpdate:selected":$},null,8,["selected"]),R(L,{class:"select-list",options:u,selected:h.value,label:"Gold 2","onUpdate:selected":$},null,8,["selected"]),R(L,{class:"select-list",options:u,selected:o.value,label:"Gold 3","onUpdate:selected":$},null,8,["selected"])]),Ms,e("div",Vs,[te(e("input",{onInput:S,"onUpdate:modelValue":N[0]||(N[0]=V=>d.value=V),type:"text",placeholder:"Vigor",class:"input input-bordered input-info input-sm mx-10 lg:mx-5 gradient-blue text-center"},null,544),[[he,d.value]]),e("div",Ds,[e("div",js,[e("label",Us,[qs,te(e("input",{"onUpdate:modelValue":N[1]||(N[1]=V=>p.value=V),type:"checkbox",checked:p.value,class:"checkbox checkbox-info"},null,8,Ps),[[be,p.value]])])])])]),Gs,e("div",Ws,[e("div",Fs,[e("label",Ts,I(M.value.dust),1)]),e("div",Es,[e("label",Bs,I(M.value.gold),1)])]),e("div",{class:"flex justify-center"},[e("button",{onClick:C,class:"btn btn-success"},"Save")])])]))}},zs=ce(Qs,[["__scopeId","data-v-ffb65882"]]),Ks={class:"list-overlay"},Hs=e("i",{class:"fas fa-times"},null,-1),Js=[Hs],Xs=e("p",{class:"text-white"},"Work in progress",-1),Ys={__name:"PlannerWarehouse",emits:{closeOverlay:{type:Function,required:!0}},setup(t,{emit:l}){const s=l,a=()=>{s("closeOverlay")};return(n,i)=>(m(),y("div",Ks,[e("div",{class:"custom-modal-small h-auto"},[e("button",{onClick:a,class:"absolute top-2 right-4 text-white"},Js),Xs])]))}},Zs={class:"list-overlay"},ea={class:"custom-modal-small h-auto space-y-5"},ta=e("i",{class:"fas fa-times"},null,-1),sa=[ta],aa={class:"form-control"},la={class:"cursor-pointer label justify-center space-x-5"},na=e("span",{class:"label-text text-white text-md"},"Show unreleased",-1),ia={__name:"PlannerSettings",props:{settings:{type:Object,required:!0}},emits:{closeOverlay:{type:Function,required:!0},saveSettings:{type:Function,required:!0}},setup(t,{emit:l}){const s=t,a=l,n=f(s.settings.showUnreleased),i=()=>{a("closeOverlay")},v=()=>{const c={showUnreleased:n.value};a("saveSettings",c),i()};return(c,r)=>(m(),y("div",Zs,[e("div",ea,[e("button",{onClick:i,class:"absolute top-2 right-4 text-white"},sa),e("div",aa,[e("label",la,[na,te(e("input",{"onUpdate:modelValue":r[0]||(r[0]=h=>n.value=h),type:"checkbox",class:"checkbox checkbox-info"},null,512),[[be,n.value]])])]),e("div",{class:"flex justify-center"},[e("button",{onClick:v,class:"btn btn-success"},"Save")])])]))}},ra={class:"responsive-spacer"},oa=e("h2",{class:"text-2xl text-white font-bold mb-4 lg:mb-6"},"Planner",-1),ca=e("i",{class:"fa-solid fa-wand-magic-sparkles"},null,-1),ua=e("i",{class:"fa-solid fa-tree"},null,-1),da=[ua],va=e("i",{class:"fa-solid fa-box-archive"},null,-1),ma=[va],ga=e("i",{class:"fa-solid fa-gear"},null,-1),fa=[ga],ha=e("div",{class:"custom-line"},null,-1),ya=e("div",{class:"custom-line"},null,-1),pa={key:0,class:"overlay"},_a={key:1,class:"overlay"},ba={key:2,class:"overlay"},xa={key:3,class:"overlay"},$a={key:4,class:"overlay"},ka={__name:"PlannerView",setup(t){const l=Re(),s=Ce(),a=F().arcanists.data,n=Oe(),i=f([]),v=O(()=>l.selectedArcanists.map(A=>A.info.Id));ye(()=>{i.value=a.filter(A=>!v.value.includes(A.Id)&&A.IsReleased!==n.settings.showUnreleased),i.value.sort((A,ie)=>{const de=ie.Rarity-A.Rarity;return de!==0?de:A.Name.localeCompare(ie.Name)})});const c=f([]),r=f([]);f([]);const h=f(!1),o=f(!1),d=f(!1),p=f(!1),u=f(!1),b=f(null),x=f(null),$=f(null),S=f(null),C=f(null),M=()=>{h.value=!0},w=()=>{h.value=!1},N=()=>{o.value=!0},V=A=>{c.value=A,N()},U=()=>{o.value=!1},H=()=>{d.value=!0},B=()=>{d.value=!1},le=()=>{p.value=!0},Z=()=>{p.value=!1},ne=()=>{u.value=!0},J=()=>{u.value=!1},q=A=>{c.value={info:A,isVisible:!0,currentInsight:0,currentLevel:1,currentResonance:0,goalInsight:0,goalLevel:1,goalResonance:0},N()},_=A=>{l.selectedArcanists=A,U()},g=A=>{i.value=A},k=A=>{r.value=A},T=A=>{s.settings=A},ue=A=>{n.settings=A};return Q(b,w),Q(x,U),Q($,B),Q(S,Z),Q(C,J),(A,ie)=>(m(),y("div",ra,[oa,R(Pt,{selectedArcanists:G(l).selectedArcanists,onOpenEditOverlay:V},null,8,["selectedArcanists"]),e("div",{class:"flex justify-between items-center mb-2 mt-2"},[e("button",{onClick:M,class:"btn btn-ghost btn-sm custom-gradient-button"},[ca,X(" Add Arcanist")]),e("div",{class:"flex space-x-2"},[e("div",{class:"tooltip","data-tip":"Wilderness Settings"},[e("button",{onClick:H,class:"btn btn-ghost btn-sm custom-gradient-button"},da)]),e("div",{class:"tooltip","data-tip":"Manage Warehouse"},[e("button",{onClick:le,class:"btn btn-ghost btn-sm custom-gradient-button"},ma)]),e("button",{onClick:ne,class:"btn btn-ghost btn-sm custom-gradient-button"},fa)])]),ha,R(ws,{totalActivityAndDays:r.value,wildernessSettings:G(s).settings},null,8,["totalActivityAndDays","wildernessSettings"]),ya,h.value?(m(),y("div",pa,[R(Te,{ref_key:"arcanistListRef",ref:b,arcanists:i.value,onCloseOverlay:w,onSelectArcanist:q},null,8,["arcanists"])])):W("",!0),o.value?(m(),y("div",_a,[R(Nt,{ref_key:"plannerEditRef",ref:x,selectedArcanist:c.value,selectedArcanists:G(l).selectedArcanists,listArcanists:i.value,onCloseOverlay:U,onUpdateSelectedArcanists:_,onUpdateListArcanists:g},null,8,["selectedArcanist","selectedArcanists","listArcanists"])])):W("",!0),d.value?(m(),y("div",ba,[R(zs,{ref_key:"wildernessRef",ref:$,settings:G(s).settings,onCloseOverlay:B,onSaveWildernessSettings:T},null,8,["settings"])])):W("",!0),p.value?(m(),y("div",xa,[R(Ys,{ref_key:"warehouseRef",ref:S,onCloseOverlay:Z},null,512)])):W("",!0),u.value?(m(),y("div",$a,[R(ia,{ref_key:"settingsRef",ref:C,settings:G(n).settings,onCloseOverlay:J,onSaveSettings:ue},null,8,["settings"])])):W("",!0),R(rs,{selectedArcanists:G(l).selectedArcanists,"onUpdate:totalActivityAndDays":k},null,8,["selectedArcanists"])]))}};export{ka as default};
