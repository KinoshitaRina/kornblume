import{o as ne}from"./index-cFYFFC8A.js";import{h as ce,o as $,c as I,a as t,n as ee,d as S,i as V,w as le,v as me,F as Q,r as te,e as D,t as L,u as H,j as T,k as Ce,b as z,f as X,l as _e,_ as ue,m as Ge,p as Te,q as ge,s as ye,x as Se,y as J,z as Me}from"./index-PSmuIiQV.js";const ze=ce("planner",{state:()=>({selectedArcanists:[]}),persist:!0}),He=ce("wilderness",{state:()=>({settings:{dust1:6,dust2:6,dust3:6,gold1:6,gold2:6,gold3:6,vigor:0,lazyModo:!1,wildernessOutput:{dust:19440,gold:8640}}}),persist:!0}),Ke=ce("plannerSettings",{state:()=>({settings:{showUnreleased:!1}}),persist:!0}),Ye=["data-tip"],Ze={class:"rounded-md overflow-hidden"},Je={class:"avatar"},Xe=["src","alt"],Ne={__name:"ArcanistIcon",props:{arcanist:{type:Object,required:!0}},setup(e){const n=s=>`images/arcanists/icon/${s}.png`;return(s,l)=>($(),I("div",{class:"tooltip","data-tip":e.arcanist.Name},[t("div",Ze,[t("div",Je,[t("div",{class:ee(["w-10 rounded",{"bg-orange-300":e.arcanist.Rarity===6,"bg-yellow-100":e.arcanist.Rarity===5,"bg-purple-400":e.arcanist.Rarity===4,"bg-sky-200":e.arcanist.Rarity===3,"bg-green-200":e.arcanist.Rarity===2}])},[t("img",{src:n(e.arcanist.Id),alt:e.arcanist.Name},null,8,Xe)],2)])])],8,Ye))}},et={class:"list-overlay"},tt={class:"custom-modal-small h-2/3"},st={class:"relative mb-4"},nt=t("i",{class:"fas fa-times"},null,-1),lt=[nt],at={class:"p-2 overflow-y-auto h-5/6"},ot=["onClick"],it={class:"text-white ml-8"},rt={__name:"ArcanistList",props:{arcanists:{type:Array,required:!0}},emits:{closeOverlay:{type:Function,required:!0},selectArcanist:{type:Function,required:!0}},setup(e,{emit:n}){const s=e,l=n,u=f=>{l("selectArcanist",f),i()},i=()=>{l("closeOverlay")},p=S(""),c=V(()=>s.arcanists.filter(f=>f.Name.toLowerCase().includes(p.value.toLowerCase())));return(f,h)=>($(),I("div",et,[t("div",tt,[t("div",st,[le(t("input",{"onUpdate:modelValue":h[0]||(h[0]=o=>p.value=o),type:"text",placeholder:"Search Arcanists",class:"bg-gray-800 text-white p-2 rounded-md w-11/12 focus:outline-none"},null,512),[[me,p.value]]),t("button",{onClick:i,class:"absolute top-2 right-0 text-white"},lt)]),t("div",at,[($(!0),I(Q,null,te(c.value,o=>($(),I("div",{key:o.Id,onClick:a=>u(o),class:"p-4 flex items-center cursor-pointer hover:bg-gray-700 transition-colors"},[D(Ne,{arcanist:o},null,8,["arcanist"]),t("span",it,L(o.Name),1)],8,ot))),128))])])]))}},be=H().items.data;function fe(e){return e>1e6?`${(e/1e6).toFixed(1)}m`:e>1e4?`${(e/1e3).toFixed(0)}k`:e.toString()}function Oe(e){const n=p=>{const c=be.find(f=>f.Name==p);return c?c.Id:null},s=p=>{const c=be.find(f=>f.Name==p);return c?c.Rarity:null},l=p=>{const c=n(p);return c?`images/items/icon/${c}.png`:null},u=p=>{const c=s(p);return c?`images/items/border/${c}.png`:null};return{material:e.Material,quantity:fe(e.Quantity),itemImagePath:l(e.Material),borderImagePath:u(e.Material)}}const ct=["data-tip"],ut={class:"relative inline-block"},dt=["src"],ht=["src"],ft={class:"absolute text-white bottom-4 right-3 bg-gray-700 rounded-tl px-1 py-px text-xs"},Re={__name:"ItemIcon",props:{material:{type:Object,required:!0}},setup(e){const n=e,s=V(()=>Oe(n.material));return(l,u)=>($(),I("div",{class:"tooltip","data-tip":s.value.material},[t("div",ut,[t("img",{src:s.value.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute"},null,8,dt),t("img",{src:s.value.itemImagePath,alt:"Material Image",class:"w-20 h-20"},null,8,ht),t("div",ft,L(s.value.quantity),1)])],8,ct))}},vt={class:"custom-scrollbar pt-10 flex flex-wrap justify-center overflow-y-scroll overflow-x-hidden"},pt={__name:"ItemList",props:{materialList:{type:Array,required:!0}},setup(e){const n=e;return(s,l)=>($(),I("div",vt,[($(!0),I(Q,null,te(n.materialList,u=>($(),T(Re,{key:u,material:u},null,8,["material"]))),128))]))}},mt=H().calculations.data,xe=H().items.data;function Ve(e){e.sort((n,s)=>{const l=xe.find(f=>f.Name===n.Material),u=xe.find(f=>f.Name===s.Material),i=["Base Item","Resonate Material","Insight Material","Build Material"],p=i.indexOf(l.Category),c=i.indexOf(u.Category);return p!==c?p-c:u.Rarity!==l.Rarity?u.Rarity-l.Rarity:l.Name.localeCompare(u.Name)})}function Le(e){const n={};return e.forEach(l=>{l&&(Array.isArray(l)?l.flat().forEach(({Material:i,Quantity:p})=>{n[i]?n[i]+=p:n[i]=p}):typeof l=="object"&&Object.entries(l).forEach(([u,i])=>{n[u]?n[u]+=i:n[u]=i}))}),Object.keys(n).map(l=>({Material:l,Quantity:n[l]}))}function gt(e){var l,u;Ve(e);const n=((l=e.find(i=>i.Material==="Dust"))==null?void 0:l.Quantity)||0,s=((u=e.find(i=>i.Material==="Sharpodonty"))==null?void 0:u.Quantity)||0;return n===0&&s===0?e.filter(p=>p.Material!=="Dust"&&p.Material!=="Sharpodonty"):e}function je(e){const n=o=>{let a={Dust:0,Sharpodonty:0};if(o.currentInsight==o.goalInsight){const{Dust:m,Sharpodonty:b}=u(o.currentLevel,o.goalLevel,o,o.currentInsight);return a.Dust+=m,a.Sharpodonty+=b,a}for(let m=o.currentInsight;m<=o.goalInsight;m++)if(m<o.goalInsight){const b=l(o,m);if(a.Dust+=b.Total.Dust,a.Sharpodonty+=b.Total.Sharpodonty,m==o.currentInsight){const{Dust:w,Sharpodonty:C}=u(1,o.currentLevel,o,m);a.Dust-=w,a.Sharpodonty-=C}}else{const{Dust:b,Sharpodonty:w}=u(1,o.goalLevel,o,m);a.Dust+=b,a.Sharpodonty+=w}return[{Material:"Dust",Quantity:a.Dust},{Material:"Sharpodonty",Quantity:a.Sharpodonty}]},s=(o,a,y)=>{const m={};if(o===a)return null;for(let w=Number(o+1);w<=a;w++){const C=y.find(r=>r.Id===w);C&&C.Material.forEach((r,v)=>{const g=C.Quantity[v];m[r]?m[r]+=g:m[r]=g})}return Object.keys(m).map(w=>({Material:w,Quantity:m[w]}))},l=(o,a)=>mt.find(m=>m.Rarity.includes(o.info.Rarity)&&m.Insight==a),u=(o,a,y,m)=>{let b={Dust:0,Sharpodonty:0};for(let w=Number(++o);w<=Number(a);w++){const C=l(y,m),r=w.toString(),v=C.Levels[r];v&&(b.Dust+=v.Dust,b.Sharpodonty+=v.Sharpodonty)}return b},i=s(e.currentInsight,e.goalInsight,e.info.Insight),p=s(e.currentResonance,e.goalResonance,e.info.Resonance),c=n(e),f=Le([i,p,c]);return gt(f)}const yt={__name:"ArcanistCalculate",props:{arcanist:{type:Object,required:!0}},setup(e){const n=e,s=V(()=>{const l=n.arcanist;return je(l)});return(l,u)=>($(),I("div",null,[D(pt,{class:"max-h-48",materialList:s.value},null,8,["materialList"])]))}},_t={class:"relative w-2/3 md:w-1/3 flex justify-center"},bt={key:0},xt=t("i",{class:"fa-regular fa-circle text-white"},null,-1),wt=[xt],$t={key:1},kt=["src","alt"],At=t("div",{class:"flex items-center justify-center"},[t("i",{class:"fa-solid fa-caret-up text-blue-500"})],-1),It={class:"grid grid-cols-4 gap-1 p-3 border border-blue-300 rounded-md shadow-lg options-box custom-gradient-gray-blue"},Ct=["onClick"],St={class:"flex items-center justify-center font-semibold rounded-full w-8 h-8 leading-none flex-col bg-blue-500 text-white"},Mt={key:0},Nt=t("i",{class:"fa-regular fa-circle text-white"},null,-1),Ot=[Nt],Rt={key:1},Vt=["src","alt"],W={__name:"SelectList",props:{label:{type:String,required:!0},options:{type:Array,required:!0},selected:{type:Number}},emits:["update:selected"],setup(e,{emit:n}){const s=e,l=n,u=S(!1),i=S(s.selected),p=S(null),c=()=>{u.value=!0},f=()=>{u.value=!1},h=a=>{i.value=a,l("update:selected",a,s.label),u.value=!1},o=a=>`images/items/common/insight${a}.png`;return ne(p,f),Ce(()=>{s.selected===void 0?(i.value=s.options[0],l("update:selected",s.options[0],s.label)):(i.value=s.selected,l("update:selected",s.selected,s.label))}),(a,y)=>($(),I("div",_t,[t("button",{onClick:c,class:"btn btn-sm btn-ghost gradient-blue w-1/2 m-2"},[e.label==="Current Insight"||e.label==="Goal Insight"?($(),I(Q,{key:0},[i.value===0?($(),I("div",bt,wt)):($(),I("div",$t,[t("img",{class:"avatar w-6",src:o(i.value),alt:"Option "+i.value},null,8,kt)]))],64)):($(),I(Q,{key:1},[z(L(i.value),1)],64))]),u.value?($(),I("div",{key:0,ref_key:"containerRef",ref:p,class:"absolute mt-14 w-48 lg:w-64 z-50"},[At,t("div",It,[($(!0),I(Q,null,te(e.options,m=>($(),I("button",{key:m,class:"m-1",onClick:b=>h(m)},[t("div",St,[e.label==="Current Insight"||e.label==="Goal Insight"?($(),I(Q,{key:0},[m===0?($(),I("div",Mt,Ot)):($(),I("div",Rt,[t("img",{src:o(m),alt:"Option "+m},null,8,Vt)]))],64)):($(),I(Q,{key:1},[z(L(m),1)],64))])],8,Ct))),128))])],512)):X("",!0)]))}},Lt={class:"edit-overlay"},jt={class:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-gray-800 to-blue-950 p-4 border-2 border-black rounded-md w-11/12 sm:max-w-2xl lg:h-auto"},Dt={class:"flex items-center p-2 mb-3 shadow-border-b"},Pt={class:"flex items-center justify-center mr-2 space-x-3"},qt={class:"text-1xl md:text-2xl text-white font-bold"},Ut={class:"text-sm text-white",for:"raritySelect"},Ft={class:"ml-auto flex items-center space-x-3"},Et={class:"tooltip","data-tip":"Hidden / Show"},Wt=t("i",{class:"fas fa-times"},null,-1),Qt=[Wt],Bt=t("div",{class:"custom-line"},null,-1),Gt=t("div",{class:"custom-label text-blue-100"},"Current Level",-1),Tt={class:"mt-2 flex justify-center items-center leading-none"},zt=t("i",{class:"text-white text-center flex items-center justify-center font-extrabold text-2xl -translate-y-2"},"_",-1),Ht=t("div",{class:"custom-label text-blue-100"},"Goal Level",-1),Kt={class:"mt-2 flex justify-center items-center leading-none"},Yt=t("i",{class:"text-white text-center flex items-center justify-center font-extrabold text-2xl -translate-y-2"},"_",-1),Zt=t("div",{class:"custom-label text-blue-100"},"Resonance",-1),Jt={class:"mt-2 flex justify-center items-center leading-none"},Xt=t("i",{class:"text-white fa-solid fa-angles-right text-center"},null,-1),es={class:"flex justify-center space-x-4"},ts={key:0,class:"toast toast-middle toast-center"},ss=t("div",{class:"-translate-x-3 alert alert-info bg-red-300"},[t("span",null,"Current and Goal are the same!")],-1),ns=[ss],ls={__name:"PlannerEdit",props:{selectedArcanist:{type:Object,required:!0},selectedArcanists:{type:Array,required:!0},listArcanists:{type:Array,required:!0}},emits:{closeOverlay:{type:Function,required:!0},updateSelectedArcanists:{type:Function,required:!0},updateListArcanists:{type:Function,required:!0}},setup(e,{emit:n}){const s=e,l=n,u=S(!1),i=S(0),p=H().calculations.data,c=S(s.selectedArcanist.info),f=S(s.selectedArcanists),h=S(s.listArcanists),o=S(s.selectedArcanist.currentInsight),a=S(s.selectedArcanist.currentLevel),y=S(s.selectedArcanist.currentResonance),m=S(s.selectedArcanist.goalInsight),b=S(s.selectedArcanist.goalLevel),w=S(s.selectedArcanist.goalResonance),C=S(s.selectedArcanist.isVisible),r=V(()=>({info:c.value,isVisible:C.value,currentInsight:o.value,currentLevel:a.value,goalInsight:m.value,goalLevel:b.value,currentResonance:y.value,goalResonance:w.value})),v=V(()=>c.value.Rarity),g=V(()=>[0,...c.value.Insight.map(M=>M.Id)]),d=V(()=>g.value.filter(M=>M>=o.value)),x=V(()=>{const M=p.find(k=>k.Rarity.includes(c.value.Rarity)&&k.Insight==o.value);return M?[1,...Object.keys(M.Levels).map(Number).filter(k=>k%5===0)]:[]}),_=V(()=>{if(m.value===null)return[];const M=p.find(k=>k.Rarity.includes(c.value.Rarity)&&k.Insight==m.value);return M?m.value===o.value?[1,...Object.keys(M.Levels).map(Number).filter(k=>k%5===0)].filter(k=>k>=a.value):[1,...Object.keys(M.Levels).map(Number).filter(k=>k%5===0)]:[]}),A=V(()=>{if(o.value===null)return[];if(o.value===0)return y.value=0,[0];const M=Number(o.value);if(M===0)return y.value=null,null;const k=M*5;return Array.from({length:k},(R,K)=>Number(K+1))}),O=V(()=>{if(m.value===null)return[];if(m.value===0)return w.value=0,[0];const M=Number(m.value),k=Number(y.value);if(M===0)return w.value=null,null;const R=k||1,K=M*5;return Array.from({length:K-R+1},(ie,N)=>Number(R+N))}),j=(M,k,R,K)=>Number(M)>Number(R)?!0:Number(M)<Number(R)?!1:Number(k)>Number(K),U=()=>{if(o.value===m.value&&a.value===b.value&&y.value===w.value)return u.value=!0,setTimeout(()=>{u.value=!1},1e3),!0;u.value=!1},F=()=>{if(U())return;const M=f.value.findIndex(k=>Number(k.info.Id)===Number(r.value.info.Id));M!==-1?f.value[M]={...f.value[M],...r.value}:f.value.push(r.value),h.value=h.value.filter(k=>k.Id!==r.value.info.Id),l("updateSelectedArcanists",f.value),l("updateListArcanists",h.value),l("closeOverlay")},B=()=>{const M=f.value.findIndex(k=>Number(k.info.Id)===Number(r.value.info.Id));M!==-1&&f.value.splice(M,1),G()},G=()=>{l("closeOverlay")},E=(M,k)=>{switch(k){case"Current Insight":o.value=M;break;case"Current Level":a.value=M;break;case"Current Resonance":y.value=M;break;case"Goal Insight":m.value=M;break;case"Goal Level":b.value=M;break;case"Goal Resonance":w.value=M;break;case"Visible":C.value=M;break}};return _e([o,a,y,m,b,w],()=>{i.value+=1,a.value>x.value[x.value.length-1]&&(a.value=x.value[x.value.length-1]),b.value>_.value[_.value.length-1]&&(b.value=_.value[_.value.length-1])}),_e([o,a,y],()=>{j(o.value,a.value,m.value,b.value)&&(m.value=o.value,b.value=a.value),Number(y.value)>Number(w.value)&&(w.value=y.value)}),(M,k)=>($(),I("div",Lt,[t("div",jt,[t("div",Dt,[t("div",Pt,[D(Ne,{class:"ml-2",arcanist:c.value},null,8,["arcanist"]),t("h2",qt,L(c.value.Name),1),t("label",Ut,[z(L(v.value)+" ",1),t("i",{class:ee(["fa-solid fa-star",{"text-orange-300":v.value===6,"text-yellow-100":v.value===5,"text-purple-400":v.value===4,"text-sky-200":v.value===3,"text-green-200":v.value===2}])},null,2)]),t("div",{class:"tooltip","data-tip":"Remove Arcanist"},[t("i",{onClick:B,class:"fas fa-trash-alt text-gray-500"})])]),t("div",Ft,[t("div",Et,[t("div",{onClick:k[0]||(k[0]=R=>C.value=!C.value),class:ee(["badge badge-ghost",C.value?"green-badge":"red-badge"])},[t("i",{class:ee(C.value?"fa-regular fa-eye":"fa-regular fa-eye-slash")},null,2)],2)]),t("button",{onClick:G,class:"text-white"},Qt)])]),Bt,Gt,t("div",Tt,[($(),T(W,{key:i.value,modelValue:o.value,"onUpdate:modelValue":k[1]||(k[1]=R=>o.value=R),selected:o.value,label:"Current Insight",options:g.value,"onUpdate:selected":E},null,8,["modelValue","selected","options"])),zt,($(),T(W,{key:i.value,modelValue:a.value,"onUpdate:modelValue":k[2]||(k[2]=R=>a.value=R),selected:a.value,label:"Current Level",options:x.value,"onUpdate:selected":E},null,8,["modelValue","selected","options"]))]),Ht,t("div",Kt,[($(),T(W,{key:i.value,modelValue:m.value,"onUpdate:modelValue":k[3]||(k[3]=R=>m.value=R),selected:m.value,label:"Goal Insight",options:d.value,"onUpdate:selected":E},null,8,["modelValue","selected","options"])),Yt,($(),T(W,{key:i.value,modelValue:b.value,"onUpdate:modelValue":k[4]||(k[4]=R=>b.value=R),selected:b.value,label:"Goal Level",options:_.value,"onUpdate:selected":E},null,8,["modelValue","selected","options"]))]),Zt,t("div",Jt,[($(),T(W,{key:i.value,modelValue:y.value,"onUpdate:modelValue":k[5]||(k[5]=R=>y.value=R),selected:y.value,label:"Current Resonance",options:A.value,"onUpdate:selected":E},null,8,["modelValue","selected","options"])),Xt,($(),T(W,{key:i.value,modelValue:w.value,"onUpdate:modelValue":k[6]||(k[6]=R=>w.value=R),selected:w.value,label:"Goal Resonance",options:O.value,"onUpdate:selected":E},null,8,["modelValue","selected","options"]))]),t("div",es,[t("button",{onClick:F,class:"btn btn-success"},"Save"),u.value?($(),I("div",ts,ns)):X("",!0)]),D(yt,{arcanist:r.value},null,8,["arcanist"])])]))}},as=["data-tip"],os={class:"rounded-md overflow-hidden"},is={class:"avatar"},rs=["src","alt"],cs={__name:"ArcanistIconToggle",props:{arcanist:{type:Object,required:!0},visible:{type:Boolean,required:!0}},setup(e){const n=s=>`images/arcanists/icon/${s}.png`;return(s,l)=>($(),I("div",{class:"tooltip","data-tip":e.arcanist.Name},[t("div",os,[t("div",is,[t("div",{class:ee(["w-12 rounded",{"filter-grayscale opacity-50":!e.visible,"bg-orange-300":e.arcanist.Rarity===6,"bg-yellow-100":e.arcanist.Rarity===5,"bg-purple-400":e.arcanist.Rarity===4,"bg-sky-200":e.arcanist.Rarity===3,"bg-green-200":e.arcanist.Rarity===2}])},[t("img",{src:n(e.arcanist.Id),alt:e.arcanist.Name},null,8,rs)],2)])])],8,as))}},us=ue(cs,[["__scopeId","data-v-11642327"]]),ds={class:"flex flex-row flex-wrap justify-center space-x-2"},hs=t("p",{class:"text-center text-slate-300 text-sm opacity-70"},"Left click to edit, right click to show / hide.",-1),fs={__name:"PlannerSelector",props:{selectedArcanists:{type:Array,required:!0}},emits:["open-edit-overlay"],setup(e,{emit:n}){const s=e,l=n,u=S(s.selectedArcanists),i=c=>{l("open-edit-overlay",c)},p=c=>{c.isVisible=!c.isVisible};return(c,f)=>($(),I("div",null,[t("div",ds,[($(!0),I(Q,null,te(u.value,h=>($(),T(us,{key:h.Name,arcanist:h.info,visible:h.isVisible,onClick:o=>i(h),onContextmenu:Ge(o=>p(h),["prevent"])},null,8,["arcanist","visible","onClick","onContextmenu"]))),128))]),hs]))}},Y=ce("warehouse",{state:()=>({isActive:!1,data:[],loaded:!1}),actions:{toggle(){this.isActive=!this.isActive},setData(e){this.data=e},setLoaded(){this.loaded=!0},addItem(e,n){this.data.push({Material:e,Quantity:0,Category:n})},addShopItem(e,n){for(let s=0;s<this.data.length;s++)if(this.data[s].Material===e){this.data[s].Quantity+=Number(n);break}},updateItem(e,n){for(let s=0;s<this.data.length;s++)if(this.data[s].Material===e){this.data[s].Quantity=n;break}},resetAll(){for(let e=0;e<this.data.length;e++)this.data[e].Quantity=0},resetCategory(e){for(let n=0;n<this.data.length;n++)this.data[n].Category===e&&(this.data[n].Quantity=0)}},persist:!0}),q=(e,n,s)=>e.matrix[Math.imul(n,e.width)+s],P=(e,n,s,l)=>{e.matrix[Math.imul(n,e.width)+s]=l},he=e=>typeof e[Symbol.iterator]=="function"?e:Object.entries(e),we=e=>e===!0?!0:e===!1?new Set:e instanceof Set?e:new Set(e),vs=e=>{const{direction:n,objective:s,integers:l,binaries:u}=e,i=n==="minimize"?-1:1,p=he(e.constraints),c=he(e.variables),f=Array.isArray(c)?c:Array.from(c),h=[],o=[];if(l!=null||u!=null){const d=we(u),x=d===!0?!0:we(l);for(let _=1;_<=f.length;_++){const[A]=f[_-1];d===!0||d.has(A)?(h.push(_),o.push(_)):(x===!0||x.has(A))&&o.push(_)}}const a=new Map;for(const[d,x]of p){const _=a.get(d)??{row:NaN,lower:-1/0,upper:1/0};_.lower=Math.max(_.lower,x.equal??x.min??-1/0),_.upper=Math.min(_.upper,x.equal??x.max??1/0),a.has(d)||a.set(d,_)}let y=1;for(const d of a.values())d.row=y,y+=(Number.isFinite(d.lower)?1:0)+(Number.isFinite(d.upper)?1:0);const m=f.length+1,b=y+h.length,w=m+b,C=new Float64Array(m*b),r=new Int32Array(w),v=new Int32Array(w),g={matrix:C,width:m,height:b,positionOfVariable:r,variableAtPosition:v};for(let d=0;d<w;d++)r[d]=d,v[d]=d;for(let d=1;d<m;d++)for(const[x,_]of he(f[d-1][1])){x===s&&P(g,0,d,i*_);const A=a.get(x);A!=null&&(Number.isFinite(A.upper)?(P(g,A.row,d,_),Number.isFinite(A.lower)&&P(g,A.row+1,d,-_)):Number.isFinite(A.lower)&&P(g,A.row,d,-_))}for(const d of a.values())Number.isFinite(d.upper)?(P(g,d.row,0,d.upper),Number.isFinite(d.lower)&&P(g,d.row+1,0,-d.lower)):Number.isFinite(d.lower)&&P(g,d.row,0,-d.lower);for(let d=0;d<h.length;d++){const x=y+d;P(g,x,0,1),P(g,x,h[d],1)}return{tableau:g,sign:i,variables:f,integers:o}},De=(e,n)=>{const s=Math.round(1/n);return Math.round((e+Number.EPSILON)*s)/s},Pe=(e,n,s)=>{const l=q(e,n,s),u=e.variableAtPosition[e.width+n],i=e.variableAtPosition[s];e.variableAtPosition[e.width+n]=i,e.variableAtPosition[s]=u,e.positionOfVariable[u]=s,e.positionOfVariable[i]=e.width+n;const p=[];for(let c=0;c<e.width;c++){const f=q(e,n,c);Math.abs(f)>1e-16?(P(e,n,c,f/l),p.push(c)):P(e,n,c,0)}P(e,n,s,1/l);for(let c=0;c<e.height;c++){if(c===n)continue;const f=q(e,c,s);if(Math.abs(f)>1e-16){for(let h=0;h<p.length;h++){const o=p[h];P(e,c,o,q(e,c,o)-f*q(e,n,o))}P(e,c,s,-f/l)}}},qe=(e,n,s,l)=>{e.push([n.variableAtPosition[n.width+s],n.variableAtPosition[l]]);for(let u=6;u<=Math.trunc(e.length/2);u++){let i=!0;for(let p=0;p<u;p++){const c=e.length-1-p,[f,h]=e[c],[o,a]=e[c-u];if(f!==o||h!==a){i=!1;break}}if(i)return!0}return!1},ps=(e,n)=>{const s=[],{precision:l,maxPivots:u,checkCycles:i}=n;for(let p=0;p<u;p++){let c=0,f=l;for(let a=1;a<e.width;a++){const y=q(e,0,a);y>f&&(f=y,c=a)}if(c===0)return["optimal",De(q(e,0,0),l)];let h=0,o=1/0;for(let a=1;a<e.height;a++){const y=q(e,a,c);if(y<=l)continue;const b=q(e,a,0)/y;if(b<o&&(h=a,o=b,b<=l))break}if(h===0)return["unbounded",c];if(i&&qe(s,e,h,c))return["cycled",NaN];Pe(e,h,c)}return["cycled",NaN]},Ue=(e,n)=>{const s=[],{precision:l,maxPivots:u,checkCycles:i}=n;for(let p=0;p<u;p++){let c=0,f=-l;for(let a=1;a<e.height;a++){const y=q(e,a,0);y<f&&(f=y,c=a)}if(c===0)return ps(e,n);let h=0,o=-1/0;for(let a=1;a<e.width;a++){const y=q(e,c,a);if(y<-l){const m=-q(e,0,a)/y;m>o&&(o=m,h=a)}}if(h===0)return["infeasible",NaN];if(i&&qe(s,e,c,h))return["cycled",NaN];Pe(e,c,h)}return["cycled",NaN]};var ms=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fe={exports:{}};(function(e,n){(function(){var s,l,u,i,p,c,f,h,o,a,y,m,b,w,C;u=Math.floor,a=Math.min,l=function(r,v){return r<v?-1:r>v?1:0},o=function(r,v,g,d,x){var _;if(g==null&&(g=0),x==null&&(x=l),g<0)throw new Error("lo must be non-negative");for(d==null&&(d=r.length);g<d;)_=u((g+d)/2),x(v,r[_])<0?d=_:g=_+1;return[].splice.apply(r,[g,g-g].concat(v)),v},c=function(r,v,g){return g==null&&(g=l),r.push(v),w(r,0,r.length-1,g)},p=function(r,v){var g,d;return v==null&&(v=l),g=r.pop(),r.length?(d=r[0],r[0]=g,C(r,0,v)):d=g,d},h=function(r,v,g){var d;return g==null&&(g=l),d=r[0],r[0]=v,C(r,0,g),d},f=function(r,v,g){var d;return g==null&&(g=l),r.length&&g(r[0],v)<0&&(d=[r[0],v],v=d[0],r[0]=d[1],C(r,0,g)),v},i=function(r,v){var g,d,x,_,A,O;for(v==null&&(v=l),_=(function(){O=[];for(var j=0,U=u(r.length/2);0<=U?j<U:j>U;0<=U?j++:j--)O.push(j);return O}).apply(this).reverse(),A=[],d=0,x=_.length;d<x;d++)g=_[d],A.push(C(r,g,v));return A},b=function(r,v,g){var d;if(g==null&&(g=l),d=r.indexOf(v),d!==-1)return w(r,0,d,g),C(r,d,g)},y=function(r,v,g){var d,x,_,A,O;if(g==null&&(g=l),x=r.slice(0,v),!x.length)return x;for(i(x,g),O=r.slice(v),_=0,A=O.length;_<A;_++)d=O[_],f(x,d,g);return x.sort(g).reverse()},m=function(r,v,g){var d,x,_,A,O,j,U,F,B;if(g==null&&(g=l),v*10<=r.length){if(_=r.slice(0,v).sort(g),!_.length)return _;for(x=_[_.length-1],U=r.slice(v),A=0,j=U.length;A<j;A++)d=U[A],g(d,x)<0&&(o(_,d,0,null,g),_.pop(),x=_[_.length-1]);return _}for(i(r,g),B=[],O=0,F=a(v,r.length);0<=F?O<F:O>F;0<=F?++O:--O)B.push(p(r,g));return B},w=function(r,v,g,d){var x,_,A;for(d==null&&(d=l),x=r[g];g>v;){if(A=g-1>>1,_=r[A],d(x,_)<0){r[g]=_,g=A;continue}break}return r[g]=x},C=function(r,v,g){var d,x,_,A,O;for(g==null&&(g=l),x=r.length,O=v,_=r[v],d=2*v+1;d<x;)A=d+1,A<x&&!(g(r[d],r[A])<0)&&(d=A),r[v]=r[d],v=d,d=2*v+1;return r[v]=_,w(r,O,v,g)},s=function(){r.push=c,r.pop=p,r.replace=h,r.pushpop=f,r.heapify=i,r.updateItem=b,r.nlargest=y,r.nsmallest=m;function r(v){this.cmp=v??l,this.nodes=[]}return r.prototype.push=function(v){return c(this.nodes,v,this.cmp)},r.prototype.pop=function(){return p(this.nodes,this.cmp)},r.prototype.peek=function(){return this.nodes[0]},r.prototype.contains=function(v){return this.nodes.indexOf(v)!==-1},r.prototype.replace=function(v){return h(this.nodes,v,this.cmp)},r.prototype.pushpop=function(v){return f(this.nodes,v,this.cmp)},r.prototype.heapify=function(){return i(this.nodes,this.cmp)},r.prototype.updateItem=function(v){return b(this.nodes,v,this.cmp)},r.prototype.clear=function(){return this.nodes=[]},r.prototype.empty=function(){return this.nodes.length===0},r.prototype.size=function(){return this.nodes.length},r.prototype.clone=function(){var v;return v=new r,v.nodes=this.nodes.slice(0),v},r.prototype.toArray=function(){return this.nodes.slice(0)},r.prototype.insert=r.prototype.push,r.prototype.top=r.prototype.peek,r.prototype.front=r.prototype.peek,r.prototype.has=r.prototype.contains,r.prototype.copy=r.prototype.clone,r}(),function(r,v){return e.exports=v()}(this,function(){return s})}).call(ms)})(Fe);var ys=Fe.exports,_s=ys;const bs=gs(_s),$e=(e,n)=>({matrix:new Float64Array(e),positionOfVariable:new Int32Array(n),variableAtPosition:new Int32Array(n)}),xs=(e,{matrix:n,positionOfVariable:s,variableAtPosition:l},u)=>{const{width:i,height:p}=e;n.set(e.matrix);for(let f=0;f<u.length;f++){const[h,o,a]=u[f],y=(p+f)*i,m=e.positionOfVariable[o];if(m<i)n[y]=h*a,n.fill(0,y+1,y+i),n[y+m]=h;else{const b=(m-i)*i;n[y]=h*(a-n[b]);for(let w=1;w<i;w++)n[y+w]=-h*n[b+w]}}s.set(e.positionOfVariable),l.set(e.variableAtPosition);const c=i+p+u.length;for(let f=i+p;f<c;f++)s[f]=f,l[f]=f;return{matrix:n.subarray(0,e.matrix.length+i*u.length),width:i,height:p+u.length,positionOfVariable:s.subarray(0,c),variableAtPosition:l.subarray(0,c)}},ke=(e,n)=>{let s=0,l=0,u=0;for(let i=0;i<n.length;i++){const p=n[i],c=e.positionOfVariable[p]-e.width;if(c<0)continue;const f=q(e,c,0),h=Math.abs(f-Math.round(f));h>s&&(s=h,l=p,u=f)}return[l,u,s]},ws=(e,n,s)=>{const{tableau:l,sign:u,integers:i}=e,{precision:p,maxIterations:c,tolerance:f,timeout:h}=s,[o,a,y]=ke(l,i);if(y<=p)return[e,"optimal",n];const m=new bs((B,G)=>B[0]-G[0]);m.push([n,[[-1,o,Math.ceil(a)]]]),m.push([n,[[1,o,Math.floor(a)]]]);const b=i.length*2,w=l.matrix.length+b*l.width,C=l.positionOfVariable.length+b;let r=$e(w,C),v=$e(w,C);const g=n*(1-u*f),d=h+Date.now();let x=Date.now()>=d,_=!1,A=1/0,O=l,j=0;for(;j<c&&!m.empty()&&A>=g&&!x;){const[B,G]=m.pop();if(B>A)break;const E=xs(l,r,G),[M,k]=Ue(E,s);if(M==="optimal"&&k<A){const[R,K,ie]=ke(E,i);if(ie<=p){_=!0,A=k,O=E;const N=v;v=r,r=N}else{const N=[],Z=[];for(let se=0;se<G.length;se++){const oe=G[se],[Qe,Be]=oe;Be===R?Qe<0?Z.push(oe):N.push(oe):(N.push(oe),Z.push(oe))}Z.push([1,R,Math.floor(K)]),N.push([-1,R,Math.ceil(K)]),m.push([k,N]),m.push([k,Z])}}x=Date.now()>=d,j++}const F=(x||j>=c)&&!m.empty()&&A>=g?"timedout":_?"optimal":"infeasible";return[{...e,tableau:O},F,_?A:NaN]},Ae=({tableau:e,sign:n,variables:s},l,u,{precision:i,includeZeroVariables:p})=>{if(l==="optimal"||l==="timedout"&&!Number.isNaN(u)){const c=[];for(let f=0;f<s.length;f++){const[h]=s[f],o=e.positionOfVariable[f+1]-e.width,a=o>=0?q(e,o,0):0;a>i?c.push([h,De(a,i)]):p&&c.push([h,0])}return{status:l,result:-n*u,variables:c}}else if(l==="unbounded"){const c=e.variableAtPosition[u]-1;return{status:"unbounded",result:n*(1/0),variables:0<=c&&c<s.length?[[s[c][0],1/0]]:[]}}else return{status:l,result:NaN,variables:[]}},$s={precision:1e-8,checkCycles:!1,maxPivots:8192,tolerance:0,timeout:1/0,maxIterations:32768,includeZeroVariables:!1},ks=(e,n)=>{const s=vs(e),l={...$s,...n},[u,i]=Ue(s.tableau,l);if(s.integers.length===0||u!=="optimal")return Ae(s,u,i,l);{const[p,c,f]=ws(s,i,l);return Ae(p,c,f,l)}},Ee=H().items.data,ve=H().stages.data,As=H().formulas.data,pe=H().drops.data,Is=Y().data;function Cs(e){const s=Ee.find(u=>u.Name===e.Material).Rarity,l=e.Quantity;return s===3?l*40:s===4?l*100:s===5?l*250:s===6?l*1500:0}function Ss(e){return e==="Oneiric Shop"?"images/items/common/1.png":"images/items/common/0.png"}function We(e,n,s,l,u){return{stage:e,runs:isNaN(n)?0:n,activity:isNaN(s)?0:s,days:isNaN(l)?0:l,materials:u,activityImagePath:Ss(e)}}function Ie(e,n){let s=n.find(l=>l.stage===e);return s||(s=We(e,null,e==="Oneiric Shop"?0:null,null,[]),n.push(s)),s}function re(e){return e.sort((n,s)=>{const l=ve.find(i=>i.Name===n.stage),u=ve.find(i=>i.Name===s.stage);return l&&u?l.Id-u.Id:l?-1:u?1:0})}function Ms(e){const n=[];function s(h){const o=Ie("Oneiric Shop",n);Ee.find(a=>a.Name===h.Material).Category==="Resonate Material"&&(o.activity+=Cs(h),o.materials.push(h))}e.forEach(h=>{if(h.Quantity<=0)return;h.Quantity=parseFloat(h.Quantity),ve.find(a=>a.Material.includes(h.Material))||s(h)}),Ns(e).variables.forEach(h=>{const o=pe[h[0]];if(o){const a=Math.ceil(h[1]),y=Math.ceil(a*o.cost),m=(y/240).toFixed(1);let b=Object.entries(o.drops).map(([C,r])=>{let v=r/o.count*a;return v=v%1>=.99?Math.ceil(v):Math.floor(v),{Material:C,Quantity:v}});b=b.filter(C=>C.Quantity>0);const w=We(h[0],a,y,m,b);n.push(w)}else{const m={Material:h[0].split("-")[1].trim(),Quantity:h[1]};Ie("Wilderness Crafting",n).materials.push(m)}});const u=n.filter(h=>["The Poussiere VI","Mintage Aesthetics VI","Oneiric Shop"].includes(h.stage)&&h.materials.length>0),i=n.filter(h=>(h.stage.endsWith("II")||h.stage.endsWith("IV")||h.stage.endsWith("VI"))&&!u.some(o=>o.stage===h.stage)&&h.materials.length>0),p=n.filter(h=>!["Wilderness Crafting",...u.map(o=>o.stage),...i.map(o=>o.stage)].includes(h.stage)&&h.materials.length>0),c=n.filter(h=>["Wilderness Crafting"].includes(h.stage)&&h.materials.length>0);return[{id:0,cards:re(u)},{id:1,cards:re(i)},{id:2,cards:re(p)},{id:3,cards:re(c)}]}function Ns(e){const n={},s={},l=["Sinuous Howl","Interlaced Shudder","Hypocritical Murmur","Hoarse Echo","Sonorous Knell","Brief Cacophony","Moment of Dissonance"];e.forEach(({Material:a,Quantity:y})=>{l.includes(a)||(s[a]={min:y})});const u={},i=[];for(let{Name:a,Material:y,Quantity:m}of As){if(n[a]={min:0},y.length===0)continue;const b={};y.forEach((C,r)=>{b[C]=-m[r]});const w=`Wilderness Crafting - ${a}`;u[w]={[a]:1,...b,cost:0},i.includes(w)||i.push(w)}const p={};for(let a in pe){const y=pe[a],{count:m,cost:b,drops:w}=y;p[a]={cost:b};for(let C in w)p[a][C]=w[C]/m}const c={...n,...s};Is.forEach(a=>{const{Material:y,Quantity:m}=a,b=parseInt(m);b>0&&(c[y]?c[y]={min:c[y].min-b}:c[y]={min:-b})});const f=Object.assign({},u,p);return ks({objective:"cost",direction:"minimize",constraints:c,variables:f,integers:i},{precision:.01,tolerance:.1})}function Os(e){let n=0,s=0;return e.forEach(l=>{l.cards.forEach(u=>{u.days!==null&&(n+=u.activity,s+=parseFloat(u.days))})}),[n,s.toFixed(0)]}const Rs=e=>(ge("data-v-fc6ab015"),e=e(),ye(),e),Vs={class:"bg-gray-700/40 shadow rounded flex flex-col items-center justify-between relative"},Ls={class:"stage text-white p-2"},js={class:"calculations w-full flex justify-center items-center bg-gradient-to-r from-blue-800/70 to-blue-900/90 text-white p-2 rounded-md"},Ds={class:"border-blue-700/90 border-r pr-3"},Ps={key:0},qs=Rs(()=>t("i",{class:"fa-solid fa-xmark text-xs mr-0.5"},null,-1)),Us={key:1},Fs={class:"pl-2"},Es=["src"],Ws={class:"border-blue-700/90 border-l pl-3"},Qs={__name:"Card",props:{card:{type:Object,required:!0}},setup(e){const n=e,s=V(()=>n.card.materials.length<4);return(l,u)=>($(),I("div",Vs,[t("div",Ls,[t("p",null,L(e.card.stage),1)]),t("div",js,[t("p",Ds,[e.card.runs>0?($(),I("span",Ps,[qs,z(L(e.card.runs),1)])):($(),I("span",Us,L(e.card.runs),1))]),t("p",Fs,L(e.card.activity==null?"Crafted from Hard Stages":e.card.activity),1),le(t("img",{src:e.card.activityImagePath,alt:"Activity Image",class:"inline-block w-8 h-8"},null,8,Es),[[Te,e.card.activity]]),t("p",Ws,L(e.card.days)+" "+L(e.card.days===null?"":e.card.days>1?"days":"day"),1)]),t("div",{class:ee([{"custom-scrollbar":s.value},"flex overflow-y-hidden overflow-x-auto scrollbar m-auto"])},[($(!0),I(Q,null,te(e.card.materials,(i,p)=>($(),I("div",{key:p,class:"flex-shrink-0"},[D(Re,{class:"",material:i},null,8,["material"])]))),128))],2)]))}},Bs=ue(Qs,[["__scopeId","data-v-fc6ab015"]]),Gs={class:"w-full mb-4 flex flex-col"},Ts={__name:"PlannerLayer",props:{layer:{type:Object,required:!0}},setup(e){const n=e,s=V(()=>n.layer.cards&&n.layer.cards.length>0),l=V(()=>{switch(n.layer.id){case 0:return"yellow-badge";case 1:return"indigo-badge";case 2:return"purple-badge";case 3:return"green-badge";default:return"red-badge"}}),u=V(()=>{switch(n.layer.id){case 0:return"Resources";case 1:return"Insight";case 2:return"Hard Stages";case 3:return"Crafting";default:return"Undefined"}}),i=V(()=>{switch(n.layer.id){case 2:return"mb-2 gap-5 grid grid-cols-1 lg:grid-cols-2";case 3:return"mb-2 gap-5 grid grid-cols-1";default:return"mb-2 gap-5 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4"}});return(p,c)=>($(),I("div",Gs,[s.value?($(),I("div",{key:0,class:ee(["badge badge-lg badge-ghost mt-2 mb-2 w-32",l.value])},L(u.value),3)):X("",!0),t("div",{class:ee(i.value)},[($(!0),I(Q,null,te(e.layer.cards,(f,h)=>($(),T(Bs,{key:h,card:f},null,8,["card"]))),128))],2)]))}},zs={class:"flex flex-wrap"},Hs=t("p",{class:"text-slate-300 opacity-70 text-sm"},"High tier materials are converted to farmable ones.",-1),Ks={__name:"PlannerResult",props:{selectedArcanists:{type:Array,required:!0}},emits:["update:totalActivityAndDays"],setup(e,{emit:n}){const s=e,l=n,u=S([]),i=S([]);return Se(()=>{const p=s.selectedArcanists.map(h=>h.isVisible?je(h):[]),c=Le(p);u.value=c;const f=Ms(c);l("update:totalActivityAndDays",Os(f)),i.value=f}),(p,c)=>($(),I("div",zs,[Hs,($(!0),I(Q,null,te(i.value,(f,h)=>($(),T(Ts,{key:h,layer:f},null,8,["layer"]))),128))]))}},Ys="/Kornblume/images/items/common/0.png",Zs="/Kornblume/images/items/icon/55.png",Js="/Kornblume/images/items/icon/54.png",de=e=>(ge("data-v-b116625d"),e=e(),ye(),e),Xs={class:"flex custom-gradient-gray-blue-light px-2 py-2 md:px-4 lg:px-6 rounded-md items-center justify-center"},en=de(()=>t("i",{class:"fa-solid fa-calculator text-white mr-3"},null,-1)),tn={class:"tooltip flex items-center","data-tip":"Calculations hasn't been optimized"},sn={class:"text"},nn=de(()=>t("div",{class:"avatar"},[t("div",{class:"w-8 rounded"},[t("img",{src:Ys,alt:"avatar"})])],-1)),ln={class:"text pr-3"},an={class:"tooltip","data-tip":"Wilderness Production"},on={class:"text"},rn=de(()=>t("div",{class:"avatar"},[t("div",{class:"w-8 rounded"},[t("img",{src:Zs,alt:"avatar"})])],-1)),cn={class:"tooltip","data-tip":"Wilderness Production"},un={class:"text"},dn=de(()=>t("div",{class:"avatar"},[t("div",{class:"w-8 rounded"},[t("img",{src:Js,alt:"avatar"})])],-1)),hn={__name:"PlannerTotal",props:{totalActivityAndDays:{type:Array,required:!0},wildernessSettings:{type:Object,required:!0}},setup(e){return(n,s)=>($(),I("div",Xs,[en,t("div",tn,[t("div",sn,L(e.totalActivityAndDays[0]),1),nn,t("div",ln,L(e.totalActivityAndDays[1])+" "+L(e.totalActivityAndDays[1]>1?"days":"day"),1)]),t("div",an,[t("div",on,L(J(fe)(e.wildernessSettings.wildernessOutput.dust*e.totalActivityAndDays[1])),1)]),rn,t("div",cn,[t("div",un,L(J(fe)(e.wildernessSettings.wildernessOutput.gold*e.totalActivityAndDays[1])),1)]),dn]))}},fn=ue(hn,[["__scopeId","data-v-b116625d"]]),ae=e=>(ge("data-v-9672159b"),e=e(),ye(),e),vn={class:"list-overlay"},pn={class:"custom-modal-small h-auto"},mn=ae(()=>t("i",{class:"fas fa-times"},null,-1)),gn=[mn],yn=ae(()=>t("div",{class:"custom-label text-yellow-100"},"Dust Bell Towers",-1)),_n={class:"grid grid-cols-3"},bn=ae(()=>t("div",{class:"custom-label text-yellow-100"},"Gold Bell Towers",-1)),xn={class:"grid grid-cols-3"},wn=ae(()=>t("div",{class:"custom-label text-yellow-100"},"Vigor (%)",-1)),$n={class:"grid grid-cols-2 p-2 items-center"},kn={class:"tooltip","data-tip":"Collect once a day"},An={class:"form-control"},In={class:"cursor-pointer label justify-center"},Cn=ae(()=>t("span",{class:"label-text text-yellow-100 mr-3"},"Lazy Modo",-1)),Sn=["checked"],Mn=ae(()=>t("div",{class:"custom-label text-yellow-100"},"Output",-1)),Nn={class:"grid grid-cols-2 p-2"},On={class:"tooltip","data-tip":"Dust"},Rn={class:"flex items-center justify-center gradient-blue text-center rounded-xl mx-5 lg:mx-2 h-8"},Vn={class:"tooltip","data-tip":"Sharpodonty"},Ln={class:"flex items-center justify-center gradient-blue text-center rounded-xl mx-5 lg:mx-2 h-8"},jn={__name:"PlannerWilderness",props:{settings:{type:Object,required:!0}},emits:{closeOverlay:{type:Function,required:!0},saveWildernessSettings:{type:Function,required:!0}},setup(e,{emit:n}){const s=e,l=n,u=()=>{l("closeOverlay")},i=S(s.settings.dust1),p=S(s.settings.dust2),c=S(s.settings.dust3),f=S(s.settings.gold1),h=S(s.settings.gold2),o=S(s.settings.gold3),a=S(s.settings.vigor),y=S(s.settings.lazyModo),m=[0,1,2,3,4,5,6],b=[0,120,150,175,210,240,270],w=[0,60,75,80,96,108,120],C=(d,x)=>{switch(x){case"Dust 1":i.value=d;break;case"Dust 2":p.value=d;break;case"Dust 3":c.value=d;break;case"Gold 1":f.value=d;break;case"Gold 2":h.value=d;break;case"Gold 3":o.value=d;break}},r=()=>{const d=parseInt(a.value,10);if(isNaN(d)){a.value=null;return}if(d<0){a.value=0;return}if(d>50){a.value=50;return}a.value=d},v=()=>{const d={dust1:i.value,dust2:p.value,dust3:c.value,gold1:f.value,gold2:h.value,gold3:o.value,vigor:a.value,lazyModo:y.value,wildernessOutput:g.value};l("saveWildernessSettings",d),u()},g=V(()=>{const d=b[i.value]+b[p.value]+b[c.value],x=w[f.value]+w[h.value]+w[o.value],_=a.value?parseFloat(a.value/100):0,A=y.value?20:24,O=Math.ceil(d*(1+_)*A),j=Math.ceil(x*(1+_)*A);return{dust:O,gold:j}});return(d,x)=>($(),I("div",vn,[t("div",pn,[t("button",{onClick:u,class:"absolute top-2 right-4 text-white"},gn),yn,t("div",_n,[D(W,{class:"select-list",options:m,selected:i.value,label:"Dust 1","onUpdate:selected":C},null,8,["selected"]),D(W,{class:"select-list",options:m,selected:p.value,label:"Dust 2","onUpdate:selected":C},null,8,["selected"]),D(W,{class:"select-list",options:m,selected:c.value,label:"Dust 3","onUpdate:selected":C},null,8,["selected"])]),bn,t("div",xn,[D(W,{class:"select-list",options:m,selected:f.value,label:"Gold 1","onUpdate:selected":C},null,8,["selected"]),D(W,{class:"select-list",options:m,selected:h.value,label:"Gold 2","onUpdate:selected":C},null,8,["selected"]),D(W,{class:"select-list",options:m,selected:o.value,label:"Gold 3","onUpdate:selected":C},null,8,["selected"])]),wn,t("div",$n,[le(t("input",{onInput:r,"onUpdate:modelValue":x[0]||(x[0]=_=>a.value=_),type:"text",placeholder:"Vigor",class:"input input-bordered input-info input-sm mx-10 lg:mx-5 gradient-blue text-center"},null,544),[[me,a.value]]),t("div",kn,[t("div",An,[t("label",In,[Cn,le(t("input",{"onUpdate:modelValue":x[1]||(x[1]=_=>y.value=_),type:"checkbox",checked:y.value,class:"checkbox checkbox-info"},null,8,Sn),[[Me,y.value]])])])])]),Mn,t("div",Nn,[t("div",On,[t("label",Rn,L(g.value.dust),1)]),t("div",Vn,[t("label",Ln,L(g.value.gold),1)])]),t("div",{class:"flex justify-center"},[t("button",{onClick:v,class:"btn btn-success"},"Save")])])]))}},Dn=ue(jn,[["__scopeId","data-v-9672159b"]]);function Pn(e){const n=H().shops.data;e in n?n[e].forEach(l=>{const{Material:u,Quantity:i}=l;Y().addShopItem(u,i)}):console.error(`Version ${e} not found in shops data.`)}const qn={class:"pb-6 z-50"},Un={class:"relative inline-block z-50"},Fn=["src"],En=["src"],Wn={__name:"ItemWarehouse",props:{material:{type:Object,required:!0}},setup(e,{emit:n}){const s=e,l=n,u=S(s.material.Quantity),i=V(()=>Oe(s.material)),p=()=>{l("update:quantity",u.value)};return(c,f)=>($(),I("div",qn,[t("div",Un,[t("img",{src:i.value.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute object-contain"},null,8,Fn),t("img",{src:i.value.itemImagePath,alt:"Material Image",class:"w-20 h-20 object-contain"},null,8,En),le(t("input",{"onUpdate:modelValue":f[0]||(f[0]=h=>u.value=h),onInput:p,type:"text",placeholder:"",class:"bg-slate-600 text-white absolute -bottom-3 left-3 w-14 input input-xs rounded-t-none text-center object-contain"},null,544),[[me,u.value]])])]))}},Qn={class:"list-overlay"},Bn={class:"custom-modal-big h-5/6 lg:h-2/3 flex flex-col items-center"},Gn=t("i",{class:"fas fa-times"},null,-1),Tn=[Gn],zn=t("p",{class:"text-white text-center font-bold text-lg"}," Warehouse ",-1),Hn={class:"grid grid-cols-2 xl:grid-cols-4 justify-center items-center pb-5 text-center"},Kn={class:"form-control items-center"},Yn={class:"label cursor-pointer space-x-2"},Zn=t("span",{class:"label-text text-error text-xs font-bold"},"Base Item",-1),Jn={class:"form-control items-center"},Xn={class:"label cursor-pointer space-x-2"},el=t("span",{class:"label-text text-info text-xs font-bold"},"Build Material",-1),tl={class:"form-control items-center"},sl={class:"label cursor-pointer space-x-2"},nl=t("span",{class:"label-text text-success text-xs font-bold"},"Insight Material",-1),ll={class:"form-control items-center"},al={class:"label cursor-pointer space-x-2"},ol=t("span",{class:"label-text text-warning text-xs font-bold"},"Resonate Material",-1),il={class:"custom-scrollbar overflow-y-scroll overflow-x-hidden flex-grow mb-5"},rl={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-8"},cl={class:"flex space-x-10"},ul={class:"flex space-x-3"},dl=t("button",{class:"btn btn-success btn-sm",onclick:"my_modal_shop1.showModal()"},"1.2 pt.1",-1),hl={id:"my_modal_shop1",class:"modal"},fl={class:"modal-box bg-slate-700"},vl=t("p",{class:"py-4 text-lg text-white text-center"},[z("Add materials from "),t("span",{class:"text-error"},"1.2 part 1"),z(" event shop?")],-1),pl=t("p",{class:"py-4 text-md text-white text-center"}," You should add once only.",-1),ml={class:"flex justify-center"},gl=t("button",{class:"btn btn-error btn-md",onclick:"my_modal_shop1.close()"},"No",-1),yl=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1),_l=t("button",{class:"btn btn-success btn-sm",onclick:"my_modal_shop2.showModal()"},"1.2 pt.2",-1),bl={id:"my_modal_shop2",class:"modal"},xl={class:"modal-box bg-slate-700"},wl=t("p",{class:"py-4 text-lg text-white text-center"},[z("Add materials from "),t("span",{class:"text-error"},"1.2 part 2"),z(" event shop?")],-1),$l=t("p",{class:"py-4 text-md text-white text-center"}," You should add once only.",-1),kl={class:"flex justify-center"},Al=t("button",{class:"btn btn-error btn-md",onclick:"my_modal_shop2.close()"},"No",-1),Il=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1),Cl=t("button",{class:"btn btn-error btn-sm",onclick:"my_modal_resetMat.showModal()"},"Reset",-1),Sl=t("p",{class:"py-4 text-lg text-white text-center"},[z("Reset quantity of "),t("span",{class:"text-error"},"selected"),z(" categories?")],-1),Ml=t("p",{class:"py-4 text-md text-white text-center"}," Click the buttons at the top to select.",-1),Nl=t("button",{class:"btn btn-error btn-md",onclick:"my_modal_resetMat.close()"},"No",-1),Ol=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1),Rl={__name:"PlannerWarehouse",emits:{closeOverlay:{type:Function,required:!0}},setup(e,{emit:n}){const s=n,l=S({"Base Item":!1,"Build Material":!1,"Insight Material":!1,"Resonate Material":!1});Ce(()=>{Y().data.length===0&&(console.log("Setting up warehouse"),H().items.data.forEach(o=>{o.IsReleased==!0&&(o.Category==="Build Material"||o.Category==="Insight Material"||o.Category==="Resonate Material"||o.Name==="Dust"||o.Name==="Sharpodonty")&&Y().addItem(o.Name,o.Category)})),Ve(Y().data)});const u=(o,a)=>{Y().updateItem(o,a)},i=o=>{l.value[o]=!l.value[o]},p=V(()=>Object.values(l.value).some(a=>a)?Y().data.filter(a=>l.value[a.Category]):Y().data),c=()=>{Object.keys(l.value).forEach(o=>{l.value[o]&&Y().resetCategory(o)}),s("closeOverlay")},f=o=>{Pn(o),s("closeOverlay")},h=()=>{s("closeOverlay")};return(o,a)=>($(),I("div",Qn,[t("div",Bn,[t("button",{onClick:h,class:"absolute top-2 right-4 text-white"},Tn),zn,t("div",null,[t("div",Hn,[t("div",Kn,[t("label",Yn,[Zn,t("input",{type:"checkbox",onChange:a[0]||(a[0]=y=>i("Base Item")),class:"checkbox checkbox-error"},null,32)])]),t("div",Jn,[t("label",Xn,[el,t("input",{type:"checkbox",onChange:a[1]||(a[1]=y=>i("Build Material")),class:"checkbox checkbox-info"},null,32)])]),t("div",tl,[t("label",sl,[nl,t("input",{type:"checkbox",onChange:a[2]||(a[2]=y=>i("Insight Material")),class:"checkbox checkbox-success"},null,32)])]),t("div",ll,[t("label",al,[ol,t("input",{type:"checkbox",onChange:a[3]||(a[3]=y=>i("Resonate Material")),class:"checkbox checkbox-warning"},null,32)])])])]),t("div",il,[t("div",rl,[($(!0),I(Q,null,te(p.value,y=>($(),T(Wn,{class:"",key:y.Material,material:y,"onUpdate:quantity":m=>u(y.Material,m)},null,8,["material","onUpdate:quantity"]))),128))])]),t("div",cl,[t("div",ul,[dl,t("dialog",hl,[t("div",fl,[vl,pl,t("div",ml,[t("button",{class:"btn btn-success btn-md mr-2",onClick:a[4]||(a[4]=y=>f("1.21"))},"Yes"),gl])]),yl]),_l,t("dialog",bl,[t("div",xl,[wl,$l,t("div",kl,[t("button",{class:"btn btn-success btn-md mr-2",onClick:a[5]||(a[5]=y=>f("1.22"))},"Yes"),Al])]),Il])]),Cl,t("dialog",{id:"my_modal_resetMat",class:"modal"},[t("div",{class:"modal-box bg-slate-700"},[Sl,Ml,t("div",{class:"flex justify-center"},[t("button",{class:"btn btn-success btn-md mr-2",onClick:c},"Yes"),Nl])]),Ol])])])]))}},Vl={class:"list-overlay"},Ll={class:"custom-modal-small h-auto space-y-5"},jl=t("i",{class:"fas fa-times"},null,-1),Dl=[jl],Pl={class:"form-control"},ql={class:"cursor-pointer label justify-center space-x-5"},Ul=t("span",{class:"label-text text-white text-md"},"Show unreleased",-1),Fl={__name:"PlannerSettings",props:{settings:{type:Object,required:!0}},emits:{closeOverlay:{type:Function,required:!0},saveSettings:{type:Function,required:!0}},setup(e,{emit:n}){const s=e,l=n,u=S(s.settings.showUnreleased),i=()=>{l("closeOverlay")},p=()=>{const c={showUnreleased:u.value};l("saveSettings",c),i()};return(c,f)=>($(),I("div",Vl,[t("div",Ll,[t("button",{onClick:i,class:"absolute top-2 right-4 text-white"},Dl),t("div",Pl,[t("label",ql,[Ul,le(t("input",{"onUpdate:modelValue":f[0]||(f[0]=h=>u.value=h),type:"checkbox",class:"checkbox checkbox-info"},null,512),[[Me,u.value]])])]),t("div",{class:"flex justify-center"},[t("button",{onClick:p,class:"btn btn-success"},"Save")])])]))}},El={class:"responsive-spacer"},Wl=t("h2",{class:"text-2xl text-white font-bold mb-4 lg:mb-6"},"Planner",-1),Ql=t("i",{class:"fa-solid fa-wand-magic-sparkles"},null,-1),Bl=t("i",{class:"fa-solid fa-tree"},null,-1),Gl=[Bl],Tl=t("i",{class:"fa-solid fa-box-archive"},null,-1),zl=[Tl],Hl=t("i",{class:"fa-solid fa-gear"},null,-1),Kl=[Hl],Yl=t("div",{class:"custom-line"},null,-1),Zl=t("div",{class:"custom-line"},null,-1),Jl={key:0,class:"overlay"},Xl={key:1,class:"overlay"},ea={key:2,class:"overlay"},ta={key:3,class:"overlay"},sa={key:4,class:"overlay"},aa={__name:"PlannerView",setup(e){const n=ze(),s=He(),l=H().arcanists.data,u=Ke(),i=S([]),p=V(()=>n.selectedArcanists.map(N=>N.info.Id));Se(()=>{i.value=l.filter(N=>!p.value.includes(N.Id)&&(u.settings.showUnreleased?!0:N.IsReleased)),i.value.sort((N,Z)=>{const se=Z.Rarity-N.Rarity;return se!==0?se:N.Name.localeCompare(Z.Name)})});const c=S([]),f=S([]),h=S(!1),o=S(!1),a=S(!1),y=S(!1),m=S(!1),b=S(null),w=S(null),C=S(null),r=S(null),v=S(null),g=()=>{h.value=!0},d=()=>{h.value=!1},x=()=>{o.value=!0},_=N=>{c.value=N,x()},A=()=>{o.value=!1},O=()=>{a.value=!0},j=()=>{a.value=!1},U=()=>{y.value=!0},F=()=>{y.value=!1},B=()=>{m.value=!0},G=()=>{m.value=!1},E=N=>{c.value={info:N,isVisible:!0,currentInsight:0,currentLevel:1,currentResonance:0,goalInsight:0,goalLevel:1,goalResonance:0},x()},M=N=>{n.selectedArcanists=N,A()},k=N=>{i.value=N},R=N=>{f.value=N},K=N=>{s.settings=N},ie=N=>{u.settings=N};return ne(b,d),ne(w,A),ne(C,j),ne(r,F),ne(v,G),(N,Z)=>($(),I("div",El,[Wl,D(fs,{selectedArcanists:J(n).selectedArcanists,onOpenEditOverlay:_},null,8,["selectedArcanists"]),t("div",{class:"flex justify-between items-center mb-2 mt-2"},[t("button",{onClick:g,class:"btn btn-ghost btn-sm custom-gradient-button"},[Ql,z(" Add Arcanist")]),t("div",{class:"flex space-x-2"},[t("div",{class:"tooltip","data-tip":"Wilderness Settings"},[t("button",{onClick:O,class:"btn btn-ghost btn-sm custom-gradient-button"},Gl)]),t("div",{class:"tooltip","data-tip":"Manage Warehouse"},[t("button",{onClick:U,class:"btn btn-ghost btn-sm custom-gradient-button"},zl)]),t("button",{onClick:B,class:"btn btn-ghost btn-sm custom-gradient-button"},Kl)])]),Yl,D(fn,{totalActivityAndDays:f.value,wildernessSettings:J(s).settings},null,8,["totalActivityAndDays","wildernessSettings"]),Zl,h.value?($(),I("div",Jl,[D(rt,{ref_key:"arcanistListRef",ref:b,arcanists:i.value,onCloseOverlay:d,onSelectArcanist:E},null,8,["arcanists"])])):X("",!0),o.value?($(),I("div",Xl,[D(ls,{ref_key:"plannerEditRef",ref:w,selectedArcanist:c.value,selectedArcanists:J(n).selectedArcanists,listArcanists:i.value,onCloseOverlay:A,onUpdateSelectedArcanists:M,onUpdateListArcanists:k},null,8,["selectedArcanist","selectedArcanists","listArcanists"])])):X("",!0),a.value?($(),I("div",ea,[D(Dn,{ref_key:"wildernessRef",ref:C,settings:J(s).settings,onCloseOverlay:j,onSaveWildernessSettings:K},null,8,["settings"])])):X("",!0),y.value?($(),I("div",ta,[D(Rl,{ref_key:"warehouseRef",ref:r,onCloseOverlay:F},null,512)])):X("",!0),m.value?($(),I("div",sa,[D(Fl,{ref_key:"settingsRef",ref:v,settings:J(u).settings,onCloseOverlay:G,onSaveSettings:ie},null,8,["settings"])])):X("",!0),D(Ks,{selectedArcanists:J(n).selectedArcanists,"onUpdate:totalActivityAndDays":R},null,8,["selectedArcanists"])]))}};export{aa as default};
