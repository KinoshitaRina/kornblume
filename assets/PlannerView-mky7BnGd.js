import{o as ne}from"./index-pes3mhdZ.js";import{h as de,o as $,c as I,a as t,n as ee,d as S,i as V,w as ae,v as me,F as W,r as te,e as j,t as L,u as Y,j as T,k as Ie,b as z,f as X,l as Be,_ as he,m as Ge,p as Te,q as ge,s as ye,x as Ce,y as J,z as Se}from"./index-D1TpaR9h.js";const ze=de("planner",{state:()=>({selectedArcanists:[]}),persist:!0}),He=de("wilderness",{state:()=>({settings:{dust1:6,dust2:6,dust3:6,gold1:6,gold2:6,gold3:6,vigor:0,lazyModo:!1,wildernessOutput:{dust:19440,gold:8640}}}),persist:!0}),Ke=de("plannerSettings",{state:()=>({settings:{showUnreleased:!1}}),persist:!0}),Ye=["data-tip"],Ze={class:"rounded-md overflow-hidden"},Je={class:"avatar"},Xe=["src","alt"],Me={__name:"ArcanistIcon",props:{arcanist:{type:Object,required:!0}},setup(e){const n=s=>`images/arcanists/icon/${s}.png`;return(s,a)=>($(),I("div",{class:"tooltip","data-tip":e.arcanist.Name},[t("div",Ze,[t("div",Je,[t("div",{class:ee(["w-10 rounded",{"bg-orange-300":e.arcanist.Rarity===6,"bg-yellow-100":e.arcanist.Rarity===5,"bg-purple-400":e.arcanist.Rarity===4,"bg-sky-200":e.arcanist.Rarity===3,"bg-green-200":e.arcanist.Rarity===2}])},[t("img",{src:n(e.arcanist.Id),alt:e.arcanist.Name},null,8,Xe)],2)])])],8,Ye))}},et={class:"list-overlay"},tt={class:"custom-modal-small h-2/3"},st={class:"relative mb-4"},nt=t("i",{class:"fas fa-times"},null,-1),at=[nt],lt={class:"p-2 overflow-y-auto h-5/6"},ot=["onClick"],it={class:"text-white ml-8"},rt={__name:"ArcanistList",props:{arcanists:{type:Array,required:!0}},emits:{closeOverlay:{type:Function,required:!0},selectArcanist:{type:Function,required:!0}},setup(e,{emit:n}){const s=e,a=n,u=f=>{a("selectArcanist",f),i()},i=()=>{a("closeOverlay")},m=S(""),c=V(()=>s.arcanists.filter(f=>f.Name.toLowerCase().includes(m.value.toLowerCase())));return(f,h)=>($(),I("div",et,[t("div",tt,[t("div",st,[ae(t("input",{"onUpdate:modelValue":h[0]||(h[0]=o=>m.value=o),type:"text",placeholder:"Search Arcanists",class:"bg-gray-800 text-white p-2 rounded-md w-11/12 focus:outline-none"},null,512),[[me,m.value]]),t("button",{onClick:i,class:"absolute top-2 right-0 text-white"},at)]),t("div",lt,[($(!0),I(W,null,te(c.value,o=>($(),I("div",{key:o.Id,onClick:l=>u(o),class:"p-4 flex items-center cursor-pointer hover:bg-gray-700 transition-colors"},[j(Me,{arcanist:o},null,8,["arcanist"]),t("span",it,L(o.Name),1)],8,ot))),128))])])]))}},_e=Y().items.data;function pe(e){return e>1e6?`${(e/1e6).toFixed(1)}m`:e>1e4?`${(e/1e3).toFixed(0)}k`:e.toString()}function Ne(e){const n=m=>{const c=_e.find(f=>f.Name==m);return c?c.Id:null},s=m=>{const c=_e.find(f=>f.Name==m);return c?c.Rarity:null},a=m=>{const c=n(m);return c?`images/items/icon/${c}.png`:null},u=m=>{const c=s(m);return c?`images/items/border/${c}.png`:null};return{material:e.Material,quantity:pe(e.Quantity),itemImagePath:a(e.Material),borderImagePath:u(e.Material)}}const ct=["data-tip"],ut={class:"relative inline-block"},dt=["src"],ht=["src"],ft={class:"absolute text-white bottom-4 right-3 bg-gray-700 rounded-tl px-1 py-px text-xs"},Oe={__name:"ItemIcon",props:{material:{type:Object,required:!0}},setup(e){const n=e,s=V(()=>Ne(n.material));return(a,u)=>($(),I("div",{class:"tooltip","data-tip":s.value.material},[t("div",ut,[t("img",{src:s.value.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute"},null,8,dt),t("img",{src:s.value.itemImagePath,alt:"Material Image",class:"w-20 h-20"},null,8,ht),t("div",ft,L(s.value.quantity),1)])],8,ct))}},vt={class:"custom-scrollbar pt-10 flex flex-wrap justify-center overflow-y-scroll overflow-x-hidden"},pt={__name:"ItemList",props:{materialList:{type:Array,required:!0}},setup(e){const n=e;return(s,a)=>($(),I("div",vt,[($(!0),I(W,null,te(n.materialList,u=>($(),T(Oe,{key:u,material:u},null,8,["material"]))),128))]))}},mt=Y().calculations.data,be=Y().items.data;function Re(e){e.sort((n,s)=>{const a=be.find(f=>f.Name===n.Material),u=be.find(f=>f.Name===s.Material),i=["Base Item","Resonate Material","Insight Material","Build Material"],m=i.indexOf(a.Category),c=i.indexOf(u.Category);return m!==c?m-c:u.Rarity!==a.Rarity?u.Rarity-a.Rarity:a.Name.localeCompare(u.Name)})}function Ve(e){const n={};return e.forEach(a=>{a&&(Array.isArray(a)?a.flat().forEach(({Material:i,Quantity:m})=>{n[i]?n[i]+=m:n[i]=m}):typeof a=="object"&&Object.entries(a).forEach(([u,i])=>{n[u]?n[u]+=i:n[u]=i}))}),Object.keys(n).map(a=>({Material:a,Quantity:n[a]}))}function gt(e){var a,u;Re(e);const n=((a=e.find(i=>i.Material==="Dust"))==null?void 0:a.Quantity)||0,s=((u=e.find(i=>i.Material==="Sharpodonty"))==null?void 0:u.Quantity)||0;return n===0&&s===0?e.filter(m=>m.Material!=="Dust"&&m.Material!=="Sharpodonty"):e}function Le(e){const n=o=>{let l={Dust:0,Sharpodonty:0};if(o.currentInsight==o.goalInsight){const{Dust:v,Sharpodonty:_}=u(o.currentLevel,o.goalLevel,o,o.currentInsight);return l.Dust+=v,l.Sharpodonty+=_,l}for(let v=o.currentInsight;v<=o.goalInsight;v++)if(v<o.goalInsight){const _=a(o,v);if(l.Dust+=_.Total.Dust,l.Sharpodonty+=_.Total.Sharpodonty,v==o.currentInsight){const{Dust:w,Sharpodonty:C}=u(1,o.currentLevel,o,v);l.Dust-=w,l.Sharpodonty-=C}}else{const{Dust:_,Sharpodonty:w}=u(1,o.goalLevel,o,v);l.Dust+=_,l.Sharpodonty+=w}return[{Material:"Dust",Quantity:l.Dust},{Material:"Sharpodonty",Quantity:l.Sharpodonty}]},s=(o,l,g)=>{const v={};if(o===l)return null;for(let w=Number(o+1);w<=l;w++){const C=g.find(r=>r.Id===w);C&&C.Material.forEach((r,p)=>{const y=C.Quantity[p];v[r]?v[r]+=y:v[r]=y})}return Object.keys(v).map(w=>({Material:w,Quantity:v[w]}))},a=(o,l)=>mt.find(v=>v.Rarity.includes(o.info.Rarity)&&v.Insight==l),u=(o,l,g,v)=>{let _={Dust:0,Sharpodonty:0};for(let w=Number(++o);w<=Number(l);w++){const C=a(g,v),r=w.toString(),p=C.Levels[r];p&&(_.Dust+=p.Dust,_.Sharpodonty+=p.Sharpodonty)}return _},i=s(e.currentInsight,e.goalInsight,e.info.Insight),m=s(e.currentResonance,e.goalResonance,e.info.Resonance),c=n(e),f=Ve([i,m,c]);return gt(f)}const yt={__name:"ArcanistCalculate",props:{arcanist:{type:Object,required:!0}},setup(e){const n=e,s=V(()=>{const a=n.arcanist;return Le(a)});return(a,u)=>($(),I("div",null,[j(pt,{class:"max-h-48",materialList:s.value},null,8,["materialList"])]))}},_t={class:"relative w-2/3 md:w-1/3 flex justify-center"},bt={key:0},xt=t("i",{class:"fa-regular fa-circle text-white"},null,-1),wt=[xt],$t={key:1},kt=["src","alt"],At=t("div",{class:"flex items-center justify-center"},[t("i",{class:"fa-solid fa-caret-up text-blue-500"})],-1),It={class:"grid grid-cols-4 gap-1 p-3 border border-blue-300 rounded-md shadow-lg options-box custom-gradient-gray-blue"},Ct=["onClick"],St={class:"flex items-center justify-center font-semibold rounded-full w-8 h-8 leading-none flex-col bg-blue-500 text-white"},Mt={key:0},Nt=t("i",{class:"fa-regular fa-circle text-white"},null,-1),Ot=[Nt],Rt={key:1},Vt=["src","alt"],F={__name:"SelectList",props:{label:{type:String,required:!0},options:{type:Array,required:!0},selected:{type:Number}},emits:["update:selected"],setup(e,{emit:n}){const s=e,a=n,u=S(!1),i=S(s.selected),m=S(null),c=()=>{u.value=!0},f=()=>{u.value=!1},h=l=>{i.value=l,a("update:selected",l,s.label),u.value=!1},o=l=>`images/items/common/insight${l}.png`;return ne(m,f),Ie(()=>{s.selected===void 0?(i.value=s.options[0],a("update:selected",s.options[0],s.label)):(i.value=s.selected,a("update:selected",s.selected,s.label))}),(l,g)=>($(),I("div",_t,[t("button",{onClick:c,class:"btn btn-sm btn-ghost gradient-blue w-1/2 m-2"},[e.label==="Current Insight"||e.label==="Goal Insight"?($(),I(W,{key:0},[i.value===0?($(),I("div",bt,wt)):($(),I("div",$t,[t("img",{class:"avatar w-6",src:o(i.value),alt:"Option "+i.value},null,8,kt)]))],64)):($(),I(W,{key:1},[z(L(i.value),1)],64))]),u.value?($(),I("div",{key:0,ref_key:"containerRef",ref:m,class:"absolute mt-14 w-48 lg:w-64 z-50"},[At,t("div",It,[($(!0),I(W,null,te(e.options,v=>($(),I("button",{key:v,class:"m-1",onClick:_=>h(v)},[t("div",St,[e.label==="Current Insight"||e.label==="Goal Insight"?($(),I(W,{key:0},[v===0?($(),I("div",Mt,Ot)):($(),I("div",Rt,[t("img",{src:o(v),alt:"Option "+v},null,8,Vt)]))],64)):($(),I(W,{key:1},[z(L(v),1)],64))])],8,Ct))),128))])],512)):X("",!0)]))}},Lt={class:"edit-overlay"},Dt={class:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-gray-800 to-blue-950 p-4 border-2 border-black rounded-md w-11/12 sm:max-w-2xl lg:h-auto"},jt={class:"flex items-center p-2 mb-3 shadow-border-b"},Pt={class:"flex items-center justify-center mr-2 space-x-3"},qt={class:"text-1xl md:text-2xl text-white font-bold"},Ut={class:"text-sm text-white",for:"raritySelect"},Qt={class:"ml-auto flex items-center space-x-3"},Et={class:"tooltip","data-tip":"Hidden / Show"},Ft=t("i",{class:"fas fa-times"},null,-1),Wt=[Ft],Bt=t("div",{class:"custom-line"},null,-1),Gt=t("div",{class:"custom-label text-blue-100"},"Current Level",-1),Tt={class:"mt-2 flex justify-center items-center leading-none"},zt=t("i",{class:"text-white text-center flex items-center justify-center font-extrabold text-2xl -translate-y-2"},"_",-1),Ht=t("div",{class:"custom-label text-blue-100"},"Goal Level",-1),Kt={class:"mt-2 flex justify-center items-center leading-none"},Yt=t("i",{class:"text-white text-center flex items-center justify-center font-extrabold text-2xl -translate-y-2"},"_",-1),Zt=t("div",{class:"custom-label text-blue-100"},"Resonance",-1),Jt={class:"mt-2 flex justify-center items-center leading-none"},Xt=t("i",{class:"text-white fa-solid fa-angles-right text-center"},null,-1),es={class:"flex justify-center space-x-4"},ts={key:0,class:"toast toast-middle toast-center"},ss=t("div",{class:"-translate-x-3 alert alert-info bg-red-300"},[t("span",null,"Current and Goal are the same!")],-1),ns=[ss],as={__name:"PlannerEdit",props:{selectedArcanist:{type:Object,required:!0},selectedArcanists:{type:Array,required:!0},listArcanists:{type:Array,required:!0}},emits:{closeOverlay:{type:Function,required:!0},updateSelectedArcanists:{type:Function,required:!0},updateListArcanists:{type:Function,required:!0}},setup(e,{emit:n}){const s=e,a=n,u=S(!1),i=S(0),m=Y().calculations.data,c=S(s.selectedArcanist.info),f=S(s.selectedArcanists),h=S(s.listArcanists),o=S(s.selectedArcanist.currentInsight),l=S(s.selectedArcanist.currentLevel),g=S(s.selectedArcanist.currentResonance),v=S(s.selectedArcanist.goalInsight),_=S(s.selectedArcanist.goalLevel),w=S(s.selectedArcanist.goalResonance),C=S(s.selectedArcanist.isVisible),r=V(()=>({info:c.value,isVisible:C.value,currentInsight:o.value,currentLevel:l.value,goalInsight:v.value,goalLevel:_.value,currentResonance:g.value,goalResonance:w.value})),p=V(()=>c.value.Rarity),y=V(()=>[0,...c.value.Insight.map(M=>M.Id)]),d=V(()=>y.value.filter(M=>M>=o.value)),x=V(()=>{const M=m.find(k=>k.Rarity.includes(c.value.Rarity)&&k.Insight==o.value);return M?[1,...Object.keys(M.Levels).map(Number).filter(k=>k%5===0)]:[]}),b=V(()=>{if(v.value===null)return[];const M=m.find(k=>k.Rarity.includes(c.value.Rarity)&&k.Insight==v.value);return M?v.value===o.value?[1,...Object.keys(M.Levels).map(Number).filter(k=>k%5===0)].filter(k=>k>=l.value):[1,...Object.keys(M.Levels).map(Number).filter(k=>k%5===0)]:[]}),A=V(()=>{if(o.value===null)return[];if(o.value===0)return g.value=0,[0];const M=Number(o.value);if(M===0)return g.value=null,null;const k=M*5;return Array.from({length:k},(R,H)=>Number(H+1))}),O=V(()=>{if(v.value===null)return[];if(v.value===0)return w.value=0,[0];const M=Number(v.value),k=Number(g.value);if(M===0)return w.value=null,null;const R=k||1,H=M*5;return Array.from({length:H-R+1},(re,N)=>Number(R+N))}),D=(M,k,R,H)=>Number(M)>Number(R)?!0:Number(M)<Number(R)?!1:Number(k)>Number(H),U=()=>{if(o.value===v.value&&l.value===_.value&&g.value===w.value)return u.value=!0,setTimeout(()=>{u.value=!1},1e3),!0;u.value=!1},Q=()=>{if(U())return;const M=f.value.findIndex(k=>Number(k.info.Id)===Number(r.value.info.Id));M!==-1?f.value[M]={...f.value[M],...r.value}:f.value.push(r.value),h.value=h.value.filter(k=>k.Id!==r.value.info.Id),a("updateSelectedArcanists",f.value),a("updateListArcanists",h.value),a("closeOverlay")},B=()=>{const M=f.value.findIndex(k=>Number(k.info.Id)===Number(r.value.info.Id));M!==-1&&f.value.splice(M,1),G()},G=()=>{a("closeOverlay")},E=(M,k)=>{switch(k){case"Current Insight":o.value=M;break;case"Current Level":l.value=M;break;case"Current Resonance":g.value=M;break;case"Goal Insight":v.value=M;break;case"Goal Level":_.value=M;break;case"Goal Resonance":w.value=M;break;case"Visible":C.value=M;break}};return Be([o,l,g,v,_,w],()=>{i.value+=1,l.value>x.value[x.value.length-1]&&(l.value=x.value[x.value.length-1]),_.value>b.value[b.value.length-1]&&(_.value=b.value[b.value.length-1]),Number(g.value)>Number(w.value)&&(w.value=g.value),D(o.value,l.value,v.value,_.value)&&(v.value=o.value,_.value=l.value)}),(M,k)=>($(),I("div",Lt,[t("div",Dt,[t("div",jt,[t("div",Pt,[j(Me,{class:"ml-2",arcanist:c.value},null,8,["arcanist"]),t("h2",qt,L(c.value.Name),1),t("label",Ut,[z(L(p.value)+" ",1),t("i",{class:ee(["fa-solid fa-star",{"text-orange-300":p.value===6,"text-yellow-100":p.value===5,"text-purple-400":p.value===4,"text-sky-200":p.value===3,"text-green-200":p.value===2}])},null,2)]),t("div",{class:"tooltip","data-tip":"Remove Arcanist"},[t("i",{onClick:B,class:"fas fa-trash-alt text-gray-500"})])]),t("div",Qt,[t("div",Et,[t("div",{onClick:k[0]||(k[0]=R=>C.value=!C.value),class:ee(["badge badge-ghost",C.value?"green-badge":"red-badge"])},[t("i",{class:ee(C.value?"fa-regular fa-eye":"fa-regular fa-eye-slash")},null,2)],2)]),t("button",{onClick:G,class:"text-white"},Wt)])]),Bt,Gt,t("div",Tt,[($(),T(F,{key:i.value,modelValue:o.value,"onUpdate:modelValue":k[1]||(k[1]=R=>o.value=R),selected:o.value,label:"Current Insight",options:y.value,"onUpdate:selected":E},null,8,["modelValue","selected","options"])),zt,($(),T(F,{key:i.value,modelValue:l.value,"onUpdate:modelValue":k[2]||(k[2]=R=>l.value=R),selected:l.value,label:"Current Level",options:x.value,"onUpdate:selected":E},null,8,["modelValue","selected","options"]))]),Ht,t("div",Kt,[($(),T(F,{key:i.value,modelValue:v.value,"onUpdate:modelValue":k[3]||(k[3]=R=>v.value=R),selected:v.value,label:"Goal Insight",options:d.value,"onUpdate:selected":E},null,8,["modelValue","selected","options"])),Yt,($(),T(F,{key:i.value,modelValue:_.value,"onUpdate:modelValue":k[4]||(k[4]=R=>_.value=R),selected:_.value,label:"Goal Level",options:b.value,"onUpdate:selected":E},null,8,["modelValue","selected","options"]))]),Zt,t("div",Jt,[($(),T(F,{key:i.value,modelValue:g.value,"onUpdate:modelValue":k[5]||(k[5]=R=>g.value=R),selected:g.value,label:"Current Resonance",options:A.value,"onUpdate:selected":E},null,8,["modelValue","selected","options"])),Xt,($(),T(F,{key:i.value,modelValue:w.value,"onUpdate:modelValue":k[6]||(k[6]=R=>w.value=R),selected:w.value,label:"Goal Resonance",options:O.value,"onUpdate:selected":E},null,8,["modelValue","selected","options"]))]),t("div",es,[t("button",{onClick:Q,class:"btn btn-success"},"Save"),u.value?($(),I("div",ts,ns)):X("",!0)]),j(yt,{arcanist:r.value},null,8,["arcanist"])])]))}},ls=["data-tip"],os={class:"rounded-md overflow-hidden"},is={class:"avatar"},rs=["src","alt"],cs={__name:"ArcanistIconToggle",props:{arcanist:{type:Object,required:!0},visible:{type:Boolean,required:!0}},setup(e){const n=s=>`images/arcanists/icon/${s}.png`;return(s,a)=>($(),I("div",{class:"tooltip","data-tip":e.arcanist.Name},[t("div",os,[t("div",is,[t("div",{class:ee(["w-12 rounded",{"filter-grayscale opacity-50":!e.visible,"bg-orange-300":e.arcanist.Rarity===6,"bg-yellow-100":e.arcanist.Rarity===5,"bg-purple-400":e.arcanist.Rarity===4,"bg-sky-200":e.arcanist.Rarity===3,"bg-green-200":e.arcanist.Rarity===2}])},[t("img",{src:n(e.arcanist.Id),alt:e.arcanist.Name},null,8,rs)],2)])])],8,ls))}},us=he(cs,[["__scopeId","data-v-11642327"]]),ds={class:"flex flex-row flex-wrap justify-center space-x-2"},hs=t("p",{class:"text-center text-slate-300 text-sm opacity-70"},"Left click to edit, right click to show / hide.",-1),fs={__name:"PlannerSelector",props:{selectedArcanists:{type:Array,required:!0}},emits:["open-edit-overlay"],setup(e,{emit:n}){const s=e,a=n,u=S(s.selectedArcanists),i=c=>{a("open-edit-overlay",c)},m=c=>{c.isVisible=!c.isVisible};return(c,f)=>($(),I("div",null,[t("div",ds,[($(!0),I(W,null,te(u.value,h=>($(),T(us,{key:h.Name,arcanist:h.info,visible:h.isVisible,onClick:o=>i(h),onContextmenu:Ge(o=>m(h),["prevent"])},null,8,["arcanist","visible","onClick","onContextmenu"]))),128))]),hs]))}},K=de("warehouse",{state:()=>({isActive:!1,data:[],loaded:!1}),actions:{toggle(){this.isActive=!this.isActive},setData(e){this.data=e},setLoaded(){this.loaded=!0},addItem(e,n){this.data.push({Material:e,Quantity:0,Category:n})},addShopItem(e,n){for(let s=0;s<this.data.length;s++)if(this.data[s].Material===e){this.data[s].Quantity+=Number(n);break}},updateItem(e,n){for(let s=0;s<this.data.length;s++)if(this.data[s].Material===e){this.data[s].Quantity=Number(n);break}},resetAll(){this.data=[]},resetCategory(e){for(let n=0;n<this.data.length;n++)this.data[n].Category===e&&(this.data[n].Quantity=0)}},persist:!0}),q=(e,n,s)=>e.matrix[Math.imul(n,e.width)+s],P=(e,n,s,a)=>{e.matrix[Math.imul(n,e.width)+s]=a},ve=e=>typeof e[Symbol.iterator]=="function"?e:Object.entries(e),xe=e=>e===!0?!0:e===!1?new Set:e instanceof Set?e:new Set(e),vs=e=>{const{direction:n,objective:s,integers:a,binaries:u}=e,i=n==="minimize"?-1:1,m=ve(e.constraints),c=ve(e.variables),f=Array.isArray(c)?c:Array.from(c),h=[],o=[];if(a!=null||u!=null){const d=xe(u),x=d===!0?!0:xe(a);for(let b=1;b<=f.length;b++){const[A]=f[b-1];d===!0||d.has(A)?(h.push(b),o.push(b)):(x===!0||x.has(A))&&o.push(b)}}const l=new Map;for(const[d,x]of m){const b=l.get(d)??{row:NaN,lower:-1/0,upper:1/0};b.lower=Math.max(b.lower,x.equal??x.min??-1/0),b.upper=Math.min(b.upper,x.equal??x.max??1/0),l.has(d)||l.set(d,b)}let g=1;for(const d of l.values())d.row=g,g+=(Number.isFinite(d.lower)?1:0)+(Number.isFinite(d.upper)?1:0);const v=f.length+1,_=g+h.length,w=v+_,C=new Float64Array(v*_),r=new Int32Array(w),p=new Int32Array(w),y={matrix:C,width:v,height:_,positionOfVariable:r,variableAtPosition:p};for(let d=0;d<w;d++)r[d]=d,p[d]=d;for(let d=1;d<v;d++)for(const[x,b]of ve(f[d-1][1])){x===s&&P(y,0,d,i*b);const A=l.get(x);A!=null&&(Number.isFinite(A.upper)?(P(y,A.row,d,b),Number.isFinite(A.lower)&&P(y,A.row+1,d,-b)):Number.isFinite(A.lower)&&P(y,A.row,d,-b))}for(const d of l.values())Number.isFinite(d.upper)?(P(y,d.row,0,d.upper),Number.isFinite(d.lower)&&P(y,d.row+1,0,-d.lower)):Number.isFinite(d.lower)&&P(y,d.row,0,-d.lower);for(let d=0;d<h.length;d++){const x=g+d;P(y,x,0,1),P(y,x,h[d],1)}return{tableau:y,sign:i,variables:f,integers:o}},De=(e,n)=>{const s=Math.round(1/n);return Math.round((e+Number.EPSILON)*s)/s},je=(e,n,s)=>{const a=q(e,n,s),u=e.variableAtPosition[e.width+n],i=e.variableAtPosition[s];e.variableAtPosition[e.width+n]=i,e.variableAtPosition[s]=u,e.positionOfVariable[u]=s,e.positionOfVariable[i]=e.width+n;const m=[];for(let c=0;c<e.width;c++){const f=q(e,n,c);Math.abs(f)>1e-16?(P(e,n,c,f/a),m.push(c)):P(e,n,c,0)}P(e,n,s,1/a);for(let c=0;c<e.height;c++){if(c===n)continue;const f=q(e,c,s);if(Math.abs(f)>1e-16){for(let h=0;h<m.length;h++){const o=m[h];P(e,c,o,q(e,c,o)-f*q(e,n,o))}P(e,c,s,-f/a)}}},Pe=(e,n,s,a)=>{e.push([n.variableAtPosition[n.width+s],n.variableAtPosition[a]]);for(let u=6;u<=Math.trunc(e.length/2);u++){let i=!0;for(let m=0;m<u;m++){const c=e.length-1-m,[f,h]=e[c],[o,l]=e[c-u];if(f!==o||h!==l){i=!1;break}}if(i)return!0}return!1},ps=(e,n)=>{const s=[],{precision:a,maxPivots:u,checkCycles:i}=n;for(let m=0;m<u;m++){let c=0,f=a;for(let l=1;l<e.width;l++){const g=q(e,0,l);g>f&&(f=g,c=l)}if(c===0)return["optimal",De(q(e,0,0),a)];let h=0,o=1/0;for(let l=1;l<e.height;l++){const g=q(e,l,c);if(g<=a)continue;const _=q(e,l,0)/g;if(_<o&&(h=l,o=_,_<=a))break}if(h===0)return["unbounded",c];if(i&&Pe(s,e,h,c))return["cycled",NaN];je(e,h,c)}return["cycled",NaN]},qe=(e,n)=>{const s=[],{precision:a,maxPivots:u,checkCycles:i}=n;for(let m=0;m<u;m++){let c=0,f=-a;for(let l=1;l<e.height;l++){const g=q(e,l,0);g<f&&(f=g,c=l)}if(c===0)return ps(e,n);let h=0,o=-1/0;for(let l=1;l<e.width;l++){const g=q(e,c,l);if(g<-a){const v=-q(e,0,l)/g;v>o&&(o=v,h=l)}}if(h===0)return["infeasible",NaN];if(i&&Pe(s,e,c,h))return["cycled",NaN];je(e,c,h)}return["cycled",NaN]};var ms=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ue={exports:{}};(function(e,n){(function(){var s,a,u,i,m,c,f,h,o,l,g,v,_,w,C;u=Math.floor,l=Math.min,a=function(r,p){return r<p?-1:r>p?1:0},o=function(r,p,y,d,x){var b;if(y==null&&(y=0),x==null&&(x=a),y<0)throw new Error("lo must be non-negative");for(d==null&&(d=r.length);y<d;)b=u((y+d)/2),x(p,r[b])<0?d=b:y=b+1;return[].splice.apply(r,[y,y-y].concat(p)),p},c=function(r,p,y){return y==null&&(y=a),r.push(p),w(r,0,r.length-1,y)},m=function(r,p){var y,d;return p==null&&(p=a),y=r.pop(),r.length?(d=r[0],r[0]=y,C(r,0,p)):d=y,d},h=function(r,p,y){var d;return y==null&&(y=a),d=r[0],r[0]=p,C(r,0,y),d},f=function(r,p,y){var d;return y==null&&(y=a),r.length&&y(r[0],p)<0&&(d=[r[0],p],p=d[0],r[0]=d[1],C(r,0,y)),p},i=function(r,p){var y,d,x,b,A,O;for(p==null&&(p=a),b=(function(){O=[];for(var D=0,U=u(r.length/2);0<=U?D<U:D>U;0<=U?D++:D--)O.push(D);return O}).apply(this).reverse(),A=[],d=0,x=b.length;d<x;d++)y=b[d],A.push(C(r,y,p));return A},_=function(r,p,y){var d;if(y==null&&(y=a),d=r.indexOf(p),d!==-1)return w(r,0,d,y),C(r,d,y)},g=function(r,p,y){var d,x,b,A,O;if(y==null&&(y=a),x=r.slice(0,p),!x.length)return x;for(i(x,y),O=r.slice(p),b=0,A=O.length;b<A;b++)d=O[b],f(x,d,y);return x.sort(y).reverse()},v=function(r,p,y){var d,x,b,A,O,D,U,Q,B;if(y==null&&(y=a),p*10<=r.length){if(b=r.slice(0,p).sort(y),!b.length)return b;for(x=b[b.length-1],U=r.slice(p),A=0,D=U.length;A<D;A++)d=U[A],y(d,x)<0&&(o(b,d,0,null,y),b.pop(),x=b[b.length-1]);return b}for(i(r,y),B=[],O=0,Q=l(p,r.length);0<=Q?O<Q:O>Q;0<=Q?++O:--O)B.push(m(r,y));return B},w=function(r,p,y,d){var x,b,A;for(d==null&&(d=a),x=r[y];y>p;){if(A=y-1>>1,b=r[A],d(x,b)<0){r[y]=b,y=A;continue}break}return r[y]=x},C=function(r,p,y){var d,x,b,A,O;for(y==null&&(y=a),x=r.length,O=p,b=r[p],d=2*p+1;d<x;)A=d+1,A<x&&!(y(r[d],r[A])<0)&&(d=A),r[p]=r[d],p=d,d=2*p+1;return r[p]=b,w(r,O,p,y)},s=function(){r.push=c,r.pop=m,r.replace=h,r.pushpop=f,r.heapify=i,r.updateItem=_,r.nlargest=g,r.nsmallest=v;function r(p){this.cmp=p??a,this.nodes=[]}return r.prototype.push=function(p){return c(this.nodes,p,this.cmp)},r.prototype.pop=function(){return m(this.nodes,this.cmp)},r.prototype.peek=function(){return this.nodes[0]},r.prototype.contains=function(p){return this.nodes.indexOf(p)!==-1},r.prototype.replace=function(p){return h(this.nodes,p,this.cmp)},r.prototype.pushpop=function(p){return f(this.nodes,p,this.cmp)},r.prototype.heapify=function(){return i(this.nodes,this.cmp)},r.prototype.updateItem=function(p){return _(this.nodes,p,this.cmp)},r.prototype.clear=function(){return this.nodes=[]},r.prototype.empty=function(){return this.nodes.length===0},r.prototype.size=function(){return this.nodes.length},r.prototype.clone=function(){var p;return p=new r,p.nodes=this.nodes.slice(0),p},r.prototype.toArray=function(){return this.nodes.slice(0)},r.prototype.insert=r.prototype.push,r.prototype.top=r.prototype.peek,r.prototype.front=r.prototype.peek,r.prototype.has=r.prototype.contains,r.prototype.copy=r.prototype.clone,r}(),function(r,p){return e.exports=p()}(this,function(){return s})}).call(ms)})(Ue);var ys=Ue.exports,_s=ys;const bs=gs(_s),we=(e,n)=>({matrix:new Float64Array(e),positionOfVariable:new Int32Array(n),variableAtPosition:new Int32Array(n)}),xs=(e,{matrix:n,positionOfVariable:s,variableAtPosition:a},u)=>{const{width:i,height:m}=e;n.set(e.matrix);for(let f=0;f<u.length;f++){const[h,o,l]=u[f],g=(m+f)*i,v=e.positionOfVariable[o];if(v<i)n[g]=h*l,n.fill(0,g+1,g+i),n[g+v]=h;else{const _=(v-i)*i;n[g]=h*(l-n[_]);for(let w=1;w<i;w++)n[g+w]=-h*n[_+w]}}s.set(e.positionOfVariable),a.set(e.variableAtPosition);const c=i+m+u.length;for(let f=i+m;f<c;f++)s[f]=f,a[f]=f;return{matrix:n.subarray(0,e.matrix.length+i*u.length),width:i,height:m+u.length,positionOfVariable:s.subarray(0,c),variableAtPosition:a.subarray(0,c)}},$e=(e,n)=>{let s=0,a=0,u=0;for(let i=0;i<n.length;i++){const m=n[i],c=e.positionOfVariable[m]-e.width;if(c<0)continue;const f=q(e,c,0),h=Math.abs(f-Math.round(f));h>s&&(s=h,a=m,u=f)}return[a,u,s]},ws=(e,n,s)=>{const{tableau:a,sign:u,integers:i}=e,{precision:m,maxIterations:c,tolerance:f,timeout:h}=s,[o,l,g]=$e(a,i);if(g<=m)return[e,"optimal",n];const v=new bs((B,G)=>B[0]-G[0]);v.push([n,[[-1,o,Math.ceil(l)]]]),v.push([n,[[1,o,Math.floor(l)]]]);const _=i.length*2,w=a.matrix.length+_*a.width,C=a.positionOfVariable.length+_;let r=we(w,C),p=we(w,C);const y=n*(1-u*f),d=h+Date.now();let x=Date.now()>=d,b=!1,A=1/0,O=a,D=0;for(;D<c&&!v.empty()&&A>=y&&!x;){const[B,G]=v.pop();if(B>A)break;const E=xs(a,r,G),[M,k]=qe(E,s);if(M==="optimal"&&k<A){const[R,H,re]=$e(E,i);if(re<=m){b=!0,A=k,O=E;const N=p;p=r,r=N}else{const N=[],Z=[];for(let se=0;se<G.length;se++){const ie=G[se],[Fe,We]=ie;We===R?Fe<0?Z.push(ie):N.push(ie):(N.push(ie),Z.push(ie))}Z.push([1,R,Math.floor(H)]),N.push([-1,R,Math.ceil(H)]),v.push([k,N]),v.push([k,Z])}}x=Date.now()>=d,D++}const Q=(x||D>=c)&&!v.empty()&&A>=y?"timedout":b?"optimal":"infeasible";return[{...e,tableau:O},Q,b?A:NaN]},ke=({tableau:e,sign:n,variables:s},a,u,{precision:i,includeZeroVariables:m})=>{if(a==="optimal"||a==="timedout"&&!Number.isNaN(u)){const c=[];for(let f=0;f<s.length;f++){const[h]=s[f],o=e.positionOfVariable[f+1]-e.width,l=o>=0?q(e,o,0):0;l>i?c.push([h,De(l,i)]):m&&c.push([h,0])}return{status:a,result:-n*u,variables:c}}else if(a==="unbounded"){const c=e.variableAtPosition[u]-1;return{status:"unbounded",result:n*(1/0),variables:0<=c&&c<s.length?[[s[c][0],1/0]]:[]}}else return{status:a,result:NaN,variables:[]}},$s={precision:1e-8,checkCycles:!1,maxPivots:8192,tolerance:0,timeout:1/0,maxIterations:32768,includeZeroVariables:!1},ks=(e,n)=>{const s=vs(e),a={...$s,...n},[u,i]=qe(s.tableau,a);if(s.integers.length===0||u!=="optimal")return ke(s,u,i,a);{const[m,c,f]=ws(s,i,a);return ke(m,c,f,a)}},Qe=Y().items.data,As=Y().formulas.data,le=Y().drops.data,ue=K().data;function Is(e){const s=Qe.find(u=>u.Name===e.Material).Rarity,a=e.Quantity;return s===3?a*40:s===4?a*100:s===5?a*250:s===6?a*1500:0}function Cs(e){return e==="Oneiric Shop"?"images/items/common/1.png":"images/items/common/0.png"}function Ee(e,n,s,a,u){return{stage:e,runs:isNaN(n)?0:n,activity:isNaN(s)?0:s,days:isNaN(a)?0:a,materials:u,activityImagePath:Cs(e)}}function Ae(e,n){let s=n.find(a=>a.stage===e);return s||(s=Ee(e,null,e==="Oneiric Shop"?0:null,null,[]),n.push(s)),s}function ce(e){return e.sort((n,s)=>{const a=Object.entries(le).find(([i])=>i===n.stage),u=Object.entries(le).find(([i])=>i===s.stage);return a&&u?a.id-u.id:a?-1:u?1:0})}function Ss(e){return e.forEach(n=>{const s=ue.find(a=>a.Category==="Resonate Material"&&a.Material===n.Material);s&&(n.Quantity-=s.Quantity)}),e}function Ms(e){const n=[];function s(h){const o=Ae("Oneiric Shop",n),l=Qe.find(g=>g.Name===h.Material);if(l.Category==="Resonate Material")if(l.Rarity===6){o.activity+=1500;let g;ue.find(_=>_.Material==="Crystal Casket")&&(g=ue.find(_=>_.Material==="Crystal Casket").Quantity);const v=o.materials.find(_=>_.Material==="Crystal Casket");if(v)v.Quantity+=h.Quantity-(g||0);else{const _={Material:"Crystal Casket",Quantity:h.Quantity-(g||0)};o.materials.push(_)}}else o.activity+=Is(h),o.materials.push(h)}Ss(e),e.forEach(h=>{if(h.Quantity<=0)return;h.Quantity=parseFloat(h.Quantity),Object.entries(le).find(([l,g])=>l===h.Material)||s(h)}),Ns(e).variables.forEach(h=>{const o=le[h[0]];if(o){const l=Math.ceil(h[1]),g=Math.ceil(l*o.cost),v=(g/240).toFixed(1);let _=Object.entries(o.drops).map(([C,r])=>{let p=r/o.count*l;return p=p%1>=.99?Math.ceil(p):Math.floor(p),{Material:C,Quantity:p}});_=_.filter(C=>C.Quantity>0);const w=Ee(h[0],l,g,v,_);n.push(w)}else{const v={Material:h[0].split("-")[1].trim(),Quantity:h[1]};Ae("Wilderness Wishing Spring",n).materials.push(v)}});const u=n.filter(h=>["The Poussiere VI","Mintage Aesthetics VI","Oneiric Shop"].includes(h.stage)&&h.materials.length>0),i=n.filter(h=>(h.stage.endsWith("II")||h.stage.endsWith("IV")||h.stage.endsWith("VI"))&&!u.some(o=>o.stage===h.stage)&&h.materials.length>0),m=n.filter(h=>!["Wilderness Wishing Spring",...u.map(o=>o.stage),...i.map(o=>o.stage)].includes(h.stage)&&h.materials.length>0),c=n.filter(h=>["Wilderness Wishing Spring"].includes(h.stage)&&h.materials.length>0);return[{id:0,cards:ce(u)},{id:1,cards:ce(i)},{id:2,cards:ce(m)},{id:3,cards:ce(c)}]}function Ns(e){const n={},s={},a=["Sinuous Howl","Interlaced Shudder","Hypocritical Murmur","Hoarse Echo","Sonorous Knell","Brief Cacophony","Moment of Dissonance"];e.forEach(({Material:l,Quantity:g})=>{a.includes(l)||(s[l]={min:g})});const u={},i=[];for(let{Name:l,Material:g,Quantity:v}of As){if(n[l]={min:0},g.length===0)continue;const _={};g.forEach((C,r)=>{_[C]=-v[r]});const w=`Wilderness Wishing Sprin - ${l}`;u[w]={[l]:1,..._,cost:0},i.includes(w)||i.push(w)}const m={};for(let l in le){const g=le[l],{count:v,cost:_,drops:w}=g;m[l]={cost:_};for(let C in w)m[l][C]=w[C]/v}const c={...n,...s};ue.forEach(l=>{const{Material:g,Quantity:v}=l,_=parseInt(v);_>0&&(c[g]?c[g]={min:c[g].min-_}:c[g]={min:-_})});const f=Object.assign({},u,m);return ks({objective:"cost",direction:"minimize",constraints:c,variables:f,integers:i},{precision:.01,tolerance:.1})}function Os(e){let n=0,s=0;return e.forEach(a=>{a.cards.forEach(u=>{u.days!==null&&(n+=u.activity,s+=parseFloat(u.days))})}),[n,s.toFixed(0)]}const Rs=e=>(ge("data-v-fb8b64c2"),e=e(),ye(),e),Vs={class:"bg-gray-700/40 shadow rounded flex flex-col items-center justify-between relative"},Ls={class:"stage text-white p-2"},Ds={class:"tooltip w-full","data-tip":"Number of runs | Activities | Days"},js={class:"calculations flex justify-center items-center bg-gradient-to-r from-blue-800/70 to-blue-900/90 text-white p-2 rounded-md"},Ps={class:"border-blue-700/90 border-r pr-3"},qs={key:0},Us=Rs(()=>t("i",{class:"fa-solid fa-xmark text-xs mr-0.5"},null,-1)),Qs={key:1},Es={class:"pl-2"},Fs=["src"],Ws={class:"border-blue-700/90 border-l pl-3"},Bs={__name:"Card",props:{card:{type:Object,required:!0}},setup(e){const n=e,s=V(()=>n.card.materials.length<4);return(a,u)=>($(),I("div",Vs,[t("div",Ls,[t("p",null,L(e.card.stage),1)]),t("div",Ds,[t("div",js,[t("p",Ps,[e.card.runs>0?($(),I("span",qs,[Us,z(L(e.card.runs),1)])):($(),I("span",Qs,L(e.card.runs),1))]),t("p",Es,L(e.card.activity==null?"Crafted from available Materials":e.card.activity),1),ae(t("img",{src:e.card.activityImagePath,alt:"Activity Image",class:"inline-block w-8 h-8"},null,8,Fs),[[Te,e.card.activity]]),t("p",Ws,L(e.card.days)+" "+L(e.card.days===null?"":e.card.days>1?"days":"day"),1)])]),t("div",{class:ee([{"custom-scrollbar":s.value},"flex overflow-y-hidden overflow-x-auto scrollbar m-auto"])},[($(!0),I(W,null,te(e.card.materials,(i,m)=>($(),I("div",{key:m,class:"flex-shrink-0"},[j(Oe,{class:"",material:i},null,8,["material"])]))),128))],2)]))}},Gs=he(Bs,[["__scopeId","data-v-fb8b64c2"]]),Ts={class:"w-full mb-4 flex flex-col"},zs={__name:"PlannerLayer",props:{layer:{type:Object,required:!0}},setup(e){const n=e,s=V(()=>n.layer.cards&&n.layer.cards.length>0),a=V(()=>{switch(n.layer.id){case 0:return"yellow-badge";case 1:return"indigo-badge";case 2:return"purple-badge";case 3:return"green-badge";default:return"red-badge"}}),u=V(()=>{switch(n.layer.id){case 0:return"Resources";case 1:return"Insight";case 2:return"Hard Stages";case 3:return"Crafting";default:return"Undefined"}}),i=V(()=>{switch(n.layer.id){case 2:return"mb-2 gap-5 grid grid-cols-1 lg:grid-cols-2";case 3:return"mb-2 gap-5 grid grid-cols-1";default:return"mb-2 gap-5 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4"}});return(m,c)=>($(),I("div",Ts,[s.value?($(),I("div",{key:0,class:ee(["badge badge-lg badge-ghost mt-2 mb-2 w-32",a.value])},L(u.value),3)):X("",!0),t("div",{class:ee(i.value)},[($(!0),I(W,null,te(e.layer.cards,(f,h)=>($(),T(Gs,{key:h,card:f},null,8,["card"]))),128))],2)]))}},Hs={class:"flex flex-wrap"},Ks={__name:"PlannerResult",props:{selectedArcanists:{type:Array,required:!0}},emits:["update:totalActivityAndDays"],setup(e,{emit:n}){const s=e,a=n,u=S([]),i=S([]);return Ce(()=>{const m=s.selectedArcanists.map(h=>h.isVisible?Le(h):[]),c=Ve(m);u.value=c;const f=Ms(c);a("update:totalActivityAndDays",Os(f)),i.value=f}),(m,c)=>($(),I("div",Hs,[($(!0),I(W,null,te(i.value,(f,h)=>($(),T(zs,{key:h,layer:f},null,8,["layer"]))),128))]))}},Ys="/Kornblume/images/items/common/0.png",Zs="/Kornblume/images/items/icon/55.png",Js="/Kornblume/images/items/icon/54.png",fe=e=>(ge("data-v-dbe2ab05"),e=e(),ye(),e),Xs={class:"flex custom-gradient-gray-blue-light px-2 py-2 md:px-4 lg:px-6 rounded-md items-center justify-center"},en=fe(()=>t("i",{class:"fa-solid fa-calculator text-white mr-3"},null,-1)),tn={class:"tooltip flex items-center","data-tip":"Estimated total Activities and Days"},sn={class:"text"},nn=fe(()=>t("div",{class:"avatar"},[t("div",{class:"w-8 rounded"},[t("img",{src:Ys,alt:"avatar"})])],-1)),an={class:"text pr-3"},ln={class:"tooltip","data-tip":"Wilderness Production"},on={class:"text"},rn=fe(()=>t("div",{class:"avatar"},[t("div",{class:"w-8 rounded"},[t("img",{src:Zs,alt:"avatar"})])],-1)),cn={class:"tooltip","data-tip":"Wilderness Production"},un={class:"text"},dn=fe(()=>t("div",{class:"avatar"},[t("div",{class:"w-8 rounded"},[t("img",{src:Js,alt:"avatar"})])],-1)),hn={__name:"PlannerTotal",props:{totalActivityAndDays:{type:Array,required:!0},wildernessSettings:{type:Object,required:!0}},setup(e){return(n,s)=>($(),I("div",Xs,[en,t("div",tn,[t("div",sn,L(e.totalActivityAndDays[0]),1),nn,t("div",an,L(e.totalActivityAndDays[1])+" "+L(e.totalActivityAndDays[1]>1?"days":"day"),1)]),t("div",ln,[t("div",on,L(J(pe)(e.wildernessSettings.wildernessOutput.dust*e.totalActivityAndDays[1])),1)]),rn,t("div",cn,[t("div",un,L(J(pe)(e.wildernessSettings.wildernessOutput.gold*e.totalActivityAndDays[1])),1)]),dn]))}},fn=he(hn,[["__scopeId","data-v-dbe2ab05"]]),oe=e=>(ge("data-v-9672159b"),e=e(),ye(),e),vn={class:"list-overlay"},pn={class:"custom-modal-small h-auto"},mn=oe(()=>t("i",{class:"fas fa-times"},null,-1)),gn=[mn],yn=oe(()=>t("div",{class:"custom-label text-yellow-100"},"Dust Bell Towers",-1)),_n={class:"grid grid-cols-3"},bn=oe(()=>t("div",{class:"custom-label text-yellow-100"},"Gold Bell Towers",-1)),xn={class:"grid grid-cols-3"},wn=oe(()=>t("div",{class:"custom-label text-yellow-100"},"Vigor (%)",-1)),$n={class:"grid grid-cols-2 p-2 items-center"},kn={class:"tooltip","data-tip":"Collect once a day"},An={class:"form-control"},In={class:"cursor-pointer label justify-center"},Cn=oe(()=>t("span",{class:"label-text text-yellow-100 mr-3"},"Lazy Modo",-1)),Sn=["checked"],Mn=oe(()=>t("div",{class:"custom-label text-yellow-100"},"Output",-1)),Nn={class:"grid grid-cols-2 p-2"},On={class:"tooltip","data-tip":"Dust"},Rn={class:"flex items-center justify-center gradient-blue text-center rounded-xl mx-5 lg:mx-2 h-8"},Vn={class:"tooltip","data-tip":"Sharpodonty"},Ln={class:"flex items-center justify-center gradient-blue text-center rounded-xl mx-5 lg:mx-2 h-8"},Dn={__name:"PlannerWilderness",props:{settings:{type:Object,required:!0}},emits:{closeOverlay:{type:Function,required:!0},saveWildernessSettings:{type:Function,required:!0}},setup(e,{emit:n}){const s=e,a=n,u=()=>{a("closeOverlay")},i=S(s.settings.dust1),m=S(s.settings.dust2),c=S(s.settings.dust3),f=S(s.settings.gold1),h=S(s.settings.gold2),o=S(s.settings.gold3),l=S(s.settings.vigor),g=S(s.settings.lazyModo),v=[0,1,2,3,4,5,6],_=[0,120,150,175,210,240,270],w=[0,60,75,80,96,108,120],C=(d,x)=>{switch(x){case"Dust 1":i.value=d;break;case"Dust 2":m.value=d;break;case"Dust 3":c.value=d;break;case"Gold 1":f.value=d;break;case"Gold 2":h.value=d;break;case"Gold 3":o.value=d;break}},r=()=>{const d=parseInt(l.value,10);if(isNaN(d)){l.value=null;return}if(d<0){l.value=0;return}if(d>50){l.value=50;return}l.value=d},p=()=>{const d={dust1:i.value,dust2:m.value,dust3:c.value,gold1:f.value,gold2:h.value,gold3:o.value,vigor:l.value,lazyModo:g.value,wildernessOutput:y.value};a("saveWildernessSettings",d),u()},y=V(()=>{const d=_[i.value]+_[m.value]+_[c.value],x=w[f.value]+w[h.value]+w[o.value],b=l.value?parseFloat(l.value/100):0,A=g.value?20:24,O=Math.ceil(d*(1+b)*A),D=Math.ceil(x*(1+b)*A);return{dust:O,gold:D}});return(d,x)=>($(),I("div",vn,[t("div",pn,[t("button",{onClick:u,class:"absolute top-2 right-4 text-white"},gn),yn,t("div",_n,[j(F,{class:"select-list",options:v,selected:i.value,label:"Dust 1","onUpdate:selected":C},null,8,["selected"]),j(F,{class:"select-list",options:v,selected:m.value,label:"Dust 2","onUpdate:selected":C},null,8,["selected"]),j(F,{class:"select-list",options:v,selected:c.value,label:"Dust 3","onUpdate:selected":C},null,8,["selected"])]),bn,t("div",xn,[j(F,{class:"select-list",options:v,selected:f.value,label:"Gold 1","onUpdate:selected":C},null,8,["selected"]),j(F,{class:"select-list",options:v,selected:h.value,label:"Gold 2","onUpdate:selected":C},null,8,["selected"]),j(F,{class:"select-list",options:v,selected:o.value,label:"Gold 3","onUpdate:selected":C},null,8,["selected"])]),wn,t("div",$n,[ae(t("input",{onInput:r,"onUpdate:modelValue":x[0]||(x[0]=b=>l.value=b),type:"text",placeholder:"Vigor",class:"input input-bordered input-info input-sm mx-10 lg:mx-5 gradient-blue text-center"},null,544),[[me,l.value]]),t("div",kn,[t("div",An,[t("label",In,[Cn,ae(t("input",{"onUpdate:modelValue":x[1]||(x[1]=b=>g.value=b),type:"checkbox",checked:g.value,class:"checkbox checkbox-info"},null,8,Sn),[[Se,g.value]])])])])]),Mn,t("div",Nn,[t("div",On,[t("label",Rn,L(y.value.dust),1)]),t("div",Vn,[t("label",Ln,L(y.value.gold),1)])]),t("div",{class:"flex justify-center"},[t("button",{onClick:p,class:"btn btn-success"},"Save")])])]))}},jn=he(Dn,[["__scopeId","data-v-9672159b"]]);function Pn(e){const n=Y().shops.data;e in n?n[e].forEach(a=>{const{Material:u,Quantity:i}=a;K().addShopItem(u,i)}):console.error(`Version ${e} not found in shops data.`)}const qn={class:"pb-6"},Un={class:"relative inline-block"},Qn=["src"],En=["src"],Fn={__name:"ItemWarehouse",props:{material:{type:Object,required:!0}},setup(e,{emit:n}){const s=e,a=n,u=S(s.material.Quantity),i=V(()=>Ne(s.material)),m=()=>{a("update:quantity",Number(u.value))};return(c,f)=>($(),I("div",qn,[t("div",Un,[t("img",{src:i.value.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute"},null,8,Qn),t("img",{src:i.value.itemImagePath,alt:"Material Image",class:"w-20 h-20"},null,8,En),ae(t("input",{"onUpdate:modelValue":f[0]||(f[0]=h=>u.value=h),onInput:m,type:"text",placeholder:"",class:"bg-slate-600 text-white absolute -bottom-3 left-3 w-14 input input-xs rounded-t-none text-center"},null,544),[[me,u.value]])])]))}},Wn={class:"list-overlay"},Bn={class:"custom-modal-big h-5/6 lg:h-2/3 flex flex-col items-center"},Gn=t("i",{class:"fas fa-times"},null,-1),Tn=[Gn],zn=t("p",{class:"text-white text-center font-bold text-lg"}," Warehouse ",-1),Hn={class:"grid grid-cols-2 xl:grid-cols-4 justify-center items-center pb-5 text-center"},Kn={class:"form-control items-center"},Yn={class:"label cursor-pointer space-x-2"},Zn=t("span",{class:"label-text text-error text-xs font-bold"},"Base Item",-1),Jn={class:"form-control items-center"},Xn={class:"label cursor-pointer space-x-2"},ea=t("span",{class:"label-text text-info text-xs font-bold"},"Build Material",-1),ta={class:"form-control items-center"},sa={class:"label cursor-pointer space-x-2"},na=t("span",{class:"label-text text-success text-xs font-bold"},"Insight Material",-1),aa={class:"form-control items-center"},la={class:"label cursor-pointer space-x-2"},oa=t("span",{class:"label-text text-warning text-xs font-bold"},"Resonate Material",-1),ia={class:"custom-scrollbar overflow-y-scroll overflow-x-hidden flex-grow mb-5"},ra={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-8"},ca={class:"flex space-x-10"},ua={class:"flex space-x-3"},da=t("button",{class:"btn btn-success btn-sm",onclick:"my_modal_shop1.showModal()"},"1.2 pt.1",-1),ha={id:"my_modal_shop1",class:"modal"},fa={class:"modal-box bg-slate-700"},va=t("p",{class:"py-4 text-lg text-white text-center"},[z("Add materials from "),t("span",{class:"text-error"},"1.2 part 1"),z(" event shop?")],-1),pa=t("p",{class:"py-4 text-md text-white text-center"}," You should add once only.",-1),ma={class:"flex justify-center"},ga=t("button",{class:"btn btn-error btn-md",onclick:"my_modal_shop1.close()"},"No",-1),ya=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1),_a=t("button",{class:"btn btn-success btn-sm",onclick:"my_modal_shop2.showModal()"},"1.2 pt.2",-1),ba={id:"my_modal_shop2",class:"modal"},xa={class:"modal-box bg-slate-700"},wa=t("p",{class:"py-4 text-lg text-white text-center"},[z("Add materials from "),t("span",{class:"text-error"},"1.2 part 2"),z(" event shop?")],-1),$a=t("p",{class:"py-4 text-md text-white text-center"}," You should add once only.",-1),ka={class:"flex justify-center"},Aa=t("button",{class:"btn btn-error btn-md",onclick:"my_modal_shop2.close()"},"No",-1),Ia=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1),Ca=t("button",{class:"btn btn-error btn-sm",onclick:"my_modal_resetMat.showModal()"},"Reset",-1),Sa=t("p",{class:"py-4 text-lg text-white text-center"},[z("Reset quantity of "),t("span",{class:"text-error"},"selected"),z(" categories?")],-1),Ma=t("p",{class:"py-4 text-md text-white text-center"}," Click the buttons at the top to select.",-1),Na=t("button",{class:"btn btn-error btn-md",onclick:"my_modal_resetMat.close()"},"No",-1),Oa=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1),Ra={__name:"PlannerWarehouse",emits:{closeOverlay:{type:Function,required:!0}},setup(e,{emit:n}){const s=n,a=S({"Base Item":!0,"Build Material":!0,"Insight Material":!0,"Resonate Material":!0});Ie(()=>{K().data.length===0&&(console.log("Setting up warehouse"),Y().items.data.forEach(o=>{o.IsReleased==!0&&(o.Category==="Build Material"||o.Category==="Insight Material"||o.Category==="Resonate Material"&&o.Rarity<6||o.Name==="Dust"||o.Name==="Sharpodonty"||o.Name==="Crystal Casket")&&K().addItem(o.Name,o.Category)})),Re(K().data)});const u=(o,l)=>{K().updateItem(o,Number(l))},i=o=>{a.value[o]=!a.value[o]},m=V(()=>Object.values(a.value).some(l=>l)?K().data.filter(l=>a.value[l.Category]):K().data),c=()=>{Object.values(a.value).every(o=>o)?(K().resetAll(),window.location.reload()):Object.keys(a.value).forEach(o=>{a.value[o]&&K().resetCategory(o)}),s("closeOverlay")},f=o=>{Pn(o),s("closeOverlay")},h=()=>{s("closeOverlay")};return(o,l)=>($(),I("div",Wn,[t("div",Bn,[t("button",{onClick:h,class:"absolute top-2 right-4 text-white"},Tn),zn,t("div",null,[t("div",Hn,[t("div",Kn,[t("label",Yn,[Zn,t("input",{type:"checkbox",checked:"",onChange:l[0]||(l[0]=g=>i("Base Item")),class:"checkbox checkbox-error"},null,32)])]),t("div",Jn,[t("label",Xn,[ea,t("input",{type:"checkbox",checked:"",onChange:l[1]||(l[1]=g=>i("Build Material")),class:"checkbox checkbox-info"},null,32)])]),t("div",ta,[t("label",sa,[na,t("input",{type:"checkbox",checked:"",onChange:l[2]||(l[2]=g=>i("Insight Material")),class:"checkbox checkbox-success"},null,32)])]),t("div",aa,[t("label",la,[oa,t("input",{type:"checkbox",checked:"",onChange:l[3]||(l[3]=g=>i("Resonate Material")),class:"checkbox checkbox-warning"},null,32)])])])]),t("div",ia,[t("div",ra,[($(!0),I(W,null,te(m.value,g=>($(),T(Fn,{class:"",key:g.Material,material:g,"onUpdate:quantity":v=>u(g.Material,v)},null,8,["material","onUpdate:quantity"]))),128))])]),t("div",ca,[t("div",ua,[da,t("dialog",ha,[t("div",fa,[va,pa,t("div",ma,[t("button",{class:"btn btn-success btn-md mr-2",onClick:l[4]||(l[4]=g=>f("1.21"))},"Yes"),ga])]),ya]),_a,t("dialog",ba,[t("div",xa,[wa,$a,t("div",ka,[t("button",{class:"btn btn-success btn-md mr-2",onClick:l[5]||(l[5]=g=>f("1.22"))},"Yes"),Aa])]),Ia])]),Ca,t("dialog",{id:"my_modal_resetMat",class:"modal"},[t("div",{class:"modal-box bg-slate-700"},[Sa,Ma,t("div",{class:"flex justify-center"},[t("button",{class:"btn btn-success btn-md mr-2",onClick:c},"Yes"),Na])]),Oa])])])]))}},Va={class:"list-overlay"},La={class:"custom-modal-small h-auto space-y-5"},Da=t("i",{class:"fas fa-times"},null,-1),ja=[Da],Pa={class:"form-control"},qa={class:"cursor-pointer label justify-center space-x-5"},Ua=t("span",{class:"label-text text-white text-md"},"Show unreleased",-1),Qa={__name:"PlannerSettings",props:{settings:{type:Object,required:!0}},emits:{closeOverlay:{type:Function,required:!0},saveSettings:{type:Function,required:!0}},setup(e,{emit:n}){const s=e,a=n,u=S(s.settings.showUnreleased),i=()=>{a("closeOverlay")},m=()=>{const c={showUnreleased:u.value};a("saveSettings",c),i()};return(c,f)=>($(),I("div",Va,[t("div",La,[t("button",{onClick:i,class:"absolute top-2 right-4 text-white"},ja),t("div",Pa,[t("label",qa,[Ua,ae(t("input",{"onUpdate:modelValue":f[0]||(f[0]=h=>u.value=h),type:"checkbox",class:"checkbox checkbox-info"},null,512),[[Se,u.value]])])]),t("div",{class:"flex justify-center"},[t("button",{onClick:m,class:"btn btn-success"},"Save")])])]))}},Ea={class:"responsive-spacer"},Fa=t("h2",{class:"text-2xl text-white font-bold mb-4 lg:mb-6"},"Planner",-1),Wa=t("i",{class:"fa-solid fa-wand-magic-sparkles"},null,-1),Ba=t("i",{class:"fa-solid fa-tree"},null,-1),Ga=[Ba],Ta=t("i",{class:"fa-solid fa-box-archive"},null,-1),za=[Ta],Ha=t("i",{class:"fa-solid fa-gear"},null,-1),Ka=[Ha],Ya=t("div",{class:"custom-line"},null,-1),Za=t("div",{class:"custom-line"},null,-1),Ja={key:0,class:"overlay"},Xa={key:1,class:"overlay"},el={key:2,class:"overlay"},tl={key:3,class:"overlay"},sl={key:4,class:"overlay"},ll={__name:"PlannerView",setup(e){const n=ze(),s=He(),a=Y().arcanists.data,u=Ke(),i=S([]),m=V(()=>n.selectedArcanists.map(N=>N.info.Id));Ce(()=>{i.value=a.filter(N=>!m.value.includes(N.Id)&&(u.settings.showUnreleased?!0:N.IsReleased)),i.value.sort((N,Z)=>{const se=Z.Rarity-N.Rarity;return se!==0?se:N.Name.localeCompare(Z.Name)})});const c=S([]),f=S([]),h=S(!1),o=S(!1),l=S(!1),g=S(!1),v=S(!1),_=S(null),w=S(null),C=S(null),r=S(null),p=S(null),y=()=>{h.value=!0},d=()=>{h.value=!1},x=()=>{o.value=!0},b=N=>{c.value=N,x()},A=()=>{o.value=!1},O=()=>{l.value=!0},D=()=>{l.value=!1},U=()=>{g.value=!0},Q=()=>{g.value=!1},B=()=>{v.value=!0},G=()=>{v.value=!1},E=N=>{c.value={info:N,isVisible:!0,currentInsight:0,currentLevel:1,currentResonance:0,goalInsight:0,goalLevel:1,goalResonance:0},x()},M=N=>{n.selectedArcanists=N,A()},k=N=>{i.value=N},R=N=>{f.value=N},H=N=>{s.settings=N},re=N=>{u.settings=N};return ne(_,d),ne(w,A),ne(C,D),ne(r,Q),ne(p,G),(N,Z)=>($(),I("div",Ea,[Fa,j(fs,{selectedArcanists:J(n).selectedArcanists,onOpenEditOverlay:b},null,8,["selectedArcanists"]),t("div",{class:"flex justify-between items-center mb-2 mt-2"},[t("button",{onClick:y,class:"btn btn-ghost btn-sm custom-gradient-button"},[Wa,z(" Add Arcanist")]),t("div",{class:"flex space-x-2"},[t("div",{class:"tooltip","data-tip":"Wilderness Settings"},[t("button",{onClick:O,class:"btn btn-ghost btn-sm custom-gradient-button"},Ga)]),t("div",{class:"tooltip","data-tip":"Manage Warehouse"},[t("button",{onClick:U,class:"btn btn-ghost btn-sm custom-gradient-button"},za)]),t("div",{class:"tooltip","data-tip":"Settings"},[t("button",{onClick:B,class:"btn btn-ghost btn-sm custom-gradient-button"},Ka)])])]),Ya,j(fn,{totalActivityAndDays:f.value,wildernessSettings:J(s).settings},null,8,["totalActivityAndDays","wildernessSettings"]),Za,h.value?($(),I("div",Ja,[j(rt,{ref_key:"arcanistListRef",ref:_,arcanists:i.value,onCloseOverlay:d,onSelectArcanist:E},null,8,["arcanists"])])):X("",!0),o.value?($(),I("div",Xa,[j(as,{ref_key:"plannerEditRef",ref:w,selectedArcanist:c.value,selectedArcanists:J(n).selectedArcanists,listArcanists:i.value,onCloseOverlay:A,onUpdateSelectedArcanists:M,onUpdateListArcanists:k},null,8,["selectedArcanist","selectedArcanists","listArcanists"])])):X("",!0),l.value?($(),I("div",el,[j(jn,{ref_key:"wildernessRef",ref:C,settings:J(s).settings,onCloseOverlay:D,onSaveWildernessSettings:H},null,8,["settings"])])):X("",!0),g.value?($(),I("div",tl,[j(Ra,{ref_key:"warehouseRef",ref:r,onCloseOverlay:Q},null,512)])):X("",!0),v.value?($(),I("div",sl,[j(Qa,{ref_key:"settingsRef",ref:p,settings:J(u).settings,onCloseOverlay:G,onSaveSettings:re},null,8,["settings"])])):X("",!0),j(Ks,{selectedArcanists:J(n).selectedArcanists,"onUpdate:totalActivityAndDays":R},null,8,["selectedArcanists"])]))}};export{ll as default};
