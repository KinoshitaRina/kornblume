import{o as Q}from"./index-_B2i80Si.js";import{h as se,o as v,c as g,a as e,n as z,d as f,i as O,w as te,v as fe,F as V,r as E,e as R,t as I,u as F,j,k as Ie,b as X,f as W,l as ve,_ as ce,m as Se,p as ye,q as G,s as pe,x as _e,y as be}from"./index-lNY6y4Vi.js";const Re=se("planner",{state:()=>({selectedArcanists:[]}),persist:!0}),Ce=se("wilderness",{state:()=>({settings:{dust1:6,dust2:6,dust3:6,gold1:6,gold2:6,gold3:6,vigor:0,lazyModo:!1,wildernessOutput:{dust:19440,gold:8640}}}),persist:!0}),Oe=se("plannerSettings",{state:()=>({settings:{showUnreleased:!1}}),persist:!0});se("warehouse",{state:()=>({}),persist:!0});const Ne=["data-tip"],Le={class:"rounded-md overflow-hidden"},Me={class:"avatar"},Ve=["src","alt"],xe={__name:"ArcanistIcon",props:{arcanist:{type:Object,required:!0}},setup(t){const l=s=>`images/arcanists/icon/${s}.png`;return(s,a)=>(v(),g("div",{class:"tooltip","data-tip":t.arcanist.Name},[e("div",Le,[e("div",Me,[e("div",{class:z(["w-10 rounded",{"bg-orange-300":t.arcanist.Rarity===6,"bg-yellow-100":t.arcanist.Rarity===5,"bg-purple-400":t.arcanist.Rarity===4,"bg-sky-200":t.arcanist.Rarity===3,"bg-green-200":t.arcanist.Rarity===2}])},[e("img",{src:l(t.arcanist.Id),alt:t.arcanist.Name},null,8,Ve)],2)])])],8,Ne))}},De={class:"list-overlay"},je={class:"custom-modal-small h-1/2"},Ue={class:"relative mb-4"},qe=e("i",{class:"fas fa-times"},null,-1),Pe=[qe],Ge={class:"p-2 overflow-y-auto h-5/6"},We=["onClick"],Fe={class:"text-white ml-8"},Te={__name:"ArcanistList",props:{arcanists:{type:Array,required:!0}},emits:{closeOverlay:{type:Function,required:!0},selectArcanist:{type:Function,required:!0}},setup(t,{emit:l}){const s=t,a=l,n=r=>{a("selectArcanist",r),i()},i=()=>{a("closeOverlay")},m=f(""),c=O(()=>s.arcanists.filter(r=>r.Name.toLowerCase().includes(m.value.toLowerCase())));return(r,y)=>(v(),g("div",De,[e("div",je,[e("div",Ue,[te(e("input",{"onUpdate:modelValue":y[0]||(y[0]=o=>m.value=o),type:"text",placeholder:"Search Arcanists",class:"bg-gray-800 text-white p-2 rounded-md w-11/12 focus:outline-none"},null,512),[[fe,m.value]]),e("button",{onClick:i,class:"absolute top-2 right-0 text-white"},Pe)]),e("div",Ge,[(v(!0),g(V,null,E(c.value,o=>(v(),g("div",{key:o.Id,onClick:d=>n(o),class:"p-4 flex items-center cursor-pointer hover:bg-gray-700 transition-colors"},[R(xe,{arcanist:o},null,8,["arcanist"]),e("span",Fe,I(o.Name),1)],8,We))),128))])])]))}},me=F().items.data;function re(t){return t>1e6?`${(t/1e6).toFixed(1)}m`:t>1e4?`${(t/1e3).toFixed(0)}k`:t.toString()}function Ee(t){const l=m=>{const c=me.find(r=>r.Name==m);return c?c.Id:null},s=m=>{const c=me.find(r=>r.Name==m);return c?c.Rarity:null},a=m=>{const c=l(m);return c?`images/items/icon/${c}.png`:null},n=m=>{const c=s(m);return c?`images/items/border/${c}.png`:null};return{material:t.Material,quantity:re(t.Quantity),itemImagePath:a(t.Material),borderImagePath:n(t.Material)}}const Be=["data-tip"],Qe={class:"relative inline-block"},ze=["src"],Ke=["src"],He={class:"absolute text-white bottom-4 right-3 bg-gray-700 rounded-tl px-1 py-px text-xs"},$e={__name:"ItemIcon",props:{material:{type:Object,required:!0}},setup(t){const l=t,s=O(()=>Ee(l.material));return(a,n)=>(v(),g("div",{class:"tooltip","data-tip":s.value.material},[e("div",Qe,[e("img",{src:s.value.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute object-contain"},null,8,ze),e("img",{src:s.value.itemImagePath,alt:"Material Image",class:"w-20 h-20 object-contain"},null,8,Ke),e("div",He,I(s.value.quantity),1)])],8,Be))}},Je={class:"custom-scrollbar max-h-48 pt-10 flex flex-wrap justify-center overflow-y-scroll overflow-x-hidden"},Xe={__name:"ItemList",props:{materialList:{type:Array,required:!0}},setup(t){const l=t;return(s,a)=>(v(),g("div",Je,[(v(!0),g(V,null,E(l.materialList,n=>(v(),j($e,{key:n,material:n},null,8,["material"]))),128))]))}},Ye=F().calculations.data,ge=F().items.data;function Ze(t){t.sort((l,s)=>{const a=ge.find(r=>r.Name===l.Material),n=ge.find(r=>r.Name===s.Material),i=["Base Item","Resonate Material","Insight Material","Build Material"],m=i.indexOf(a.Category),c=i.indexOf(n.Category);return m!==c?m-c:n.Rarity!==a.Rarity?n.Rarity-a.Rarity:a.Name.localeCompare(n.Name)})}function Ae(t){const l={};return t.forEach(a=>{a&&(Array.isArray(a)?a.flat().forEach(({Material:i,Quantity:m})=>{l[i]?l[i]+=m:l[i]=m}):typeof a=="object"&&Object.entries(a).forEach(([n,i])=>{l[n]?l[n]+=i:l[n]=i}))}),Object.keys(l).map(a=>({Material:a,Quantity:l[a]}))}function et(t){var a,n;Ze(t);const l=((a=t.find(i=>i.Material==="Dust"))==null?void 0:a.Quantity)||0,s=((n=t.find(i=>i.Material==="Sharpodonty"))==null?void 0:n.Quantity)||0;return l===0&&s===0?t.filter(m=>m.Material!=="Dust"&&m.Material!=="Sharpodonty"):t}function we(t){const l=o=>{let d={Dust:0,Sharpodonty:0};if(o.currentInsight==o.goalInsight){const{Dust:u,Sharpodonty:p}=n(o.currentLevel,o.goalLevel,o,o.currentInsight);return d.Dust+=u,d.Sharpodonty+=p,d}for(let u=o.currentInsight;u<=o.goalInsight;u++)if(u<o.goalInsight){const p=a(o,u);if(d.Dust+=p.Total.Dust,d.Sharpodonty+=p.Total.Sharpodonty,u==o.currentInsight){const{Dust:b,Sharpodonty:$}=n(1,o.currentLevel,o,u);d.Dust-=b,d.Sharpodonty-=$}}else{const{Dust:p,Sharpodonty:b}=n(1,o.goalLevel,o,u);d.Dust+=p,d.Sharpodonty+=b}return[{Material:"Dust",Quantity:d.Dust},{Material:"Sharpodonty",Quantity:d.Sharpodonty}]},s=(o,d,x)=>{const u={};if(o===d)return null;for(let b=o;b<=d;b++){const $=x.find(S=>S.Id===b);$&&$.Material.forEach((S,C)=>{const M=$.Quantity[C];u[S]?u[S]+=M:u[S]=M})}return Object.keys(u).map(b=>({Material:b,Quantity:u[b]}))},a=(o,d)=>Ye.find(u=>u.Rarity.includes(o.info.Rarity)&&u.Insight==d),n=(o,d,x,u)=>{let p={Dust:0,Sharpodonty:0};for(let b=Number(++o);b<=Number(d);b++){const $=a(x,u),S=b.toString(),C=$.Levels[S];C&&(p.Dust+=C.Dust,p.Sharpodonty+=C.Sharpodonty)}return p},i=s(t.currentInsight,t.goalInsight,t.info.Insight),m=s(t.currentResonance,t.goalResonance,t.info.Resonance),c=l(t),r=Ae([i,m,c]);return et(r)}const tt={__name:"ArcanistCalculate",props:{arcanist:{type:Object,required:!0}},setup(t){const l=t,s=O(()=>{const a=l.arcanist;return we(a)});return(a,n)=>(v(),g("div",null,[R(Xe,{materialList:s.value},null,8,["materialList"])]))}},st={class:"relative w-2/3 md:w-1/3 flex justify-center"},at={key:0},lt=e("i",{class:"fa-regular fa-circle text-white"},null,-1),nt=[lt],it={key:1},rt=["src","alt"],ot=e("div",{class:"flex items-center justify-center"},[e("i",{class:"fa-solid fa-caret-up text-blue-500"})],-1),ct={class:"grid grid-cols-4 gap-1 p-3 border border-blue-300 rounded-md shadow-lg options-box custom-gradient-gray-blue"},ut=["onClick"],dt={class:"flex items-center justify-center font-semibold rounded-full w-8 h-8 leading-none flex-col bg-blue-500 text-white"},vt={key:0},mt=e("i",{class:"fa-regular fa-circle text-white"},null,-1),gt=[mt],ht={key:1},ft=["src","alt"],L={__name:"SelectList",props:{label:{type:String,required:!0},options:{type:Array,required:!0},selected:{type:Number}},emits:["update:selected"],setup(t,{emit:l}){const s=t,a=l,n=f(!1),i=f(s.selected),m=f(null),c=()=>{n.value=!0},r=()=>{n.value=!1},y=d=>{i.value=d,a("update:selected",d,s.label),n.value=!1},o=d=>`images/items/common/insight${d}.png`;return Q(m,r),Ie(()=>{s.selected===void 0?(i.value=s.options[0],a("update:selected",s.options[0],s.label)):(i.value=s.selected,a("update:selected",s.selected,s.label))}),(d,x)=>(v(),g("div",st,[e("button",{onClick:c,class:"btn btn-sm btn-ghost gradient-blue w-1/2 m-2"},[t.label==="Current Insight"||t.label==="Goal Insight"?(v(),g(V,{key:0},[i.value===0?(v(),g("div",at,nt)):(v(),g("div",it,[e("img",{class:"avatar w-6",src:o(i.value),alt:"Option "+i.value},null,8,rt)]))],64)):(v(),g(V,{key:1},[X(I(i.value),1)],64))]),n.value?(v(),g("div",{key:0,ref_key:"containerRef",ref:m,class:"absolute mt-14 w-48 lg:w-64 z-50"},[ot,e("div",ct,[(v(!0),g(V,null,E(t.options,u=>(v(),g("button",{key:u,class:"m-1",onClick:p=>y(u)},[e("div",dt,[t.label==="Current Insight"||t.label==="Goal Insight"?(v(),g(V,{key:0},[u===0?(v(),g("div",vt,gt)):(v(),g("div",ht,[e("img",{src:o(u),alt:"Option "+u},null,8,ft)]))],64)):(v(),g(V,{key:1},[X(I(u),1)],64))])],8,ut))),128))])],512)):W("",!0)]))}},yt={class:"edit-overlay"},pt={class:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-gray-800 to-blue-950 p-4 border-2 border-black rounded-md w-11/12 sm:max-w-2xl lg:h-auto"},_t={class:"flex items-center p-2 mb-3 shadow-border-b"},bt={class:"flex items-center justify-center mr-2 space-x-3"},xt={class:"text-1xl md:text-2xl text-white font-bold"},$t={class:"text-sm text-white",for:"raritySelect"},At={class:"ml-auto flex items-center space-x-3"},wt={class:"tooltip","data-tip":"Hidden / Show"},kt=e("i",{class:"fas fa-times"},null,-1),It=[kt],St=e("div",{class:"custom-line"},null,-1),Rt=e("div",{class:"custom-label text-blue-100"},"Current Level",-1),Ct={class:"mt-2 flex justify-center items-center leading-none"},Ot=e("i",{class:"text-white text-center flex items-center justify-center font-extrabold text-2xl -translate-y-2"},"_",-1),Nt=e("div",{class:"custom-label text-blue-100"},"Goal Level",-1),Lt={class:"mt-2 flex justify-center items-center leading-none"},Mt=e("i",{class:"text-white text-center flex items-center justify-center font-extrabold text-2xl -translate-y-2"},"_",-1),Vt=e("div",{class:"custom-label text-blue-100"},"Resonance",-1),Dt={class:"mt-2 flex justify-center items-center leading-none"},jt=e("i",{class:"text-white fa-solid fa-angles-right text-center"},null,-1),Ut={class:"flex justify-center space-x-4"},qt={key:0,class:"toast toast-middle toast-center"},Pt=e("div",{class:"-translate-x-3 alert alert-info bg-red-300"},[e("span",null,"Current and Goal are the same!")],-1),Gt=[Pt],Wt={__name:"PlannerEdit",props:{selectedArcanist:{type:Object,required:!0},selectedArcanists:{type:Array,required:!0},listArcanists:{type:Array,required:!0}},emits:{closeOverlay:{type:Function,required:!0},updateSelectedArcanists:{type:Function,required:!0},updateListArcanists:{type:Function,required:!0}},setup(t,{emit:l}){const s=t,a=l,n=f(!1),i=f(0),m=F().calculations.data,c=f(s.selectedArcanist.info),r=f(s.selectedArcanists),y=f(s.listArcanists),o=f(s.selectedArcanist.currentInsight),d=f(s.selectedArcanist.currentLevel),x=f(s.selectedArcanist.currentResonance),u=f(s.selectedArcanist.goalInsight),p=f(s.selectedArcanist.goalLevel),b=f(s.selectedArcanist.goalResonance),$=f(s.selectedArcanist.isVisible),S=O(()=>({info:c.value,isVisible:$.value,currentInsight:o.value,currentLevel:d.value,goalInsight:u.value,goalLevel:p.value,currentResonance:x.value,goalResonance:b.value})),C=O(()=>c.value.Rarity),M=O(()=>[0,...c.value.Insight.map(_=>_.Id)]),w=O(()=>M.value.filter(_=>_>=o.value)),N=O(()=>{const _=m.find(h=>h.Rarity.includes(c.value.Rarity)&&h.Insight==o.value);return _?[1,...Object.keys(_.Levels).map(Number).filter(h=>h%5===0)]:[]}),D=O(()=>{if(u.value===null)return[];const _=m.find(h=>h.Rarity.includes(c.value.Rarity)&&h.Insight==u.value);return _?u.value===o.value?[1,...Object.keys(_.Levels).map(Number).filter(h=>h%5===0)].filter(h=>h>=d.value):[1,...Object.keys(_.Levels).map(Number).filter(h=>h%5===0)]:[]}),U=O(()=>{if(o.value===null)return[];if(o.value===0)return x.value=0,[0];const _=Number(o.value);if(_===0)return x.value=null,null;const h=_*5;return Array.from({length:h},(k,T)=>Number(T+1))}),H=O(()=>{if(u.value===null)return[];if(u.value===0)return b.value=0,[0];const _=Number(u.value),h=Number(x.value);if(_===0)return b.value=null,null;const k=h||1,T=_*5;return Array.from({length:T-k+1},(ue,A)=>Number(k+A))}),B=(_,h,k,T)=>Number(_)>Number(k)?!0:Number(_)<Number(k)?!1:Number(h)>Number(T),le=()=>{if(o.value===u.value&&d.value===p.value&&x.value===b.value)return n.value=!0,setTimeout(()=>{n.value=!1},1e3),!0;n.value=!1},Z=()=>{if(le())return;const _=r.value.findIndex(h=>Number(h.info.Id)===Number(S.value.info.Id));_!==-1?r.value[_]={...r.value[_],...S.value}:r.value.push(S.value),y.value=y.value.filter(h=>h.Id!==S.value.info.Id),a("updateSelectedArcanists",r.value),a("updateListArcanists",y.value),a("closeOverlay")},ne=()=>{const _=r.value.findIndex(h=>Number(h.info.Id)===Number(S.value.info.Id));_!==-1&&r.value.splice(_,1),J()},J=()=>{a("closeOverlay")},q=(_,h)=>{switch(h){case"Current Insight":o.value=_;break;case"Current Level":d.value=_;break;case"Current Resonance":x.value=_;break;case"Goal Insight":u.value=_;break;case"Goal Level":p.value=_;break;case"Goal Resonance":b.value=_;break;case"Visible":$.value=_;break}};return ve([o,d,x,u,p,b],()=>{i.value+=1}),ve([o,d,x],()=>{B(o.value,d.value,u.value,p.value)&&(u.value=o.value,p.value=d.value),Number(x.value)>Number(b.value)&&(b.value=x.value)}),(_,h)=>(v(),g("div",yt,[e("div",pt,[e("div",_t,[e("div",bt,[R(xe,{class:"ml-2",arcanist:c.value},null,8,["arcanist"]),e("h2",xt,I(c.value.Name),1),e("label",$t,[X(I(C.value)+" ",1),e("i",{class:z(["fa-solid fa-star",{"text-orange-300":C.value===6,"text-yellow-100":C.value===5,"text-purple-400":C.value===4,"text-sky-200":C.value===3,"text-green-200":C.value===2}])},null,2)]),e("div",{class:"tooltip","data-tip":"Remove Arcanist"},[e("i",{onClick:ne,class:"fas fa-trash-alt text-gray-500"})])]),e("div",At,[e("div",wt,[e("div",{onClick:h[0]||(h[0]=k=>$.value=!$.value),class:z(["badge badge-ghost",$.value?"green-badge":"red-badge"])},[e("i",{class:z($.value?"fa-regular fa-eye":"fa-regular fa-eye-slash")},null,2)],2)]),e("button",{onClick:J,class:"text-white"},It)])]),St,Rt,e("div",Ct,[(v(),j(L,{key:i.value,modelValue:o.value,"onUpdate:modelValue":h[1]||(h[1]=k=>o.value=k),selected:o.value,label:"Current Insight",options:M.value,"onUpdate:selected":q},null,8,["modelValue","selected","options"])),Ot,(v(),j(L,{key:i.value,modelValue:d.value,"onUpdate:modelValue":h[2]||(h[2]=k=>d.value=k),selected:d.value,label:"Current Level",options:N.value,"onUpdate:selected":q},null,8,["modelValue","selected","options"]))]),Nt,e("div",Lt,[(v(),j(L,{key:i.value,modelValue:u.value,"onUpdate:modelValue":h[3]||(h[3]=k=>u.value=k),selected:u.value,label:"Goal Insight",options:w.value,"onUpdate:selected":q},null,8,["modelValue","selected","options"])),Mt,(v(),j(L,{key:i.value,modelValue:p.value,"onUpdate:modelValue":h[4]||(h[4]=k=>p.value=k),selected:p.value,label:"Goal Level",options:D.value,"onUpdate:selected":q},null,8,["modelValue","selected","options"]))]),Vt,e("div",Dt,[(v(),j(L,{key:i.value,modelValue:x.value,"onUpdate:modelValue":h[5]||(h[5]=k=>x.value=k),selected:x.value,label:"Current Resonance",options:U.value,"onUpdate:selected":q},null,8,["modelValue","selected","options"])),jt,(v(),j(L,{key:i.value,modelValue:b.value,"onUpdate:modelValue":h[6]||(h[6]=k=>b.value=k),selected:b.value,label:"Goal Resonance",options:H.value,"onUpdate:selected":q},null,8,["modelValue","selected","options"]))]),e("div",Ut,[e("button",{onClick:Z,class:"btn btn-success"},"Save"),n.value?(v(),g("div",qt,Gt)):W("",!0)]),R(tt,{arcanist:S.value},null,8,["arcanist"])])]))}},Ft=["data-tip"],Tt={class:"rounded-md overflow-hidden"},Et={class:"avatar"},Bt=["src","alt"],Qt={__name:"ArcanistIconToggle",props:{arcanist:{type:Object,required:!0},visible:{type:Boolean,required:!0}},setup(t){const l=s=>`images/arcanists/icon/${s}.png`;return(s,a)=>(v(),g("div",{class:"tooltip","data-tip":t.arcanist.Name},[e("div",Tt,[e("div",Et,[e("div",{class:z(["w-12 rounded",{"filter-grayscale opacity-50":!t.visible,"bg-orange-300":t.arcanist.Rarity===6,"bg-yellow-100":t.arcanist.Rarity===5,"bg-purple-400":t.arcanist.Rarity===4,"bg-sky-200":t.arcanist.Rarity===3,"bg-green-200":t.arcanist.Rarity===2}])},[e("img",{src:l(t.arcanist.Id),alt:t.arcanist.Name},null,8,Bt)],2)])])],8,Ft))}},zt=ce(Qt,[["__scopeId","data-v-11642327"]]),Kt={class:"flex flex-row flex-wrap justify-center space-x-2"},Ht={__name:"PlannerSelector",props:{selectedArcanists:{type:Array,required:!0}},emits:["open-edit-overlay"],setup(t,{emit:l}){const s=t,a=l,n=f(s.selectedArcanists),i=c=>{a("open-edit-overlay",c)},m=c=>{c.isVisible=!c.isVisible};return(c,r)=>(v(),g("div",null,[e("div",Kt,[(v(!0),g(V,null,E(n.value,y=>(v(),j(zt,{key:y.Name,arcanist:y.info,visible:y.isVisible,onClick:o=>i(y),onContextmenu:Se(o=>m(y),["prevent"])},null,8,["arcanist","visible","onClick","onContextmenu"]))),128))])]))}},Y=F().items.data,oe=F().stages.data,Jt=F().crafts.data;function Xt(t){let l=t.map(a=>({...a}));const s=[];return l.forEach(a=>{const n=Jt.find(i=>i.Name===a.Material);if(n){s.push(n);for(let i=0;i<n.Material.length;i++){const m=n.Material[i],c=n.Quantity[i]*a.Quantity;c>0&&(l.find(r=>r.Material===m)?l.find(r=>r.Material===m).Quantity+=c:l.push({Material:m,Quantity:c}))}}}),l=l.filter(a=>!s.some(n=>n.Name===a.Material)),l.sort((a,n)=>{const i=Y.find(c=>c.Name===a.Material);return Y.find(c=>c.Name===n.Material).Id-i.Id}),l}function Yt(t){const s=Y.find(n=>n.Name===t.Material).Rarity,a=t.Quantity;return s===3?a*40:s===4?a*100:s===5?a*250:s===6?a*1500:0}function Zt(t){return t==="Oneiric Shop"?"images/items/common/1.png":"images/items/common/0.png"}function ke(t,l,s,a,n){return{stage:t,runs:isNaN(l)?0:l,activity:isNaN(s)?0:s,days:isNaN(a)?0:a,materials:n,activityImagePath:Zt(t)}}function ee(t,l){let s=l.find(a=>a.stage===t);return s||(s=ke(t,null,t==="Oneiric Shop"?0:null,null,[]),l.push(s)),s}function P(t){return t.sort((l,s)=>{const a=oe.find(i=>i.Name===l.stage),n=oe.find(i=>i.Name===s.stage);return a&&n?a.Id-n.Id:a?-1:n?1:0})}function he(t){const l=[];Xt(t).forEach(r=>{const y=oe.find(o=>o.Material.includes(r.Material));if(y){const o=Math.ceil(parseFloat(r.Quantity)/parseFloat(y.Quantity)),d=Math.ceil(o*y.Activity),x=(d/240).toFixed(1),u=r,p=l.findIndex(b=>b.stage===y.Name);p!==-1?l[p].materials.push(u):l.push(ke(y.Name,o,d,x,[u]))}else{const o=ee("Tier 3",l),d=ee("Tier 2",l),x=ee("Oneiric Shop",l),u=ee("Unreleased",l);if(Y.find(p=>p.Name===r.Material).Category==="Resonate Material")x.activity+=Yt(r),x.materials.push(r);else{const p=Y.find($=>$.Name===r.Material).Rarity;(p===3?o:p===2?d:u).materials.push(r)}}});const a=l.filter(r=>["The Poussiere VI","Mintage Aesthetics VI","Oneiric Shop"].includes(r.stage)&&r.materials.length>0),n=l.filter(r=>(r.stage.endsWith("II")||r.stage.endsWith("IV")||r.stage.endsWith("VI"))&&!a.some(y=>y.stage===r.stage)&&r.materials.length>0),i=l.filter(r=>!["Tier 2","Tier 3","Unreleased",...a.map(y=>y.stage),...n.map(y=>y.stage)].includes(r.stage)&&r.materials.length>0),m=l.filter(r=>["Tier 2","Tier 3","Unreleased"].includes(r.stage)&&r.materials.length>0);return P(a),P(n),P(i),P(m),[{id:0,cards:P(a)},{id:1,cards:P(n)},{id:2,cards:P(i)},{id:3,cards:P(m)}]}function es(t){let l=0,s=0;return t.forEach(a=>{a.cards.forEach(n=>{n.days!==null&&(l+=n.activity,s+=parseFloat(n.days))})}),[l,s.toFixed(0)]}const ts={class:"bg-gray-700/40 shadow rounded flex flex-col items-center justify-between relative"},ss={class:"stage text-white p-2"},as={class:"calculations w-full flex justify-center items-center bg-gradient-to-r from-blue-800/70 to-blue-900/90 text-white p-2 rounded-md"},ls={class:"border-blue-700/90 border-r pr-3"},ns={key:0},is=e("i",{class:"fa-solid fa-xmark text-xs mr-0.5"},null,-1),rs={key:1},os={class:"pl-2"},cs=["src"],us={class:"border-blue-700/90 border-l pl-3"},ds={class:"items-center flex"},vs={__name:"Card",props:{card:{type:Object,required:!0}},setup(t){return(l,s)=>(v(),g("div",ts,[e("div",ss,[e("p",null,I(t.card.stage),1)]),e("div",as,[e("p",ls,[t.card.runs>0?(v(),g("span",ns,[is,X(I(t.card.runs),1)])):(v(),g("span",rs,I(t.card.runs),1))]),e("p",os,I(t.card.activity==null?"?":t.card.activity),1),e("img",{src:t.card.activityImagePath,alt:"Activity Image",class:"inline-block w-8 h-8"},null,8,cs),e("p",us,I(t.card.days)+" "+I(t.card.days===null?"":t.card.days>1?"days":"day"),1)]),e("div",ds,[(v(!0),g(V,null,E(t.card.materials,(a,n)=>(v(),g("div",{key:n},[R($e,{material:a},null,8,["material"])]))),128))])]))}},ms={class:"w-full mb-4 flex flex-col"},gs={class:"mb-4 gap-3 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4"},hs={__name:"PlannerLayer",props:{layer:{type:Object,required:!0}},setup(t){const l=t,s=O(()=>l.layer.cards&&l.layer.cards.length>0),a=O(()=>{switch(l.layer.id){case 0:return"yellow-badge";case 1:return"indigo-badge";case 2:return"purple-badge";case 3:return"green-badge";default:return"red-badge"}}),n=O(()=>{switch(l.layer.id){case 0:return"Resources";case 1:return"Insight";case 2:return"Hard Stages";case 3:return"Miscs";default:return"Undefined"}});return(i,m)=>(v(),g("div",ms,[s.value?(v(),g("div",{key:0,class:z(["badge badge-lg badge-ghost mt-2 mb-2 w-32",a.value])},I(n.value),3)):W("",!0),e("div",gs,[(v(!0),g(V,null,E(t.layer.cards,(c,r)=>(v(),j(vs,{key:r,card:c},null,8,["card"]))),128))])]))}},fs={class:"flex flex-wrap"},ys={__name:"PlannerResult",props:{selectedArcanists:{type:Array,required:!0}},emits:["update:totalActivityAndDays"],setup(t,{emit:l}){const s=t,a=l,n=f([]),i=f([]);return ye(()=>{const m=s.selectedArcanists.map(r=>r.isVisible?we(r):[]),c=Ae(m);n.value=c,a("update:totalActivityAndDays",es(he(c))),i.value=he(c)}),(m,c)=>(v(),g("div",fs,[(v(!0),g(V,null,E(i.value,(r,y)=>(v(),j(hs,{key:y,layer:r},null,8,["layer"]))),128))]))}},ps="/Kornblume/images/items/common/0.png",_s="/Kornblume/images/items/icon/55.png",bs="/Kornblume/images/items/icon/54.png",ae=t=>(pe("data-v-b116625d"),t=t(),_e(),t),xs={class:"flex custom-gradient-gray-blue-light px-2 py-2 md:px-4 lg:px-6 rounded-md items-center justify-center"},$s=ae(()=>e("i",{class:"fa-solid fa-calculator text-white mr-3"},null,-1)),As={class:"tooltip flex items-center","data-tip":"Calculations hasn't been optimized"},ws={class:"text"},ks=ae(()=>e("div",{class:"avatar"},[e("div",{class:"w-8 rounded"},[e("img",{src:ps,alt:"avatar"})])],-1)),Is={class:"text pr-3"},Ss={class:"tooltip","data-tip":"Wilderness Production"},Rs={class:"text"},Cs=ae(()=>e("div",{class:"avatar"},[e("div",{class:"w-8 rounded"},[e("img",{src:_s,alt:"avatar"})])],-1)),Os={class:"tooltip","data-tip":"Wilderness Production"},Ns={class:"text"},Ls=ae(()=>e("div",{class:"avatar"},[e("div",{class:"w-8 rounded"},[e("img",{src:bs,alt:"avatar"})])],-1)),Ms={__name:"PlannerTotal",props:{totalActivityAndDays:{type:Array,required:!0},wildernessSettings:{type:Object,required:!0}},setup(t){return(l,s)=>(v(),g("div",xs,[$s,e("div",As,[e("div",ws,I(t.totalActivityAndDays[0]),1),ks,e("div",Is,I(t.totalActivityAndDays[1])+" "+I(t.totalActivityAndDays[1]>1?"days":"day"),1)]),e("div",Ss,[e("div",Rs,I(G(re)(t.wildernessSettings.wildernessOutput.dust*t.totalActivityAndDays[1])),1)]),Cs,e("div",Os,[e("div",Ns,I(G(re)(t.wildernessSettings.wildernessOutput.gold*t.totalActivityAndDays[1])),1)]),Ls]))}},Vs=ce(Ms,[["__scopeId","data-v-b116625d"]]),K=t=>(pe("data-v-ffb65882"),t=t(),_e(),t),Ds={class:"list-overlay"},js={class:"custom-modal-small h-auto"},Us=K(()=>e("i",{class:"fas fa-times"},null,-1)),qs=[Us],Ps=K(()=>e("div",{class:"custom-label text-yellow-100"},"Dust Bell Towers",-1)),Gs={class:"grid grid-cols-3"},Ws=K(()=>e("div",{class:"custom-label text-yellow-100"},"Gold Bell Towers",-1)),Fs={class:"grid grid-cols-3"},Ts=K(()=>e("div",{class:"custom-label text-yellow-100"},"Vigor",-1)),Es={class:"grid grid-cols-2 p-2 items-center"},Bs={class:"tooltip","data-tip":"Collect once a day"},Qs={class:"form-control"},zs={class:"cursor-pointer label justify-center"},Ks=K(()=>e("span",{class:"label-text text-yellow-100 mr-3"},"Lazy Modo",-1)),Hs=["checked"],Js=K(()=>e("div",{class:"custom-label text-yellow-100"},"Output",-1)),Xs={class:"grid grid-cols-2 p-2"},Ys={class:"tooltip","data-tip":"Dust"},Zs={class:"flex items-center justify-center gradient-blue text-center rounded-xl mx-5 lg:mx-2 h-8"},ea={class:"tooltip","data-tip":"Sharpodonty"},ta={class:"flex items-center justify-center gradient-blue text-center rounded-xl mx-5 lg:mx-2 h-8"},sa={__name:"PlannerWilderness",props:{settings:{type:Object,required:!0}},emits:{closeOverlay:{type:Function,required:!0},saveWildernessSettings:{type:Function,required:!0}},setup(t,{emit:l}){const s=t,a=l,n=()=>{a("closeOverlay")},i=f(s.settings.dust1),m=f(s.settings.dust2),c=f(s.settings.dust3),r=f(s.settings.gold1),y=f(s.settings.gold2),o=f(s.settings.gold3),d=f(s.settings.vigor),x=f(s.settings.lazyModo),u=[0,1,2,3,4,5,6],p=[0,120,150,175,210,240,270],b=[0,60,75,80,96,108,120],$=(w,N)=>{switch(N){case"Dust 1":i.value=w;break;case"Dust 2":m.value=w;break;case"Dust 3":c.value=w;break;case"Gold 1":r.value=w;break;case"Gold 2":y.value=w;break;case"Gold 3":o.value=w;break}},S=()=>{const w=parseInt(d.value,10);if(isNaN(w)){d.value=null;return}if(w<0){d.value=0;return}if(w>50){d.value=50;return}d.value=w},C=()=>{const w={dust1:i.value,dust2:m.value,dust3:c.value,gold1:r.value,gold2:y.value,gold3:o.value,vigor:d.value,lazyModo:x.value,wildernessOutput:M.value};a("saveWildernessSettings",w),n()},M=O(()=>{const w=p[i.value]+p[m.value]+p[c.value],N=b[r.value]+b[y.value]+b[o.value],D=d.value?parseFloat(d.value/100):0,U=x.value?20:24,H=Math.ceil(w*(1+D)*U),B=Math.ceil(N*(1+D)*U);return{dust:H,gold:B}});return(w,N)=>(v(),g("div",Ds,[e("div",js,[e("button",{onClick:n,class:"absolute top-2 right-4 text-white"},qs),Ps,e("div",Gs,[R(L,{class:"select-list",options:u,selected:i.value,label:"Dust 1","onUpdate:selected":$},null,8,["selected"]),R(L,{class:"select-list",options:u,selected:m.value,label:"Dust 2","onUpdate:selected":$},null,8,["selected"]),R(L,{class:"select-list",options:u,selected:c.value,label:"Dust 3","onUpdate:selected":$},null,8,["selected"])]),Ws,e("div",Fs,[R(L,{class:"select-list",options:u,selected:r.value,label:"Gold 1","onUpdate:selected":$},null,8,["selected"]),R(L,{class:"select-list",options:u,selected:y.value,label:"Gold 2","onUpdate:selected":$},null,8,["selected"]),R(L,{class:"select-list",options:u,selected:o.value,label:"Gold 3","onUpdate:selected":$},null,8,["selected"])]),Ts,e("div",Es,[te(e("input",{onInput:S,"onUpdate:modelValue":N[0]||(N[0]=D=>d.value=D),type:"text",placeholder:"Vigor",class:"input input-bordered input-info input-sm mx-10 lg:mx-5 gradient-blue text-center"},null,544),[[fe,d.value]]),e("div",Bs,[e("div",Qs,[e("label",zs,[Ks,te(e("input",{"onUpdate:modelValue":N[1]||(N[1]=D=>x.value=D),type:"checkbox",checked:x.value,class:"checkbox checkbox-info"},null,8,Hs),[[be,x.value]])])])])]),Js,e("div",Xs,[e("div",Ys,[e("label",Zs,I(M.value.dust),1)]),e("div",ea,[e("label",ta,I(M.value.gold),1)])]),e("div",{class:"flex justify-center"},[e("button",{onClick:C,class:"btn btn-success"},"Save")])])]))}},aa=ce(sa,[["__scopeId","data-v-ffb65882"]]),la={class:"list-overlay"},na=e("i",{class:"fas fa-times"},null,-1),ia=[na],ra=e("p",{class:"text-white"},"Work in progress",-1),oa={__name:"PlannerWarehouse",emits:{closeOverlay:{type:Function,required:!0}},setup(t,{emit:l}){const s=l,a=()=>{s("closeOverlay")};return(n,i)=>(v(),g("div",la,[e("div",{class:"custom-modal-small h-auto"},[e("button",{onClick:a,class:"absolute top-2 right-4 text-white"},ia),ra])]))}},ca={class:"list-overlay"},ua={class:"custom-modal-small h-auto space-y-5"},da=e("i",{class:"fas fa-times"},null,-1),va=[da],ma={class:"form-control"},ga={class:"cursor-pointer label justify-center space-x-5"},ha=e("span",{class:"label-text text-white text-md"},"Show unreleased",-1),fa={__name:"PlannerSettings",props:{settings:{type:Object,required:!0}},emits:{closeOverlay:{type:Function,required:!0},saveSettings:{type:Function,required:!0}},setup(t,{emit:l}){const s=t,a=l,n=f(s.settings.showUnreleased),i=()=>{a("closeOverlay")},m=()=>{const c={showUnreleased:n.value};a("saveSettings",c),i()};return(c,r)=>(v(),g("div",ca,[e("div",ua,[e("button",{onClick:i,class:"absolute top-2 right-4 text-white"},va),e("div",ma,[e("label",ga,[ha,te(e("input",{"onUpdate:modelValue":r[0]||(r[0]=y=>n.value=y),type:"checkbox",class:"checkbox checkbox-info"},null,512),[[be,n.value]])])]),e("div",{class:"flex justify-center"},[e("button",{onClick:m,class:"btn btn-success"},"Save")])])]))}},ya={class:"responsive-spacer"},pa=e("h2",{class:"text-2xl text-white font-bold mb-4 lg:mb-6"},"Planner",-1),_a=e("i",{class:"fa-solid fa-wand-magic-sparkles"},null,-1),ba=e("i",{class:"fa-solid fa-tree"},null,-1),xa=[ba],$a=e("i",{class:"fa-solid fa-box-archive"},null,-1),Aa=[$a],wa=e("i",{class:"fa-solid fa-gear"},null,-1),ka=[wa],Ia=e("div",{class:"custom-line"},null,-1),Sa=e("div",{class:"custom-line"},null,-1),Ra={key:0,class:"overlay"},Ca={key:1,class:"overlay"},Oa={key:2,class:"overlay"},Na={key:3,class:"overlay"},La={key:4,class:"overlay"},Da={__name:"PlannerView",setup(t){const l=Re(),s=Ce(),a=F().arcanists.data,n=Oe(),i=f([]),m=O(()=>l.selectedArcanists.map(A=>A.info.Id));ye(()=>{i.value=a.filter(A=>!m.value.includes(A.Id)&&A.IsReleased!==n.settings.showUnreleased),i.value.sort((A,ie)=>{const de=ie.Rarity-A.Rarity;return de!==0?de:A.Name.localeCompare(ie.Name)})});const c=f([]),r=f([]);f([]);const y=f(!1),o=f(!1),d=f(!1),x=f(!1),u=f(!1),p=f(null),b=f(null),$=f(null),S=f(null),C=f(null),M=()=>{y.value=!0},w=()=>{y.value=!1},N=()=>{o.value=!0},D=A=>{c.value=A,N()},U=()=>{o.value=!1},H=()=>{d.value=!0},B=()=>{d.value=!1},le=()=>{x.value=!0},Z=()=>{x.value=!1},ne=()=>{u.value=!0},J=()=>{u.value=!1},q=A=>{c.value={info:A,isVisible:!0,currentInsight:0,currentLevel:1,currentResonance:0,goalInsight:0,goalLevel:1,goalResonance:0},N()},_=A=>{l.selectedArcanists=A,U()},h=A=>{i.value=A},k=A=>{r.value=A},T=A=>{s.settings=A},ue=A=>{n.settings=A};return Q(p,w),Q(b,U),Q($,B),Q(S,Z),Q(C,J),(A,ie)=>(v(),g("div",ya,[pa,R(Ht,{selectedArcanists:G(l).selectedArcanists,onOpenEditOverlay:D},null,8,["selectedArcanists"]),e("div",{class:"flex justify-between items-center mb-2 mt-2"},[e("button",{onClick:M,class:"btn btn-ghost btn-sm custom-gradient-button"},[_a,X(" Add Arcanist")]),e("div",{class:"flex space-x-2"},[e("div",{class:"tooltip","data-tip":"Wilderness Settings"},[e("button",{onClick:H,class:"btn btn-ghost btn-sm custom-gradient-button"},xa)]),e("div",{class:"tooltip","data-tip":"Manage Warehouse"},[e("button",{onClick:le,class:"btn btn-ghost btn-sm custom-gradient-button"},Aa)]),e("button",{onClick:ne,class:"btn btn-ghost btn-sm custom-gradient-button"},ka)])]),Ia,R(Vs,{totalActivityAndDays:r.value,wildernessSettings:G(s).settings},null,8,["totalActivityAndDays","wildernessSettings"]),Sa,y.value?(v(),g("div",Ra,[R(Te,{ref_key:"arcanistListRef",ref:p,arcanists:i.value,onCloseOverlay:w,onSelectArcanist:q},null,8,["arcanists"])])):W("",!0),o.value?(v(),g("div",Ca,[R(Wt,{ref_key:"plannerEditRef",ref:b,selectedArcanist:c.value,selectedArcanists:G(l).selectedArcanists,listArcanists:i.value,onCloseOverlay:U,onUpdateSelectedArcanists:_,onUpdateListArcanists:h},null,8,["selectedArcanist","selectedArcanists","listArcanists"])])):W("",!0),d.value?(v(),g("div",Oa,[R(aa,{ref_key:"wildernessRef",ref:$,settings:G(s).settings,onCloseOverlay:B,onSaveWildernessSettings:T},null,8,["settings"])])):W("",!0),x.value?(v(),g("div",Na,[R(oa,{ref_key:"warehouseRef",ref:S,onCloseOverlay:Z},null,512)])):W("",!0),u.value?(v(),g("div",La,[R(fa,{ref_key:"settingsRef",ref:C,settings:G(n).settings,onCloseOverlay:J,onSaveSettings:ue},null,8,["settings"])])):W("",!0),R(ys,{selectedArcanists:G(l).selectedArcanists,"onUpdate:totalActivityAndDays":k},null,8,["selectedArcanists"])]))}};export{Da as default};
