import{o as oe}from"./index-NoL6X8RY.js";import{h as ce,o as w,c as C,a as t,n as se,d as S,i as j,w as ae,v as me,F as G,r as ne,e as L,t as P,u as E,j as H,k as Ce,b as R,f as te,l as Se,_ as ue,m as q,p as Be,q as Ge,s as ge,x as ye,y as Me,z as pe,A as ze,B as He}from"./index-kMSFd09u.js";const Ke=ce("planner",{state:()=>({selectedArcanists:[]}),persist:!0}),Ye=ce("wilderness",{state:()=>({settings:{dust1:6,dust2:6,dust3:6,gold1:6,gold2:6,gold3:6,vigor:0,lazyModo:!1,wildernessOutput:{dust:19440,gold:8640}}}),persist:!0}),be=ce("plannerSettings",{state:()=>({settings:{showUnreleased:!1,unreleasedDrops:!1}}),persist:!0}),Ze=["data-tip"],Je={class:"rounded-md overflow-hidden"},Xe={class:"avatar"},et=["src","alt"],Ne={__name:"ArcanistIcon",props:{arcanist:{type:Object,required:!0}},setup(e){const a=n=>`images/arcanists/icon/${n}.png`;return(n,o)=>(w(),C("div",{class:"tooltip","data-tip":e.arcanist.Name},[t("div",Je,[t("div",Xe,[t("div",{class:se(["w-10 rounded",{"bg-orange-300":e.arcanist.Rarity===6,"bg-yellow-100":e.arcanist.Rarity===5,"bg-purple-400":e.arcanist.Rarity===4,"bg-sky-200":e.arcanist.Rarity===3,"bg-green-200":e.arcanist.Rarity===2}])},[t("img",{src:a(e.arcanist.Id),alt:e.arcanist.Name},null,8,et)],2)])])],8,Ze))}},tt={class:"list-overlay"},st={class:"custom-modal-small h-2/3"},nt={class:"relative mb-4"},at=t("i",{class:"fas fa-times"},null,-1),ot=[at],lt={class:"p-2 overflow-y-auto h-5/6"},it=["onClick"],rt={class:"text-white ml-8"},ct={__name:"ArcanistList",props:{arcanists:{type:Array,required:!0}},emits:{closeOverlay:{type:Function,required:!0},selectArcanist:{type:Function,required:!0}},setup(e,{emit:a}){const n=e,o=a,c=d=>{o("selectArcanist",d),r()},r=()=>{o("closeOverlay")},h=S(""),u=j(()=>n.arcanists.filter(d=>d.Name.toLowerCase().includes(h.value.toLowerCase())));return(d,m)=>(w(),C("div",tt,[t("div",st,[t("div",nt,[ae(t("input",{"onUpdate:modelValue":m[0]||(m[0]=b=>h.value=b),type:"text",placeholder:"Search Arcanists",class:"bg-gray-800 text-white p-2 rounded-md w-11/12 focus:outline-none"},null,512),[[me,h.value]]),t("button",{onClick:r,class:"absolute top-2 right-0 text-white"},ot)]),t("div",lt,[(w(!0),C(G,null,ne(u.value,b=>(w(),C("div",{key:b.Id,onClick:s=>c(b),class:"p-4 flex items-center cursor-pointer hover:bg-gray-700 transition-colors"},[L(Ne,{arcanist:b},null,8,["arcanist"]),t("span",rt,P(b.Name),1)],8,it))),128))])])]))}},_e=E().items.data;function ve(e){return e>1e6?`${(e/1e6).toFixed(1)}m`:e>1e4?`${(e/1e3).toFixed(0)}k`:e.toString()}function Oe(e){const a=h=>{const u=_e.find(d=>d.Name==h);return u?u.Id:null},n=h=>{const u=_e.find(d=>d.Name==h);return u?u.Rarity:null},o=h=>{const u=a(h);return u?`images/items/icon/${u}.png`:null},c=h=>{const u=n(h);return u?`images/items/border/${u}.png`:null};return{material:e.Material,quantity:ve(e.Quantity),itemImagePath:o(e.Material),borderImagePath:c(e.Material)}}const ut=["data-tip"],dt={class:"relative inline-block"},ht=["src"],ft=["src"],pt={class:"absolute text-white bottom-4 right-3 bg-gray-700 rounded-tl px-1 py-px text-xs"},Re={__name:"ItemIcon",props:{material:{type:Object,required:!0}},setup(e){const a=e,n=j(()=>Oe(a.material));return(o,c)=>(w(),C("div",{class:"tooltip","data-tip":n.value.material},[t("div",dt,[t("img",{src:n.value.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute"},null,8,ht),t("img",{src:n.value.itemImagePath,alt:"Material Image",class:"w-20 h-20"},null,8,ft),t("div",pt,P(n.value.quantity),1)])],8,ut))}},vt={class:"custom-scrollbar pt-10 flex flex-wrap justify-center overflow-y-scroll overflow-x-hidden"},mt={__name:"ItemList",props:{materialList:{type:Array,required:!0}},setup(e){const a=e;return(n,o)=>(w(),C("div",vt,[(w(!0),C(G,null,ne(a.materialList,c=>(w(),H(Re,{key:c,material:c},null,8,["material"]))),128))]))}},gt=E().calculations.data,xe=E().items.data,yt=E().arcanists.data;function De(e){e.sort((a,n)=>{const o=xe.find(d=>d.Name===a.Material),c=xe.find(d=>d.Name===n.Material),r=["Base Item","Resonate Material","Insight Material","Build Material"],h=r.indexOf(o.Category),u=r.indexOf(c.Category);return h!==u?h-u:c.Rarity!==o.Rarity?c.Rarity-o.Rarity:o.Name.localeCompare(c.Name)})}function Ve(e){const a={};return e.forEach(o=>{o&&(Array.isArray(o)?o.flat().forEach(({Material:r,Quantity:h})=>{a[r]?a[r]+=h:a[r]=h}):typeof o=="object"&&Object.entries(o).forEach(([c,r])=>{a[c]?a[c]+=r:a[c]=r}))}),Object.keys(a).map(o=>({Material:o,Quantity:a[o]}))}function bt(e){var o,c;De(e);const a=((o=e.find(r=>r.Material==="Dust"))==null?void 0:o.Quantity)||0,n=((c=e.find(r=>r.Material==="Sharpodonty"))==null?void 0:c.Quantity)||0;return a===0&&n===0?e.filter(h=>h.Material!=="Dust"&&h.Material!=="Sharpodonty"):e}function Le(e){const a=yt.find(s=>s.Id===e.Id),n=s=>{let f={Dust:0,Sharpodonty:0};if(s.currentInsight==s.goalInsight){const{Dust:y,Sharpodonty:$}=r(s.currentLevel,s.goalLevel,s,s.currentInsight);return f.Dust+=y,f.Sharpodonty+=$,f}for(let y=s.currentInsight;y<=s.goalInsight;y++)if(y<s.goalInsight){const $=c(s,y);if(f.Dust+=$.Total.Dust,f.Sharpodonty+=$.Total.Sharpodonty,y==s.currentInsight){const{Dust:x,Sharpodonty:l}=r(1,s.currentLevel,s,y);f.Dust-=x,f.Sharpodonty-=l}}else{const{Dust:$,Sharpodonty:x}=r(1,s.goalLevel,s,y);f.Dust+=$,f.Sharpodonty+=x}return[{Material:"Dust",Quantity:f.Dust},{Material:"Sharpodonty",Quantity:f.Sharpodonty}]},o=(s,f,g)=>{const y={};if(s===f)return null;for(let x=Number(s+1);x<=f;x++){const l=g.find(p=>p.Id===x);l&&l.Material.forEach((p,v)=>{const i=l.Quantity[v];y[p]?y[p]+=i:y[p]=i})}return Object.keys(y).map(x=>({Material:x,Quantity:y[x]}))},c=(s,f)=>gt.find(y=>y.Rarity.includes(a.Rarity)&&y.Insight==f),r=(s,f,g,y)=>{let $={Dust:0,Sharpodonty:0};for(let x=Number(++s);x<=Number(f);x++){const l=c(g,y),p=x.toString(),v=l.Levels[p];v&&($.Dust+=v.Dust,$.Sharpodonty+=v.Sharpodonty)}return $},h=o(e.currentInsight,e.goalInsight,a.Insight),u=o(e.currentResonance,e.goalResonance,a.Resonance),d=n(e),m=Ve([h,u,d]);return bt(m)}const _t={__name:"ArcanistCalculate",props:{arcanist:{type:Object,required:!0}},setup(e){const a=e,n=j(()=>{const o=a.arcanist;return Le(o)});return(o,c)=>(w(),C("div",null,[L(mt,{class:"max-h-48",materialList:n.value},null,8,["materialList"])]))}},xt={class:"relative w-2/3 md:w-1/3 flex justify-center"},wt={key:0},$t=t("i",{class:"fa-regular fa-circle text-white"},null,-1),kt=[$t],It={key:1},At=["src","alt"],Ct=t("div",{class:"flex items-center justify-center"},[t("i",{class:"fa-solid fa-caret-up text-blue-500"})],-1),St={class:"grid grid-cols-4 gap-1 p-3 border border-blue-300 rounded-md shadow-lg options-box custom-gradient-gray-blue"},Mt=["onClick"],Nt={class:"flex items-center justify-center font-semibold rounded-full w-8 h-8 leading-none flex-col bg-blue-500 text-white"},Ot={key:0},Rt=t("i",{class:"fa-regular fa-circle text-white"},null,-1),Dt=[Rt],Vt={key:1},Lt=["src","alt"],B={__name:"SelectList",props:{label:{type:String,required:!0},options:{type:Array,required:!0},selected:{type:Number}},emits:["update:selected"],setup(e,{emit:a}){const n=e,o=a,c=S(!1),r=S(n.selected),h=S(null),u=()=>{c.value=!0},d=()=>{c.value=!1},m=s=>{r.value=s,o("update:selected",s,n.label),c.value=!1},b=s=>`images/items/common/insight${s}.png`;return oe(h,d),Ce(()=>{n.selected===void 0?(r.value=n.options[0],o("update:selected",n.options[0],n.label)):(r.value=n.selected,o("update:selected",n.selected,n.label))}),(s,f)=>(w(),C("div",xt,[t("button",{onClick:u,class:"btn btn-sm btn-ghost gradient-blue w-1/2 m-2"},[e.label==="Current Insight"||e.label==="Goal Insight"?(w(),C(G,{key:0},[r.value===0?(w(),C("div",wt,kt)):(w(),C("div",It,[t("img",{class:"avatar w-6",src:b(r.value),alt:"Option "+r.value},null,8,At)]))],64)):(w(),C(G,{key:1},[R(P(r.value),1)],64))]),c.value?(w(),C("div",{key:0,ref_key:"containerRef",ref:h,class:"absolute mt-14 w-48 lg:w-64 z-50"},[Ct,t("div",St,[(w(!0),C(G,null,ne(e.options,g=>(w(),C("button",{key:g,class:"m-1",onClick:y=>m(g)},[t("div",Nt,[e.label==="Current Insight"||e.label==="Goal Insight"?(w(),C(G,{key:0},[g===0?(w(),C("div",Ot,Dt)):(w(),C("div",Vt,[t("img",{src:b(g),alt:"Option "+g},null,8,Lt)]))],64)):(w(),C(G,{key:1},[R(P(g),1)],64))])],8,Mt))),128))])],512)):te("",!0)]))}},jt={class:"edit-overlay"},Pt={class:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-gray-800 to-blue-950 p-4 border-2 border-black rounded-md w-11/12 sm:max-w-2xl lg:h-auto"},qt={class:"flex items-center p-2 mb-3 shadow-border-b"},Et={class:"flex items-center justify-center mr-2 space-x-3"},Ut={class:"text-1xl md:text-2xl text-white font-bold"},Wt={class:"text-sm text-white",for:"raritySelect"},Ft={class:"ml-auto flex items-center space-x-3"},Tt={class:"tooltip","data-tip":"Hidden / Show"},Qt=t("i",{class:"fas fa-times"},null,-1),Bt=[Qt],Gt=t("div",{class:"custom-line"},null,-1),zt=t("div",{class:"custom-label text-blue-100"},"Current Level",-1),Ht={class:"mt-2 flex justify-center items-center leading-none"},Kt=t("i",{class:"text-white text-center flex items-center justify-center font-extrabold text-2xl -translate-y-2"},"_",-1),Yt=t("div",{class:"custom-label text-blue-100"},"Goal Level",-1),Zt={class:"mt-2 flex justify-center items-center leading-none"},Jt=t("i",{class:"text-white text-center flex items-center justify-center font-extrabold text-2xl -translate-y-2"},"_",-1),Xt=t("div",{class:"custom-label text-blue-100"},"Resonance",-1),es={class:"mt-2 flex justify-center items-center leading-none"},ts=t("i",{class:"text-white fa-solid fa-angles-right text-center"},null,-1),ss={class:"flex justify-center space-x-4"},ns={key:0,class:"toast toast-middle toast-center"},as=t("div",{class:"-translate-x-3 alert alert-info bg-red-300"},[t("span",null,"Current and Goal are the same!")],-1),os=[as],ls={__name:"PlannerEdit",props:{selectedArcanist:{type:Object,required:!0},selectedArcanists:{type:Array,required:!0},listArcanists:{type:Array,required:!0}},emits:{closeOverlay:{type:Function,required:!0},updateSelectedArcanists:{type:Function,required:!0},updateListArcanists:{type:Function,required:!0}},setup(e,{emit:a}){const n=e,o=a,c=E().arcanists.data,r=S(!1),h=S(0),u=E().calculations.data,d=S(c.find(M=>Number(M.Id)===Number(n.selectedArcanist.Id))),m=S(n.selectedArcanists),b=S(n.listArcanists),s=S(n.selectedArcanist.currentInsight),f=S(n.selectedArcanist.currentLevel),g=S(n.selectedArcanist.currentResonance),y=S(n.selectedArcanist.goalInsight),$=S(n.selectedArcanist.goalLevel),x=S(n.selectedArcanist.goalResonance),l=S(n.selectedArcanist.isVisible),p=j(()=>({Id:d.value.Id,isVisible:l.value,currentInsight:s.value,currentLevel:f.value,goalInsight:y.value,goalLevel:$.value,currentResonance:g.value,goalResonance:x.value})),v=j(()=>d.value.Rarity),i=j(()=>[0,...d.value.Insight.map(M=>M.Id)]),k=j(()=>i.value.filter(M=>M>=s.value)),_=j(()=>{const M=u.find(A=>A.Rarity.includes(d.value.Rarity)&&A.Insight==s.value);return M?[1,...Object.keys(M.Levels).map(Number).filter(A=>A%5===0)]:[]}),I=j(()=>{if(y.value===null)return[];const M=u.find(A=>A.Rarity.includes(d.value.Rarity)&&A.Insight==y.value);return M?y.value===s.value?[1,...Object.keys(M.Levels).map(Number).filter(A=>A%5===0)].filter(A=>A>=f.value):[1,...Object.keys(M.Levels).map(Number).filter(A=>A%5===0)]:[]}),O=j(()=>{if(s.value===null)return[];if(s.value===0)return g.value=0,[0];const M=Number(s.value);if(M===0)return g.value=null,null;const A=M*5;return Array.from({length:A},(D,J)=>Number(J+1))}),V=j(()=>{if(y.value===null)return[];if(y.value===0)return x.value=0,[0];const M=Number(y.value),A=Number(g.value);if(M===0)return x.value=null,null;const D=A||1,J=M*5;return Array.from({length:J-D+1},(N,Z)=>Number(D+Z))}),F=(M,A,D,J)=>Number(M)>Number(D)?!0:Number(M)<Number(D)?!1:Number(A)>Number(J),Q=()=>{if(s.value===y.value&&f.value===$.value&&g.value===x.value)return r.value=!0,setTimeout(()=>{r.value=!1},1e3),!0;r.value=!1},z=()=>{if(Q())return;const M=m.value.findIndex(A=>Number(A.Id)===Number(p.value.Id));M!==-1?m.value[M]={...m.value[M],...p.value}:m.value.push(p.value),b.value=b.value.filter(A=>A.Id!==p.value.Id),o("updateSelectedArcanists",m.value),o("updateListArcanists",b.value),o("closeOverlay")},K=()=>{const M=m.value.findIndex(A=>Number(A.Id)===Number(p.value.Id));M!==-1&&m.value.splice(M,1),X()},X=()=>{o("closeOverlay")},Y=(M,A)=>{switch(A){case"Current Insight":s.value=M;break;case"Current Level":f.value=M;break;case"Current Resonance":g.value=M;break;case"Goal Insight":y.value=M;break;case"Goal Level":$.value=M;break;case"Goal Resonance":x.value=M;break;case"Visible":l.value=M;break}};return Se([s,f,g,y,$,x],()=>{h.value+=1,f.value>_.value[_.value.length-1]&&(f.value=_.value[_.value.length-1]),$.value>I.value[I.value.length-1]&&($.value=I.value[I.value.length-1]),Number(g.value)>Number(x.value)&&(x.value=g.value),g.value<O.value[0]&&(g.value=O.value[0]),x.value<V.value[0]&&(x.value=V.value[0]),F(s.value,f.value,y.value,$.value)&&(y.value=s.value,$.value=f.value)}),(M,A)=>(w(),C("div",jt,[t("div",Pt,[t("div",qt,[t("div",Et,[L(Ne,{class:"ml-2",arcanist:d.value},null,8,["arcanist"]),t("h2",Ut,P(d.value.Name),1),t("label",Wt,[R(P(v.value)+" ",1),t("i",{class:se(["fa-solid fa-star",{"text-orange-300":v.value===6,"text-yellow-100":v.value===5,"text-purple-400":v.value===4,"text-sky-200":v.value===3,"text-green-200":v.value===2}])},null,2)]),t("div",{class:"tooltip","data-tip":"Remove Arcanist"},[t("i",{onClick:K,class:"fas fa-trash-alt text-gray-500"})])]),t("div",Ft,[t("div",Tt,[t("div",{onClick:A[0]||(A[0]=D=>l.value=!l.value),class:se(["badge badge-ghost",l.value?"green-badge":"red-badge"])},[t("i",{class:se(l.value?"fa-regular fa-eye":"fa-regular fa-eye-slash")},null,2)],2)]),t("button",{onClick:X,class:"text-white"},Bt)])]),Gt,zt,t("div",Ht,[(w(),H(B,{key:h.value,modelValue:s.value,"onUpdate:modelValue":A[1]||(A[1]=D=>s.value=D),selected:s.value,label:"Current Insight",options:i.value,"onUpdate:selected":Y},null,8,["modelValue","selected","options"])),Kt,(w(),H(B,{key:h.value,modelValue:f.value,"onUpdate:modelValue":A[2]||(A[2]=D=>f.value=D),selected:f.value,label:"Current Level",options:_.value,"onUpdate:selected":Y},null,8,["modelValue","selected","options"]))]),Yt,t("div",Zt,[(w(),H(B,{key:h.value,modelValue:y.value,"onUpdate:modelValue":A[3]||(A[3]=D=>y.value=D),selected:y.value,label:"Goal Insight",options:k.value,"onUpdate:selected":Y},null,8,["modelValue","selected","options"])),Jt,(w(),H(B,{key:h.value,modelValue:$.value,"onUpdate:modelValue":A[4]||(A[4]=D=>$.value=D),selected:$.value,label:"Goal Level",options:I.value,"onUpdate:selected":Y},null,8,["modelValue","selected","options"]))]),Xt,t("div",es,[(w(),H(B,{key:h.value,modelValue:g.value,"onUpdate:modelValue":A[5]||(A[5]=D=>g.value=D),selected:g.value,label:"Current Resonance",options:O.value,"onUpdate:selected":Y},null,8,["modelValue","selected","options"])),ts,(w(),H(B,{key:h.value,modelValue:x.value,"onUpdate:modelValue":A[6]||(A[6]=D=>x.value=D),selected:x.value,label:"Goal Resonance",options:V.value,"onUpdate:selected":Y},null,8,["modelValue","selected","options"]))]),t("div",ss,[t("button",{onClick:z,class:"btn btn-success"},"Save"),r.value?(w(),C("div",ns,os)):te("",!0)]),L(_t,{arcanist:p.value},null,8,["arcanist"])])]))}},is=["data-tip"],rs={class:"rounded-md overflow-hidden"},cs={class:"avatar"},us=["src","alt"],ds={__name:"ArcanistIconToggle",props:{arcanist:{type:Number,required:!0},visible:{type:Boolean,required:!0}},setup(e){const a=e,n=E().arcanists.data.find(c=>c.Id===a.arcanist),o=c=>`images/arcanists/icon/${c}.png`;return(c,r)=>(w(),C("div",{class:"tooltip","data-tip":q(n).Name},[t("div",rs,[t("div",cs,[t("div",{class:se(["w-12 rounded",{"filter-grayscale opacity-50":!e.visible,"bg-orange-300":q(n).Rarity===6,"bg-yellow-100":q(n).Rarity===5,"bg-purple-400":q(n).Rarity===4,"bg-sky-200":q(n).Rarity===3,"bg-green-200":q(n).Rarity===2}])},[t("img",{src:o(q(n).Id),alt:q(n).Name},null,8,us)],2)])])],8,is))}},hs=ue(ds,[["__scopeId","data-v-4482658f"]]),fs={class:"flex flex-row flex-wrap justify-center space-x-2"},ps=t("p",{class:"text-center text-slate-300 text-sm opacity-70"},"Left click to edit, right click to show / hide.",-1),vs={__name:"PlannerSelector",props:{selectedArcanists:{type:Array,required:!0}},emits:["open-edit-overlay"],setup(e,{emit:a}){const n=e,o=a,c=S(n.selectedArcanists),r=u=>{o("open-edit-overlay",u)},h=u=>{u.isVisible=!u.isVisible};return(u,d)=>(w(),C("div",null,[t("div",fs,[(w(!0),C(G,null,ne(c.value,m=>(w(),H(hs,{arcanist:m.Id,visible:m.isVisible,onClick:b=>r(m),onContextmenu:Be(b=>h(m),["prevent"])},null,8,["arcanist","visible","onClick","onContextmenu"]))),256))]),ps]))}},T=ce("warehouse",{state:()=>({isActive:!1,data:[],loaded:!1}),actions:{toggle(){this.isActive=!this.isActive},setData(e){this.data=e},setLoaded(){this.loaded=!0},addItem(e,a){this.data.push({Material:e,Quantity:0,Category:a})},removeItem(e){for(let a=0;a<this.data.length;a++)this.data[a].Material===e&&this.data.splice(a,1)},addShopItem(e,a){for(let n=0;n<this.data.length;n++)if(this.data[n].Material===e){this.data[n].Quantity+=Number(a);break}},updateItem(e,a){for(let n=0;n<this.data.length;n++)if(this.data[n].Material===e){this.data[n].Quantity=Number(a);break}},itemExists(e){for(let a=0;a<this.data.length;a++)if(this.data[a].Material===e)return!0;return!1},resetAll(){this.data=[]},resetCategory(e){for(let a=0;a<this.data.length;a++)this.data[a].Category===e&&(this.data[a].Quantity=0)}},persist:!0}),W=(e,a,n)=>e.matrix[Math.imul(a,e.width)+n],U=(e,a,n,o)=>{e.matrix[Math.imul(a,e.width)+n]=o},he=e=>typeof e[Symbol.iterator]=="function"?e:Object.entries(e),we=e=>e===!0?!0:e===!1?new Set:e instanceof Set?e:new Set(e),ms=e=>{const{direction:a,objective:n,integers:o,binaries:c}=e,r=a==="minimize"?-1:1,h=he(e.constraints),u=he(e.variables),d=Array.isArray(u)?u:Array.from(u),m=[],b=[];if(o!=null||c!=null){const i=we(c),k=i===!0?!0:we(o);for(let _=1;_<=d.length;_++){const[I]=d[_-1];i===!0||i.has(I)?(m.push(_),b.push(_)):(k===!0||k.has(I))&&b.push(_)}}const s=new Map;for(const[i,k]of h){const _=s.get(i)??{row:NaN,lower:-1/0,upper:1/0};_.lower=Math.max(_.lower,k.equal??k.min??-1/0),_.upper=Math.min(_.upper,k.equal??k.max??1/0),s.has(i)||s.set(i,_)}let f=1;for(const i of s.values())i.row=f,f+=(Number.isFinite(i.lower)?1:0)+(Number.isFinite(i.upper)?1:0);const g=d.length+1,y=f+m.length,$=g+y,x=new Float64Array(g*y),l=new Int32Array($),p=new Int32Array($),v={matrix:x,width:g,height:y,positionOfVariable:l,variableAtPosition:p};for(let i=0;i<$;i++)l[i]=i,p[i]=i;for(let i=1;i<g;i++)for(const[k,_]of he(d[i-1][1])){k===n&&U(v,0,i,r*_);const I=s.get(k);I!=null&&(Number.isFinite(I.upper)?(U(v,I.row,i,_),Number.isFinite(I.lower)&&U(v,I.row+1,i,-_)):Number.isFinite(I.lower)&&U(v,I.row,i,-_))}for(const i of s.values())Number.isFinite(i.upper)?(U(v,i.row,0,i.upper),Number.isFinite(i.lower)&&U(v,i.row+1,0,-i.lower)):Number.isFinite(i.lower)&&U(v,i.row,0,-i.lower);for(let i=0;i<m.length;i++){const k=f+i;U(v,k,0,1),U(v,k,m[i],1)}return{tableau:v,sign:r,variables:d,integers:b}},je=(e,a)=>{const n=Math.round(1/a);return Math.round((e+Number.EPSILON)*n)/n},Pe=(e,a,n)=>{const o=W(e,a,n),c=e.variableAtPosition[e.width+a],r=e.variableAtPosition[n];e.variableAtPosition[e.width+a]=r,e.variableAtPosition[n]=c,e.positionOfVariable[c]=n,e.positionOfVariable[r]=e.width+a;const h=[];for(let u=0;u<e.width;u++){const d=W(e,a,u);Math.abs(d)>1e-16?(U(e,a,u,d/o),h.push(u)):U(e,a,u,0)}U(e,a,n,1/o);for(let u=0;u<e.height;u++){if(u===a)continue;const d=W(e,u,n);if(Math.abs(d)>1e-16){for(let m=0;m<h.length;m++){const b=h[m];U(e,u,b,W(e,u,b)-d*W(e,a,b))}U(e,u,n,-d/o)}}},qe=(e,a,n,o)=>{e.push([a.variableAtPosition[a.width+n],a.variableAtPosition[o]]);for(let c=6;c<=Math.trunc(e.length/2);c++){let r=!0;for(let h=0;h<c;h++){const u=e.length-1-h,[d,m]=e[u],[b,s]=e[u-c];if(d!==b||m!==s){r=!1;break}}if(r)return!0}return!1},gs=(e,a)=>{const n=[],{precision:o,maxPivots:c,checkCycles:r}=a;for(let h=0;h<c;h++){let u=0,d=o;for(let s=1;s<e.width;s++){const f=W(e,0,s);f>d&&(d=f,u=s)}if(u===0)return["optimal",je(W(e,0,0),o)];let m=0,b=1/0;for(let s=1;s<e.height;s++){const f=W(e,s,u);if(f<=o)continue;const y=W(e,s,0)/f;if(y<b&&(m=s,b=y,y<=o))break}if(m===0)return["unbounded",u];if(r&&qe(n,e,m,u))return["cycled",NaN];Pe(e,m,u)}return["cycled",NaN]},Ee=(e,a)=>{const n=[],{precision:o,maxPivots:c,checkCycles:r}=a;for(let h=0;h<c;h++){let u=0,d=-o;for(let s=1;s<e.height;s++){const f=W(e,s,0);f<d&&(d=f,u=s)}if(u===0)return gs(e,a);let m=0,b=-1/0;for(let s=1;s<e.width;s++){const f=W(e,u,s);if(f<-o){const g=-W(e,0,s)/f;g>b&&(b=g,m=s)}}if(m===0)return["infeasible",NaN];if(r&&qe(n,e,u,m))return["cycled",NaN];Pe(e,u,m)}return["cycled",NaN]};var ys=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ue={exports:{}};(function(e,a){(function(){var n,o,c,r,h,u,d,m,b,s,f,g,y,$,x;c=Math.floor,s=Math.min,o=function(l,p){return l<p?-1:l>p?1:0},b=function(l,p,v,i,k){var _;if(v==null&&(v=0),k==null&&(k=o),v<0)throw new Error("lo must be non-negative");for(i==null&&(i=l.length);v<i;)_=c((v+i)/2),k(p,l[_])<0?i=_:v=_+1;return[].splice.apply(l,[v,v-v].concat(p)),p},u=function(l,p,v){return v==null&&(v=o),l.push(p),$(l,0,l.length-1,v)},h=function(l,p){var v,i;return p==null&&(p=o),v=l.pop(),l.length?(i=l[0],l[0]=v,x(l,0,p)):i=v,i},m=function(l,p,v){var i;return v==null&&(v=o),i=l[0],l[0]=p,x(l,0,v),i},d=function(l,p,v){var i;return v==null&&(v=o),l.length&&v(l[0],p)<0&&(i=[l[0],p],p=i[0],l[0]=i[1],x(l,0,v)),p},r=function(l,p){var v,i,k,_,I,O;for(p==null&&(p=o),_=(function(){O=[];for(var V=0,F=c(l.length/2);0<=F?V<F:V>F;0<=F?V++:V--)O.push(V);return O}).apply(this).reverse(),I=[],i=0,k=_.length;i<k;i++)v=_[i],I.push(x(l,v,p));return I},y=function(l,p,v){var i;if(v==null&&(v=o),i=l.indexOf(p),i!==-1)return $(l,0,i,v),x(l,i,v)},f=function(l,p,v){var i,k,_,I,O;if(v==null&&(v=o),k=l.slice(0,p),!k.length)return k;for(r(k,v),O=l.slice(p),_=0,I=O.length;_<I;_++)i=O[_],d(k,i,v);return k.sort(v).reverse()},g=function(l,p,v){var i,k,_,I,O,V,F,Q,z;if(v==null&&(v=o),p*10<=l.length){if(_=l.slice(0,p).sort(v),!_.length)return _;for(k=_[_.length-1],F=l.slice(p),I=0,V=F.length;I<V;I++)i=F[I],v(i,k)<0&&(b(_,i,0,null,v),_.pop(),k=_[_.length-1]);return _}for(r(l,v),z=[],O=0,Q=s(p,l.length);0<=Q?O<Q:O>Q;0<=Q?++O:--O)z.push(h(l,v));return z},$=function(l,p,v,i){var k,_,I;for(i==null&&(i=o),k=l[v];v>p;){if(I=v-1>>1,_=l[I],i(k,_)<0){l[v]=_,v=I;continue}break}return l[v]=k},x=function(l,p,v){var i,k,_,I,O;for(v==null&&(v=o),k=l.length,O=p,_=l[p],i=2*p+1;i<k;)I=i+1,I<k&&!(v(l[i],l[I])<0)&&(i=I),l[p]=l[i],p=i,i=2*p+1;return l[p]=_,$(l,O,p,v)},n=function(){l.push=u,l.pop=h,l.replace=m,l.pushpop=d,l.heapify=r,l.updateItem=y,l.nlargest=f,l.nsmallest=g;function l(p){this.cmp=p??o,this.nodes=[]}return l.prototype.push=function(p){return u(this.nodes,p,this.cmp)},l.prototype.pop=function(){return h(this.nodes,this.cmp)},l.prototype.peek=function(){return this.nodes[0]},l.prototype.contains=function(p){return this.nodes.indexOf(p)!==-1},l.prototype.replace=function(p){return m(this.nodes,p,this.cmp)},l.prototype.pushpop=function(p){return d(this.nodes,p,this.cmp)},l.prototype.heapify=function(){return r(this.nodes,this.cmp)},l.prototype.updateItem=function(p){return y(this.nodes,p,this.cmp)},l.prototype.clear=function(){return this.nodes=[]},l.prototype.empty=function(){return this.nodes.length===0},l.prototype.size=function(){return this.nodes.length},l.prototype.clone=function(){var p;return p=new l,p.nodes=this.nodes.slice(0),p},l.prototype.toArray=function(){return this.nodes.slice(0)},l.prototype.insert=l.prototype.push,l.prototype.top=l.prototype.peek,l.prototype.front=l.prototype.peek,l.prototype.has=l.prototype.contains,l.prototype.copy=l.prototype.clone,l}(),function(l,p){return e.exports=p()}(this,function(){return n})}).call(ys)})(Ue);var _s=Ue.exports,xs=_s;const ws=bs(xs),$e=(e,a)=>({matrix:new Float64Array(e),positionOfVariable:new Int32Array(a),variableAtPosition:new Int32Array(a)}),$s=(e,{matrix:a,positionOfVariable:n,variableAtPosition:o},c)=>{const{width:r,height:h}=e;a.set(e.matrix);for(let d=0;d<c.length;d++){const[m,b,s]=c[d],f=(h+d)*r,g=e.positionOfVariable[b];if(g<r)a[f]=m*s,a.fill(0,f+1,f+r),a[f+g]=m;else{const y=(g-r)*r;a[f]=m*(s-a[y]);for(let $=1;$<r;$++)a[f+$]=-m*a[y+$]}}n.set(e.positionOfVariable),o.set(e.variableAtPosition);const u=r+h+c.length;for(let d=r+h;d<u;d++)n[d]=d,o[d]=d;return{matrix:a.subarray(0,e.matrix.length+r*c.length),width:r,height:h+c.length,positionOfVariable:n.subarray(0,u),variableAtPosition:o.subarray(0,u)}},ke=(e,a)=>{let n=0,o=0,c=0;for(let r=0;r<a.length;r++){const h=a[r],u=e.positionOfVariable[h]-e.width;if(u<0)continue;const d=W(e,u,0),m=Math.abs(d-Math.round(d));m>n&&(n=m,o=h,c=d)}return[o,c,n]},ks=(e,a,n)=>{const{tableau:o,sign:c,integers:r}=e,{precision:h,maxIterations:u,tolerance:d,timeout:m}=n,[b,s,f]=ke(o,r);if(f<=h)return[e,"optimal",a];const g=new ws((z,K)=>z[0]-K[0]);g.push([a,[[-1,b,Math.ceil(s)]]]),g.push([a,[[1,b,Math.floor(s)]]]);const y=r.length*2,$=o.matrix.length+y*o.width,x=o.positionOfVariable.length+y;let l=$e($,x),p=$e($,x);const v=a*(1-c*d),i=m+Date.now();let k=Date.now()>=i,_=!1,I=1/0,O=o,V=0;for(;V<u&&!g.empty()&&I>=v&&!k;){const[z,K]=g.pop();if(z>I)break;const X=$s(o,l,K),[Y,M]=Ee(X,n);if(Y==="optimal"&&M<I){const[A,D,J]=ke(X,r);if(J<=h){_=!0,I=M,O=X;const N=p;p=l,l=N}else{const N=[],Z=[];for(let ee=0;ee<K.length;ee++){const ie=K[ee],[Te,Qe]=ie;Qe===A?Te<0?Z.push(ie):N.push(ie):(N.push(ie),Z.push(ie))}Z.push([1,A,Math.floor(D)]),N.push([-1,A,Math.ceil(D)]),g.push([M,N]),g.push([M,Z])}}k=Date.now()>=i,V++}const Q=(k||V>=u)&&!g.empty()&&I>=v?"timedout":_?"optimal":"infeasible";return[{...e,tableau:O},Q,_?I:NaN]},Ie=({tableau:e,sign:a,variables:n},o,c,{precision:r,includeZeroVariables:h})=>{if(o==="optimal"||o==="timedout"&&!Number.isNaN(c)){const u=[];for(let d=0;d<n.length;d++){const[m]=n[d],b=e.positionOfVariable[d+1]-e.width,s=b>=0?W(e,b,0):0;s>r?u.push([m,je(s,r)]):h&&u.push([m,0])}return{status:o,result:-a*c,variables:u}}else if(o==="unbounded"){const u=e.variableAtPosition[c]-1;return{status:"unbounded",result:a*(1/0),variables:0<=u&&u<n.length?[[n[u][0],1/0]]:[]}}else return{status:o,result:NaN,variables:[]}},Is={precision:1e-8,checkCycles:!1,maxPivots:8192,tolerance:0,timeout:1/0,maxIterations:32768,includeZeroVariables:!1},As=(e,a)=>{const n=ms(e),o={...Is,...a},[c,r]=Ee(n.tableau,o);if(n.integers.length===0||c!=="optimal")return Ie(n,c,r,o);{const[h,u,d]=ks(n,r,o);return Ie(h,u,d,o)}},re=E().items.data,Cs=E().formulas.data,We=T().data;function Ss(e){const n=re.find(c=>c.Name===e.Material).Rarity,o=e.Quantity;return n===3?o*40:n===4?o*100:n===5?o*250:n===6?o*1500:0}function Ms(e){return e==="Oneiric Shop"?"images/items/common/1.png":"images/items/common/0.png"}function Fe(e,a,n,o,c){return{stage:e,runs:isNaN(a)?0:a,activity:isNaN(n)?0:n,days:isNaN(o)?0:o,materials:c,activityImagePath:Ms(e)}}function Ae(e,a){let n=a.find(o=>o.stage===e);return n||(n=Fe(e,null,e==="Oneiric Shop"?0:null,null,[]),a.push(n)),n}function fe(e,a){return e.sort((n,o)=>{const c=Object.values(a).find(h=>h===n.stage),r=Object.values(a).find(h=>h===o.stage);return c&&r?c.id-r.id:c?-1:r?1:0})}function Ns(e){return e.sort((a,n)=>n.runs-a.runs)}function Os(e){return e.forEach(a=>{const n=We.find(o=>o.Category==="Resonate Material"&&o.Material===a.Material);n&&(a.Quantity-=n.Quantity)}),e}function Rs(){return be().settings.unreleasedDrops?E().drops1_4.data:E().drops.data}function Ds(e,a){const n={},o={},c=["Sinuous Howl","Interlaced Shudder","Hypocritical Murmur","Hoarse Echo","Sonorous Knell","Brief Cacophony","Moment of Dissonance","Crystal Casket"];e.forEach(({Material:g,Quantity:y})=>{c.includes(g)||(o[g]={min:y})});const r={},h=[];for(let{Name:g,Material:y,Quantity:$}of Cs){if(n[g]={min:0},y.length===0)continue;const x={};y.forEach((p,v)=>{x[p]=-$[v]});const l=`Wilderness Wishing Spring - ${g}`;r[l]={[g]:1,...x,cost:0},h.includes(l)||h.push(l)}const u={};for(let g in a){const y=a[g],{count:$,cost:x,drops:l}=y;u[g]={cost:x};for(let p in l)u[g][p]=l[p]/$}const d={...n,...o};We.forEach(g=>{const{Material:y,Quantity:$}=g,x=parseInt($);x>0&&(d[y]?d[y]={min:d[y].min-x}:d[y]={min:-x})});const m=Object.assign({},r,u),f=As({objective:"cost",direction:"minimize",constraints:d,variables:m,integers:h},{maxIterations:1048576,tolerance:.25});return f.status!=="optimal"&&(console.log(`%cStatus: ${f.status}`,"background-color: yellow; color: black;"),console.log("constraints: ",d),console.log("variables: ",m)),f}function Vs(e){const a=[],n=Rs();let o=0;function c(s){if(s.Quantity<=0||re.find(g=>g.Name===s.Material).Category!=="Resonate Material")return;const f=Ae("Oneiric Shop",a);f.materials.push(s),f.activity+=Ss(s)}if(e.forEach(s=>{re.find(f=>f.Name===s.Material).Category!=="Resonate Material"||re.find(f=>f.Name===s.Material).Rarity!==6||(o+=s.Quantity,s.Quantity=0)}),o>0){const s={Material:"Crystal Casket",Quantity:o};e.unshift(s)}Os(e),e.forEach(s=>{c(s)}),Ds(e,n).variables.forEach(s=>{const f=n[s[0]];if(f){const g=Math.ceil(s[1]),y=Math.ceil(g*f.cost),$=(y/240).toFixed(1);let x=Object.entries(f.drops).map(([p,v])=>{let i=v/f.count*g;return i=i%1>=.9?Math.ceil(i):Math.floor(i),{Material:p,Quantity:i}});x=x.filter(p=>p.Quantity>0);const l=Fe(s[0],g,y,$,x);a.push(l)}else{const $={Material:s[0].split("-")[1].trim(),Quantity:s[1]};Ae("Wilderness Wishing Spring",a).materials.push($)}});const h=a.filter(s=>["The Poussiere VI","Mintage Aesthetics VI","Oneiric Shop"].includes(s.stage)&&s.materials.length>0),u=a.filter(s=>(s.stage.endsWith("II")||s.stage.endsWith("IV")||s.stage.endsWith("VI"))&&!h.some(f=>f.stage===s.stage)&&s.materials.length>0),d=a.filter(s=>!["Wilderness Wishing Spring",...h.map(f=>f.stage),...u.map(f=>f.stage)].includes(s.stage)&&s.materials.length>0),m=a.filter(s=>["Wilderness Wishing Spring"].includes(s.stage)&&s.materials.length>0);return[{id:0,cards:fe(h,n)},{id:1,cards:fe(u,n)},{id:2,cards:Ns(d)},{id:3,cards:fe(m,n)}]}function Ls(e){let a=0,n=0;return e.forEach(o=>{o.cards.forEach(c=>{c.days!==null&&(a+=c.activity,n+=parseFloat(c.days))})}),[a,n.toFixed(0)]}const js=e=>(ge("data-v-e34a7b38"),e=e(),ye(),e),Ps={class:"bg-gray-700/40 shadow rounded flex flex-col items-center justify-between relative"},qs={class:"stage text-white p-2"},Es={class:"tooltip w-full","data-tip":"Number of runs | Activities | Days"},Us={class:"calculations flex justify-center items-center bg-gradient-to-r from-blue-800/70 to-blue-900/90 text-white p-2 rounded-md"},Ws={class:"border-blue-700/90 border-r pr-3"},Fs={key:0},Ts=js(()=>t("i",{class:"fa-solid fa-xmark text-xs mr-0.5"},null,-1)),Qs={key:1},Bs={class:"pl-2"},Gs=["src"],zs={class:"border-blue-700/90 border-l pl-3"},Hs={__name:"Card",props:{card:{type:Object,required:!0}},setup(e){const a=e,n=j(()=>a.card.materials.length<4),o=S(null);return Se(n,c=>{c&&o.value&&(o.value.scrollLeft=0)}),(c,r)=>(w(),C("div",Ps,[t("div",qs,[t("p",null,P(e.card.stage),1)]),t("div",Es,[t("div",Us,[t("p",Ws,[e.card.runs>0?(w(),C("span",Fs,[Ts,R(P(e.card.runs),1)])):(w(),C("span",Qs,P(e.card.runs),1))]),t("p",Bs,P(e.card.activity==null?"Crafted from available Materials":e.card.activity),1),ae(t("img",{src:e.card.activityImagePath,alt:"Activity Image",class:"inline-block w-8 h-8"},null,8,Gs),[[Ge,e.card.activity]]),t("p",zs,P(e.card.days)+" "+P(e.card.days===null?"":e.card.days>1?"days":"day"),1)])]),t("div",{ref_key:"scrollDiv",ref:o,class:se([{"custom-scrollbar":n.value},"flex overflow-y-hidden overflow-x-auto scrollbar m-auto"])},[(w(!0),C(G,null,ne(e.card.materials,(h,u)=>(w(),C("div",{key:u,class:"flex-shrink-0"},[L(Re,{class:"",material:h},null,8,["material"])]))),128))],2)]))}},Ks=ue(Hs,[["__scopeId","data-v-e34a7b38"]]),Ys={class:"w-full mb-4 flex flex-col"},Zs={__name:"PlannerLayer",props:{layer:{type:Object,required:!0}},setup(e){const a=e,n=j(()=>a.layer.cards&&a.layer.cards.length>0),o=j(()=>{switch(a.layer.id){case 0:return"yellow-badge";case 1:return"indigo-badge";case 2:return"purple-badge";case 3:return"green-badge";default:return"red-badge"}}),c=j(()=>{switch(a.layer.id){case 0:return"Resources";case 1:return"Insight";case 2:return"Hard Stages";case 3:return"Crafting";default:return"Undefined"}}),r=j(()=>{switch(a.layer.id){case 2:return"mb-2 gap-5 grid grid-cols-1 lg:grid-cols-2";case 3:return"mb-2 gap-5 grid grid-cols-1";default:return"mb-2 gap-5 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4"}});return(h,u)=>(w(),C("div",Ys,[n.value?(w(),C("div",{key:0,class:se(["badge badge-lg badge-ghost mt-2 mb-2 w-32",o.value])},P(c.value),3)):te("",!0),t("div",{class:se(r.value)},[(w(!0),C(G,null,ne(e.layer.cards,(d,m)=>(w(),H(Ks,{key:m,card:d},null,8,["card"]))),128))],2)]))}},Js={class:"flex flex-wrap"},Xs=t("button",{class:"text-center text-info text-sm opacity-80",onclick:"process_explaination.showModal()"},"Confused at how the process work?",-1),en=t("dialog",{id:"process_explaination",class:"modal"},[t("div",{class:"modal-box custom-gradient-gray-blue"},[t("form",{method:"dialog"},[t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2 text-white"},"✕")]),t("div",null,[t("p",{class:"py-4 text-white"},[R(" When you add arcanists to the planner with their current/goal levels & resonance, you will see several sections appear below. "),t("br"),t("br"),R(" The "),t("span",{class:"text-yellow-500"},"Resources"),R(" & "),t("span",{class:"text-blue-500"},"Insight"),R(" sections are straightforward, and they show you how many times you need to run each stage in order to get the materials based on your intended arcanist levels. Since we can't farm resonance materials, those are shown with the cost associated in the Oneiric Shop found in the Bank. "),t("br"),t("br"),R(" The other two sections are "),t("span",{class:"text-purple-500"},"Hard Stages"),R(" & "),t("span",{class:"text-green-500"},"Crafting"),R(". These results have been optimized to reduce the stamina required for farming these materials. By running the listed stages the number of times it suggests, it is expected you will receive all the materials you need. The materials obtained from the hard stage farming will help you make the items listed in the crafting section. "),t("br"),t("br"),R(" As you obtain materials from farming hard stages, it's recommended that you update your warehouse values so that the planner remains up-to-date & your results are accurate. "),t("br"),t("br"),R(" Please note that we do not know exact drop rates, so we can only show what you're "),t("span",{class:"text-red-500"}," expected "),R(" to get - not what you will get exactly. The "),t("span",{class:"text-purple-500"},"Hard Stages"),R(" section will also show "),t("span",{class:"text-red-500"}," any "),R(" drop that you may get - rather than only the items that you need. This does not affect the results of the farm plan. ")])])]),t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")])],-1),tn={__name:"PlannerResult",props:{selectedArcanists:{type:Array,required:!0}},emits:["update:totalActivityAndDays"],setup(e,{emit:a}){const n=e,o=a,c=S([]),r=S([]);return Me(()=>{const h=n.selectedArcanists.map(m=>m.isVisible?Le(m):[]),u=Ve(h);c.value=u;const d=Vs(u);o("update:totalActivityAndDays",Ls(d)),r.value=d}),(h,u)=>(w(),C("div",Js,[Xs,en,(w(!0),C(G,null,ne(r.value,(d,m)=>(w(),H(Zs,{key:m,layer:d},null,8,["layer"]))),128))]))}},sn="/Kornblume/images/items/common/0.png",nn="/Kornblume/images/items/icon/55.png",an="/Kornblume/images/items/icon/54.png",de=e=>(ge("data-v-dbe2ab05"),e=e(),ye(),e),on={class:"flex custom-gradient-gray-blue-light px-2 py-2 md:px-4 lg:px-6 rounded-md items-center justify-center"},ln=de(()=>t("i",{class:"fa-solid fa-calculator text-white mr-3"},null,-1)),rn={class:"tooltip flex items-center","data-tip":"Estimated total Activities and Days"},cn={class:"text"},un=de(()=>t("div",{class:"avatar"},[t("div",{class:"w-8 rounded"},[t("img",{src:sn,alt:"avatar"})])],-1)),dn={class:"text pr-3"},hn={class:"tooltip","data-tip":"Wilderness Production"},fn={class:"text"},pn=de(()=>t("div",{class:"avatar"},[t("div",{class:"w-8 rounded"},[t("img",{src:nn,alt:"avatar"})])],-1)),vn={class:"tooltip","data-tip":"Wilderness Production"},mn={class:"text"},gn=de(()=>t("div",{class:"avatar"},[t("div",{class:"w-8 rounded"},[t("img",{src:an,alt:"avatar"})])],-1)),yn={__name:"PlannerTotal",props:{totalActivityAndDays:{type:Array,required:!0},wildernessSettings:{type:Object,required:!0}},setup(e){return(a,n)=>(w(),C("div",on,[ln,t("div",rn,[t("div",cn,P(e.totalActivityAndDays[0]),1),un,t("div",dn,P(e.totalActivityAndDays[1])+" "+P(e.totalActivityAndDays[1]>1?"days":"day"),1)]),t("div",hn,[t("div",fn,P(q(ve)(e.wildernessSettings.wildernessOutput.dust*e.totalActivityAndDays[1])),1)]),pn,t("div",vn,[t("div",mn,P(q(ve)(e.wildernessSettings.wildernessOutput.gold*e.totalActivityAndDays[1])),1)]),gn]))}},bn=ue(yn,[["__scopeId","data-v-dbe2ab05"]]),le=e=>(ge("data-v-9672159b"),e=e(),ye(),e),_n={class:"list-overlay"},xn={class:"custom-modal-small h-auto"},wn=le(()=>t("i",{class:"fas fa-times"},null,-1)),$n=[wn],kn=le(()=>t("div",{class:"custom-label text-yellow-100"},"Dust Bell Towers",-1)),In={class:"grid grid-cols-3"},An=le(()=>t("div",{class:"custom-label text-yellow-100"},"Gold Bell Towers",-1)),Cn={class:"grid grid-cols-3"},Sn=le(()=>t("div",{class:"custom-label text-yellow-100"},"Vigor (%)",-1)),Mn={class:"grid grid-cols-2 p-2 items-center"},Nn={class:"tooltip","data-tip":"Collect once a day"},On={class:"form-control"},Rn={class:"cursor-pointer label justify-center"},Dn=le(()=>t("span",{class:"label-text text-yellow-100 mr-3"},"Lazy Modo",-1)),Vn=["checked"],Ln=le(()=>t("div",{class:"custom-label text-yellow-100"},"Output",-1)),jn={class:"grid grid-cols-2 p-2"},Pn={class:"tooltip","data-tip":"Dust"},qn={class:"flex items-center justify-center gradient-blue text-center rounded-xl mx-5 lg:mx-2 h-8"},En={class:"tooltip","data-tip":"Sharpodonty"},Un={class:"flex items-center justify-center gradient-blue text-center rounded-xl mx-5 lg:mx-2 h-8"},Wn={__name:"PlannerWilderness",props:{settings:{type:Object,required:!0}},emits:{closeOverlay:{type:Function,required:!0},saveWildernessSettings:{type:Function,required:!0}},setup(e,{emit:a}){const n=e,o=a,c=()=>{o("closeOverlay")},r=S(n.settings.dust1),h=S(n.settings.dust2),u=S(n.settings.dust3),d=S(n.settings.gold1),m=S(n.settings.gold2),b=S(n.settings.gold3),s=S(n.settings.vigor),f=S(n.settings.lazyModo),g=[0,1,2,3,4,5,6],y=[0,120,150,175,210,240,270],$=[0,60,75,80,96,108,120],x=(i,k)=>{switch(k){case"Dust 1":r.value=i;break;case"Dust 2":h.value=i;break;case"Dust 3":u.value=i;break;case"Gold 1":d.value=i;break;case"Gold 2":m.value=i;break;case"Gold 3":b.value=i;break}},l=()=>{const i=parseInt(s.value,10);if(isNaN(i)){s.value=null;return}if(i<0){s.value=0;return}if(i>50){s.value=50;return}s.value=i},p=()=>{const i={dust1:r.value,dust2:h.value,dust3:u.value,gold1:d.value,gold2:m.value,gold3:b.value,vigor:s.value,lazyModo:f.value,wildernessOutput:v.value};o("saveWildernessSettings",i),c()},v=j(()=>{const i=y[r.value]+y[h.value]+y[u.value],k=$[d.value]+$[m.value]+$[b.value],_=s.value?parseFloat(s.value/100):0,I=f.value?20:24,O=Math.ceil(i*(1+_)*I),V=Math.ceil(k*(1+_)*I);return{dust:O,gold:V}});return(i,k)=>(w(),C("div",_n,[t("div",xn,[t("button",{onClick:c,class:"absolute top-2 right-4 text-white"},$n),kn,t("div",In,[L(B,{class:"select-list",options:g,selected:r.value,label:"Dust 1","onUpdate:selected":x},null,8,["selected"]),L(B,{class:"select-list",options:g,selected:h.value,label:"Dust 2","onUpdate:selected":x},null,8,["selected"]),L(B,{class:"select-list",options:g,selected:u.value,label:"Dust 3","onUpdate:selected":x},null,8,["selected"])]),An,t("div",Cn,[L(B,{class:"select-list",options:g,selected:d.value,label:"Gold 1","onUpdate:selected":x},null,8,["selected"]),L(B,{class:"select-list",options:g,selected:m.value,label:"Gold 2","onUpdate:selected":x},null,8,["selected"]),L(B,{class:"select-list",options:g,selected:b.value,label:"Gold 3","onUpdate:selected":x},null,8,["selected"])]),Sn,t("div",Mn,[ae(t("input",{onInput:l,"onUpdate:modelValue":k[0]||(k[0]=_=>s.value=_),type:"text",placeholder:"Vigor",class:"input input-bordered input-info input-sm mx-10 lg:mx-5 gradient-blue text-center"},null,544),[[me,s.value]]),t("div",Nn,[t("div",On,[t("label",Rn,[Dn,ae(t("input",{"onUpdate:modelValue":k[1]||(k[1]=_=>f.value=_),type:"checkbox",checked:f.value,class:"checkbox checkbox-info"},null,8,Vn),[[pe,f.value]])])])])]),Ln,t("div",jn,[t("div",Pn,[t("label",qn,P(v.value.dust),1)]),t("div",En,[t("label",Un,P(v.value.gold),1)])]),t("div",{class:"flex justify-center"},[t("button",{onClick:p,class:"btn btn-success"},"Save")])])]))}},Fn=ue(Wn,[["__scopeId","data-v-9672159b"]]);function Tn(e){const a=E().shops.data;e in a?a[e].forEach(o=>{const{Material:c,Quantity:r}=o;T().addShopItem(c,r)}):console.error(`Version ${e} not found in shops data.`)}const Qn={class:"pb-6"},Bn={class:"relative inline-block"},Gn=["src"],zn=["src"],Hn={__name:"ItemWarehouse",props:{material:{type:Object,required:!0}},setup(e,{emit:a}){const n=e,o=a,c=S(n.material.Quantity),r=j(()=>Oe(n.material)),h=()=>{o("update:quantity",Number(c.value))};return(u,d)=>(w(),C("div",Qn,[t("div",Bn,[t("img",{src:r.value.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute"},null,8,Gn),t("img",{src:r.value.itemImagePath,alt:"Material Image",class:"w-20 h-20"},null,8,zn),ae(t("input",{"onUpdate:modelValue":d[0]||(d[0]=m=>c.value=m),onInput:h,type:"text",placeholder:"",class:"bg-slate-600 text-white absolute -bottom-3 left-3 w-14 input input-xs rounded-t-none text-center"},null,544),[[me,c.value]])])]))}},Kn={class:"list-overlay"},Yn={class:"custom-modal-big h-5/6 xl:h-3/4 flex flex-col items-center"},Zn=t("i",{class:"fas fa-times"},null,-1),Jn=[Zn],Xn=t("p",{class:"text-white text-center font-bold text-lg"}," Warehouse ",-1),ea={class:"grid grid-cols-2 xl:grid-cols-4 justify-center items-center pb-5 text-center"},ta={class:"form-control items-center"},sa={class:"label cursor-pointer space-x-2"},na=t("span",{class:"label-text text-error text-xs font-bold"},"Base Item",-1),aa={class:"form-control items-center"},oa={class:"label cursor-pointer space-x-2"},la=t("span",{class:"label-text text-info text-xs font-bold"},"Build Material",-1),ia={class:"form-control items-center"},ra={class:"label cursor-pointer space-x-2"},ca=t("span",{class:"label-text text-success text-xs font-bold"},"Insight Material",-1),ua={class:"form-control items-center"},da={class:"label cursor-pointer space-x-2"},ha=t("span",{class:"label-text text-warning text-xs font-bold"},"Resonate Material",-1),fa={class:"custom-scrollbar overflow-y-scroll overflow-x-hidden flex-grow mb-5"},pa={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-7 xl:grid-cols-8 2xl:grid-cols-10"},va={class:"flex space-x-10"},ma={class:"flex space-x-3"},ga=t("button",{class:"btn btn-success btn-sm",onclick:"my_modal_shop1.showModal()"},"1.2 pt.1",-1),ya={id:"my_modal_shop1",class:"modal"},ba={class:"modal-box bg-slate-700"},_a=t("p",{class:"py-4 text-lg text-white text-center"},[R("Add materials from "),t("span",{class:"text-error"},"1.2 part 1"),R(" event shop?")],-1),xa=t("p",{class:"py-4 text-md text-white text-center"}," You should add once only.",-1),wa={class:"flex justify-center"},$a=t("button",{class:"btn btn-error btn-md",onclick:"my_modal_shop1.close()"},"No",-1),ka=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1),Ia=t("button",{class:"btn btn-success btn-sm",onclick:"my_modal_shop2.showModal()"},"1.2 pt.2",-1),Aa={id:"my_modal_shop2",class:"modal"},Ca={class:"modal-box bg-slate-700"},Sa=t("p",{class:"py-4 text-lg text-white text-center"},[R("Add materials from "),t("span",{class:"text-error"},"1.2 part 2"),R(" event shop?")],-1),Ma=t("p",{class:"py-4 text-md text-white text-center"}," You should add once only.",-1),Na={class:"flex justify-center"},Oa=t("button",{class:"btn btn-error btn-md",onclick:"my_modal_shop2.close()"},"No",-1),Ra=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1),Da=t("button",{class:"btn btn-error btn-sm",onclick:"my_modal_resetMat.showModal()"},"Reset",-1),Va=t("p",{class:"py-4 text-lg text-white text-center"},[R("Reset quantity of "),t("span",{class:"text-error"},"selected"),R(" categories?")],-1),La=t("p",{class:"py-4 text-md text-white text-center"}," Click the buttons at the top to select.",-1),ja=t("button",{class:"btn btn-error btn-md",onclick:"my_modal_resetMat.close()"},"No",-1),Pa=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1),qa={__name:"PlannerWarehouse",emits:{closeOverlay:{type:Function,required:!0}},setup(e,{emit:a}){const n=a,o=S({"Base Item":!0,"Build Material":!0,"Insight Material":!0,"Resonate Material":!0});Ce(()=>{let b=be().settings.unreleasedDrops;T().data.length===0?(console.log("Setting up warehouse"),E().items.data.forEach(s=>{(s.IsReleased||b)&&(s.Category==="Build Material"||s.Category==="Insight Material"||s.Category==="Resonate Material"&&s.Rarity<6||s.Name==="Dust"||s.Name==="Sharpodonty"||s.Name==="Crystal Casket")&&T().addItem(s.Name,s.Category)})):E().items.data.forEach(s=>{!T().itemExists(s.Name)&&(s.Name==="Crystal Casket"||!s.IsReleased&&b)?T().addItem(s.Name,s.Category):!s.IsReleased&&!b&&T().removeItem(s.Name)}),De(T().data)});const c=(b,s)=>{T().updateItem(b,Number(s))},r=b=>{o.value[b]=!o.value[b]},h=j(()=>Object.values(o.value).some(s=>s)?T().data.filter(s=>o.value[s.Category]):T().data),u=()=>{Object.values(o.value).every(b=>b)?(T().resetAll(),window.location.reload()):Object.keys(o.value).forEach(b=>{o.value[b]&&T().resetCategory(b)}),n("closeOverlay")},d=b=>{Tn(b),n("closeOverlay")},m=()=>{n("closeOverlay")};return(b,s)=>(w(),C("div",Kn,[t("div",Yn,[t("button",{onClick:m,class:"absolute top-2 right-4 text-white"},Jn),Xn,t("div",null,[t("div",ea,[t("div",ta,[t("label",sa,[na,t("input",{type:"checkbox",checked:"",onChange:s[0]||(s[0]=f=>r("Base Item")),class:"checkbox checkbox-error"},null,32)])]),t("div",aa,[t("label",oa,[la,t("input",{type:"checkbox",checked:"",onChange:s[1]||(s[1]=f=>r("Build Material")),class:"checkbox checkbox-info"},null,32)])]),t("div",ia,[t("label",ra,[ca,t("input",{type:"checkbox",checked:"",onChange:s[2]||(s[2]=f=>r("Insight Material")),class:"checkbox checkbox-success"},null,32)])]),t("div",ua,[t("label",da,[ha,t("input",{type:"checkbox",checked:"",onChange:s[3]||(s[3]=f=>r("Resonate Material")),class:"checkbox checkbox-warning"},null,32)])])])]),t("div",fa,[t("div",pa,[(w(!0),C(G,null,ne(h.value,f=>(w(),H(Hn,{key:f.Material,material:f,"onUpdate:quantity":g=>c(f.Material,g)},null,8,["material","onUpdate:quantity"]))),128))])]),t("div",va,[t("div",ma,[ga,t("dialog",ya,[t("div",ba,[_a,xa,t("div",wa,[t("button",{class:"btn btn-success btn-md mr-2",onClick:s[4]||(s[4]=f=>d("1.21"))},"Yes"),$a])]),ka]),Ia,t("dialog",Aa,[t("div",Ca,[Sa,Ma,t("div",Na,[t("button",{class:"btn btn-success btn-md mr-2",onClick:s[5]||(s[5]=f=>d("1.22"))},"Yes"),Oa])]),Ra])]),Da,t("dialog",{id:"my_modal_resetMat",class:"modal"},[t("div",{class:"modal-box bg-slate-700"},[Va,La,t("div",{class:"flex justify-center"},[t("button",{class:"btn btn-success btn-md mr-2",onClick:u},"Yes"),ja])]),Pa])])])]))}},Ea={class:"list-overlay"},Ua={class:"custom-modal-small h-auto space-y-5"},Wa=t("i",{class:"fas fa-times"},null,-1),Fa=[Wa],Ta={class:"form-control"},Qa={class:"cursor-pointer label justify-center space-x-5"},Ba=t("span",{class:"label-text text-white text-md"},"Show unreleased",-1),Ga={class:"form-control"},za={class:"cursor-pointer label justify-center space-x-5 text-center"},Ha=t("span",{class:"label-text text-white text-md"},"Use 1.4 Stage Data (Experimental)",-1),Ka={__name:"PlannerSettings",props:{settings:{type:Object,required:!0}},emits:{closeOverlay:{type:Function,required:!0},saveSettings:{type:Function,required:!0}},setup(e,{emit:a}){const n=e,o=a,c=S(n.settings.showUnreleased),r=S(n.settings.unreleasedDrops),h=()=>{o("closeOverlay")},u=()=>{const d={showUnreleased:c.value,unreleasedDrops:r.value};o("saveSettings",d),h()};return(d,m)=>(w(),C("div",Ea,[t("div",Ua,[t("button",{onClick:h,class:"absolute top-2 right-4 text-white"},Fa),t("div",Ta,[t("label",Qa,[Ba,ae(t("input",{"onUpdate:modelValue":m[0]||(m[0]=b=>c.value=b),type:"checkbox",class:"checkbox checkbox-info"},null,512),[[pe,c.value]])])]),t("div",Ga,[t("label",za,[Ha,ae(t("input",{"onUpdate:modelValue":m[1]||(m[1]=b=>r.value=b),type:"checkbox",class:"checkbox checkbox-info"},null,512),[[pe,r.value]])])]),t("div",{class:"flex justify-center"},[t("button",{onClick:u,class:"btn btn-success"},"Save")])])]))}},Ya={class:"responsive-spacer"},Za=t("h2",{class:"text-2xl text-white font-bold lg:mb-6"},"Planner",-1),Ja=t("button",{class:"text-info text-sm opacity-80 pb-5",onclick:"oldusers_explaination.showModal()"},"Returning users, please click this if the site is not working.",-1),Xa={id:"oldusers_explaination",class:"modal"},eo={class:"modal-box custom-gradient-gray-blue"},to=t("form",{method:"dialog"},[t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2 text-white"},"✕")],-1),so=t("h3",{class:"font-bold text-lg text-white"},"Howdy!",-1),no={class:"text-slate-300 text-sm pb-4"},ao=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1),oo=t("i",{class:"fa-solid fa-wand-magic-sparkles"},null,-1),lo=t("i",{class:"fa-solid fa-tree"},null,-1),io=[lo],ro=t("i",{class:"fa-solid fa-box-archive"},null,-1),co=[ro],uo=t("i",{class:"fa-solid fa-gear"},null,-1),ho=[uo],fo=t("div",{class:"custom-line"},null,-1),po=t("div",{class:"custom-line"},null,-1),vo={key:0,class:"overlay"},mo={key:1,class:"overlay"},go={key:2,class:"overlay"},yo={key:3,class:"overlay"},bo={key:4,class:"overlay"},wo={__name:"PlannerView",setup(e){const a=Ke(),n=Ye(),o=E().arcanists.data,c=be(),r=S([]),h=j(()=>a.selectedArcanists.map(N=>N.Id));Me(()=>{r.value=o.filter(N=>!h.value.includes(N.Id)&&(c.settings.showUnreleased?!0:N.IsReleased)),r.value.sort((N,Z)=>{const ee=Z.Rarity-N.Rarity;return ee!==0?ee:N.Name.localeCompare(Z.Name)})});const u=S([]),d=S([]),m=S(!1),b=S(!1),s=S(!1),f=S(!1),g=S(!1),y=S(null),$=S(null),x=S(null),l=S(null),p=S(null),v=()=>{m.value=!0},i=()=>{m.value=!1},k=()=>{b.value=!0},_=N=>{u.value=N,k()},I=()=>{b.value=!1},O=()=>{s.value=!0},V=()=>{s.value=!1},F=()=>{f.value=!0},Q=()=>{f.value=!1},z=()=>{g.value=!0},K=()=>{g.value=!1},X=N=>{u.value={Id:N.Id,isVisible:!0,currentInsight:0,currentLevel:1,currentResonance:0,goalInsight:0,goalLevel:1,goalResonance:0},k()},Y=N=>{a.selectedArcanists=N,I()},M=N=>{r.value=N},A=N=>{d.value=N},D=N=>{n.settings=N},J=N=>{c.settings=N};return oe(y,i),oe($,I),oe(x,V),oe(l,Q),oe(p,K),(N,Z)=>{const ee=ze("router-link");return w(),C("div",Ya,[Za,Ja,t("dialog",Xa,[t("div",eo,[to,so,t("p",no,[R(" Due to a significant data change, the information for existing users has been corrupted. Please proceed to your "),L(ee,{class:"text-info text-lg",to:"/profile"},{default:He(()=>[R("Profile")]),_:1}),R(" and reset your data. We apologize for any inconvenience this may cause and appreciate your understanding. ")])]),ao]),L(vs,{selectedArcanists:q(a).selectedArcanists,onOpenEditOverlay:_},null,8,["selectedArcanists"]),t("div",{class:"flex justify-between items-center mb-2 mt-2"},[t("button",{onClick:v,class:"btn btn-ghost btn-sm custom-gradient-button"},[oo,R(" Add Arcanist")]),t("div",{class:"flex space-x-2"},[t("div",{class:"tooltip","data-tip":"Wilderness Settings"},[t("button",{onClick:O,class:"btn btn-ghost btn-sm custom-gradient-button"},io)]),t("div",{class:"tooltip","data-tip":"Manage Warehouse"},[t("button",{onClick:F,class:"btn btn-ghost btn-sm custom-gradient-button"},co)]),t("div",{class:"tooltip","data-tip":"Settings"},[t("button",{onClick:z,class:"btn btn-ghost btn-sm custom-gradient-button"},ho)])])]),fo,L(bn,{totalActivityAndDays:d.value,wildernessSettings:q(n).settings},null,8,["totalActivityAndDays","wildernessSettings"]),po,m.value?(w(),C("div",vo,[L(ct,{ref_key:"arcanistListRef",ref:y,arcanists:r.value,onCloseOverlay:i,onSelectArcanist:X},null,8,["arcanists"])])):te("",!0),b.value?(w(),C("div",mo,[L(ls,{ref_key:"plannerEditRef",ref:$,selectedArcanist:u.value,selectedArcanists:q(a).selectedArcanists,listArcanists:r.value,onCloseOverlay:I,onUpdateSelectedArcanists:Y,onUpdateListArcanists:M},null,8,["selectedArcanist","selectedArcanists","listArcanists"])])):te("",!0),s.value?(w(),C("div",go,[L(Fn,{ref_key:"wildernessRef",ref:x,settings:q(n).settings,onCloseOverlay:V,onSaveWildernessSettings:D},null,8,["settings"])])):te("",!0),f.value?(w(),C("div",yo,[L(qa,{ref_key:"warehouseRef",ref:l,onCloseOverlay:Q},null,512)])):te("",!0),g.value?(w(),C("div",bo,[L(Ka,{ref_key:"settingsRef",ref:p,settings:q(c).settings,onCloseOverlay:K,onSaveSettings:J},null,8,["settings"])])):te("",!0),L(tn,{selectedArcanists:q(a).selectedArcanists,"onUpdate:totalActivityAndDays":A},null,8,["selectedArcanists"])])}}};export{wo as default};
