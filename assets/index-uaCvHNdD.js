import{z as S,A as b,q as O,l as k}from"./index-v-mVuQCC.js";function I(t){return S()?(b(t),!0):!1}function g(t){return typeof t=="function"?t():O(t)}const A=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const L=Object.prototype.toString,P=t=>L.call(t)==="[object Object]",h=()=>{},W=j();function j(){var t;return A&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}function f(t){var s;const r=g(t);return(s=r==null?void 0:r.$el)!=null?s:r}const E=A?window:void 0;function w(...t){let s,r,o,a;if(typeof t[0]=="string"||Array.isArray(t[0])?([r,o,a]=t,s=E):[s,r,o,a]=t,!s)return h;Array.isArray(r)||(r=[r]),Array.isArray(o)||(o=[o]);const d=[],p=()=>{d.forEach(c=>c()),d.length=0},l=(c,u,e,n)=>(c.addEventListener(u,e,n),()=>c.removeEventListener(u,e,n)),m=k(()=>[f(s),g(a)],([c,u])=>{if(p(),!c)return;const e=P(u)?{...u}:u;d.push(...r.flatMap(n=>o.map(i=>l(c,n,i,e))))},{immediate:!0,flush:"post"}),y=()=>{m(),p()};return I(y),y}let v=!1;function _(t,s,r={}){const{window:o=E,ignore:a=[],capture:d=!0,detectIframe:p=!1}=r;if(!o)return;W&&!v&&(v=!0,Array.from(o.document.body.children).forEach(e=>e.addEventListener("click",h)),o.document.documentElement.addEventListener("click",h));let l=!0;const m=e=>a.some(n=>{if(typeof n=="string")return Array.from(o.document.querySelectorAll(n)).some(i=>i===e.target||e.composedPath().includes(i));{const i=f(n);return i&&(e.target===i||e.composedPath().includes(i))}}),c=[w(o,"click",e=>{const n=f(t);if(!(!n||n===e.target||e.composedPath().includes(n))){if(e.detail===0&&(l=!m(e)),!l){l=!0;return}s(e)}},{passive:!0,capture:d}),w(o,"pointerdown",e=>{const n=f(t);l=!m(e)&&!!(n&&!e.composedPath().includes(n))},{passive:!0}),p&&w(o,"blur",e=>{setTimeout(()=>{var n;const i=f(t);((n=o.document.activeElement)==null?void 0:n.tagName)==="IFRAME"&&!(i!=null&&i.contains(o.document.activeElement))&&s(e)},0)})].filter(Boolean);return()=>c.forEach(e=>e())}export{_ as o};
